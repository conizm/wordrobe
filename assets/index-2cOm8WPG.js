(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function g1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xb={exports:{}},_f={},kb={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fc=Symbol.for("react.element"),y1=Symbol.for("react.portal"),_1=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),I1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),S1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),WI=Symbol.iterator;function x1(t){return t===null||typeof t!="object"?null:(t=WI&&t[WI]||t["@@iterator"],typeof t=="function"?t:null)}var Pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rb=Object.assign,Cb={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=Cb,this.updater=n||Pb}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nb(){}Nb.prototype=Ua.prototype;function Hy(t,e,n){this.props=t,this.context=e,this.refs=Cb,this.updater=n||Pb}var Qy=Hy.prototype=new Nb;Qy.constructor=Hy;Rb(Qy,Ua.prototype);Qy.isPureReactComponent=!0;var GI=Array.isArray,Db=Object.prototype.hasOwnProperty,Yy={current:null},Ob={key:!0,ref:!0,__self:!0,__source:!0};function Vb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Db.call(e,r)&&!Ob.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:fc,type:t,key:s,ref:o,props:i,_owner:Yy.current}}function k1(t,e){return{$$typeof:fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jy(t){return typeof t=="object"&&t!==null&&t.$$typeof===fc}function P1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var HI=/\/+/g;function Up(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P1(""+t.key):e.toString(36)}function Md(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fc:case y1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Up(o,0):r,GI(i)?(n="",t!=null&&(n=t.replace(HI,"$&/")+"/"),Md(i,e,n,"",function(c){return c})):i!=null&&(Jy(i)&&(i=k1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(HI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",GI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Up(s,a);o+=Md(s,e,n,l,i)}else if(l=x1(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Up(s,a++),o+=Md(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function od(t,e,n){if(t==null)return t;var r=[],i=0;return Md(t,r,"","",function(s){return e.call(n,s,i++)}),r}function R1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Ld={transition:null},C1={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:Yy};function Fb(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:od,forEach:function(t,e,n){od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return od(t,function(){e++}),e},toArray:function(t){return od(t,function(e){return e})||[]},only:function(t){if(!Jy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Ua;fe.Fragment=_1;fe.Profiler=w1;fe.PureComponent=Hy;fe.StrictMode=v1;fe.Suspense=b1;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C1;fe.act=Fb;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Db.call(e,l)&&!Ob.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:fc,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:I1,_context:t},t.Consumer=t};fe.createElement=Vb;fe.createFactory=function(t){var e=Vb.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:T1,render:t}};fe.isValidElement=Jy;fe.lazy=function(t){return{$$typeof:A1,_payload:{_status:-1,_result:t},_init:R1}};fe.memo=function(t,e){return{$$typeof:S1,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Ld.transition;Ld.transition={};try{t()}finally{Ld.transition=e}};fe.unstable_act=Fb;fe.useCallback=function(t,e){return sn.current.useCallback(t,e)};fe.useContext=function(t){return sn.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};fe.useEffect=function(t,e){return sn.current.useEffect(t,e)};fe.useId=function(){return sn.current.useId()};fe.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return sn.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};fe.useRef=function(t){return sn.current.useRef(t)};fe.useState=function(t){return sn.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return sn.current.useTransition()};fe.version="18.3.1";kb.exports=fe;var re=kb.exports;const Mb=g1(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=re,D1=Symbol.for("react.element"),O1=Symbol.for("react.fragment"),V1=Object.prototype.hasOwnProperty,F1=N1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M1={key:!0,ref:!0,__self:!0,__source:!0};function Lb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)V1.call(e,r)&&!M1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:D1,type:t,key:s,ref:o,props:i,_owner:F1.current}}_f.Fragment=O1;_f.jsx=Lb;_f.jsxs=Lb;xb.exports=_f;var _=xb.exports,Km={},jb={exports:{}},Pn={},Ub={exports:{}},Bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var ne=B.length;B.push(H);e:for(;0<ne;){var Ee=ne-1>>>1,Te=B[Ee];if(0<i(Te,H))B[Ee]=H,B[ne]=Te,ne=Ee;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],ne=B.pop();if(ne!==H){B[0]=ne;e:for(var Ee=0,Te=B.length,qe=Te>>>1;Ee<qe;){var Un=2*(Ee+1)-1,Bn=B[Un],yn=Un+1,$n=B[yn];if(0>i(Bn,ne))yn<Te&&0>i($n,Bn)?(B[Ee]=$n,B[yn]=ne,Ee=yn):(B[Ee]=Bn,B[Un]=ne,Ee=Un);else if(yn<Te&&0>i($n,ne))B[Ee]=$n,B[yn]=ne,Ee=yn;else break e}}return H}function i(B,H){var ne=B.sortIndex-H.sortIndex;return ne!==0?ne:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,g=!1,b=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=B)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function C(B){if(S=!1,A(B),!b)if(n(l)!==null)b=!0,Ie(O);else{var H=n(c);H!==null&&Z(C,H.startTime-B)}}function O(B,H){b=!1,S&&(S=!1,I(E),E=-1),g=!0;var ne=p;try{for(A(H),h=n(l);h!==null&&(!(h.expirationTime>H)||B&&!R());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,p=h.priorityLevel;var Te=Ee(h.expirationTime<=H);H=t.unstable_now(),typeof Te=="function"?h.callback=Te:h===n(l)&&r(l),A(H)}else r(l);h=n(l)}if(h!==null)var qe=!0;else{var Un=n(c);Un!==null&&Z(C,Un.startTime-H),qe=!1}return qe}finally{h=null,p=ne,g=!1}}var D=!1,v=null,E=-1,w=5,k=-1;function R(){return!(t.unstable_now()-k<w)}function N(){if(v!==null){var B=t.unstable_now();k=B;var H=!0;try{H=v(!0,B)}finally{H?x():(D=!1,v=null)}}else D=!1}var x;if(typeof y=="function")x=function(){y(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,we=K.port2;K.port1.onmessage=N,x=function(){we.postMessage(null)}}else x=function(){P(N,0)};function Ie(B){v=B,D||(D=!0,x())}function Z(B,H){E=P(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,Ie(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var ne=p;p=H;try{return B()}finally{p=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ne=p;p=B;try{return H()}finally{p=ne}},t.unstable_scheduleCallback=function(B,H,ne){var Ee=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ee+ne:Ee):ne=Ee,B){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ne+Te,B={id:d++,callback:H,priorityLevel:B,startTime:ne,expirationTime:Te,sortIndex:-1},ne>Ee?(B.sortIndex=ne,e(c,B),n(l)===null&&B===n(c)&&(S?(I(E),E=-1):S=!0,Z(C,ne-Ee))):(B.sortIndex=Te,e(l,B),b||g||(b=!0,Ie(O))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var H=p;return function(){var ne=p;p=H;try{return B.apply(this,arguments)}finally{p=ne}}}})(Bb);Ub.exports=Bb;var L1=Ub.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1=re,An=L1;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $b=new Set,wu={};function so(t,e){ma(t,e),ma(t+"Capture",e)}function ma(t,e){for(wu[t]=e,t=0;t<e.length;t++)$b.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=Object.prototype.hasOwnProperty,U1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QI={},YI={};function B1(t){return Wm.call(YI,t)?!0:Wm.call(QI,t)?!1:U1.test(t)?YI[t]=!0:(QI[t]=!0,!1)}function $1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z1(t,e,n,r){if(e===null||typeof e>"u"||$1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xy=/[\-:]([a-z])/g;function Zy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xy,Zy);Nt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xy,Zy);Nt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xy,Zy);Nt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function e_(t,e,n,r){var i=Nt.hasOwnProperty(e)?Nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(z1(e,n,i,r)&&(n=null),r||i===null?B1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xr=j1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ad=Symbol.for("react.element"),jo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),t_=Symbol.for("react.strict_mode"),Gm=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),qb=Symbol.for("react.context"),n_=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Qm=Symbol.for("react.suspense_list"),r_=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),Kb=Symbol.for("react.offscreen"),JI=Symbol.iterator;function Il(t){return t===null||typeof t!="object"?null:(t=JI&&t[JI]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Bp;function Ll(t){if(Bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bp=e&&e[1]||""}return`
`+Bp+t}var $p=!1;function zp(t,e){if(!t||$p)return"";$p=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{$p=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ll(t):""}function q1(t){switch(t.tag){case 5:return Ll(t.type);case 16:return Ll("Lazy");case 13:return Ll("Suspense");case 19:return Ll("SuspenseList");case 0:case 2:case 15:return t=zp(t.type,!1),t;case 11:return t=zp(t.type.render,!1),t;case 1:return t=zp(t.type,!0),t;default:return""}}function Ym(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case jo:return"Portal";case Gm:return"Profiler";case t_:return"StrictMode";case Hm:return"Suspense";case Qm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qb:return(t.displayName||"Context")+".Consumer";case zb:return(t._context.displayName||"Context")+".Provider";case n_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r_:return e=t.displayName||null,e!==null?e:Ym(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Ym(t(e))}catch{}}return null}function K1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ym(e);case 8:return e===t_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W1(t){var e=Wb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ld(t){t._valueTracker||(t._valueTracker=W1(t))}function Gb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jm(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function XI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hb(t,e){e=e.checked,e!=null&&e_(t,"checked",e,!1)}function Xm(t,e){Hb(t,e);var n=Vi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zm(t,e.type,Vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zm(t,e,n){(e!=="number"||mh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jl=Array.isArray;function Zo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function eg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(jl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vi(n)}}function Qb(t,e){var n=Vi(e.value),r=Vi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ud,Jb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Iu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G1=["Webkit","ms","Moz","O"];Object.keys(Jl).forEach(function(t){G1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jl[e]=Jl[t]})});function Xb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jl.hasOwnProperty(t)&&Jl[t]?(""+e).trim():e+"px"}function Zb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Xb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var H1=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ng(t,e){if(e){if(H1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function rg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ig=null;function i_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sg=null,ea=null,ta=null;function nE(t){if(t=gc(t)){if(typeof sg!="function")throw Error($(280));var e=t.stateNode;e&&(e=Tf(e),sg(t.stateNode,t.type,e))}}function eS(t){ea?ta?ta.push(t):ta=[t]:ea=t}function tS(){if(ea){var t=ea,e=ta;if(ta=ea=null,nE(t),e)for(t=0;t<e.length;t++)nE(e[t])}}function nS(t,e){return t(e)}function rS(){}var qp=!1;function iS(t,e,n){if(qp)return t(e,n);qp=!0;try{return nS(t,e,n)}finally{qp=!1,(ea!==null||ta!==null)&&(rS(),tS())}}function Eu(t,e){var n=t.stateNode;if(n===null)return null;var r=Tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var og=!1;if($r)try{var El={};Object.defineProperty(El,"passive",{get:function(){og=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{og=!1}function Q1(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Xl=!1,gh=null,yh=!1,ag=null,Y1={onError:function(t){Xl=!0,gh=t}};function J1(t,e,n,r,i,s,o,a,l){Xl=!1,gh=null,Q1.apply(Y1,arguments)}function X1(t,e,n,r,i,s,o,a,l){if(J1.apply(this,arguments),Xl){if(Xl){var c=gh;Xl=!1,gh=null}else throw Error($(198));yh||(yh=!0,ag=c)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rE(t){if(oo(t)!==t)throw Error($(188))}function Z1(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rE(i),t;if(s===r)return rE(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function oS(t){return t=Z1(t),t!==null?aS(t):null}function aS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aS(t);if(e!==null)return e;t=t.sibling}return null}var lS=An.unstable_scheduleCallback,iE=An.unstable_cancelCallback,eN=An.unstable_shouldYield,tN=An.unstable_requestPaint,rt=An.unstable_now,nN=An.unstable_getCurrentPriorityLevel,s_=An.unstable_ImmediatePriority,uS=An.unstable_UserBlockingPriority,_h=An.unstable_NormalPriority,rN=An.unstable_LowPriority,cS=An.unstable_IdlePriority,vf=null,dr=null;function iN(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(vf,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:aN,sN=Math.log,oN=Math.LN2;function aN(t){return t>>>=0,t===0?32:31-(sN(t)/oN|0)|0}var cd=64,dd=4194304;function Ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ul(a):(s&=o,s!==0&&(r=Ul(s)))}else o=n&~i,o!==0?r=Ul(o):s!==0&&(r=Ul(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hn(e),i=1<<n,r|=t[n],e&=~i;return r}function lN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=lN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function lg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dS(){var t=cd;return cd<<=1,!(cd&4194240)&&(cd=64),t}function Kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function cN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function o_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function hS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fS,a_,pS,mS,gS,ug=!1,hd=[],Ai=null,xi=null,ki=null,Tu=new Map,bu=new Map,gi=[],dN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sE(t,e){switch(t){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":Tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(e.pointerId)}}function Tl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gc(e),e!==null&&a_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hN(t,e,n,r,i){switch(e){case"focusin":return Ai=Tl(Ai,t,e,n,r,i),!0;case"dragenter":return xi=Tl(xi,t,e,n,r,i),!0;case"mouseover":return ki=Tl(ki,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tu.set(s,Tl(Tu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,bu.set(s,Tl(bu.get(s)||null,t,e,n,r,i)),!0}return!1}function yS(t){var e=ws(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=sS(n),e!==null){t.blockedOn=e,gS(t.priority,function(){pS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ig=r,n.target.dispatchEvent(r),ig=null}else return e=gc(n),e!==null&&a_(e),t.blockedOn=n,!1;e.shift()}return!0}function oE(t,e,n){jd(t)&&n.delete(e)}function fN(){ug=!1,Ai!==null&&jd(Ai)&&(Ai=null),xi!==null&&jd(xi)&&(xi=null),ki!==null&&jd(ki)&&(ki=null),Tu.forEach(oE),bu.forEach(oE)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,ug||(ug=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,fN)))}function Su(t){function e(i){return bl(i,t)}if(0<hd.length){bl(hd[0],t);for(var n=1;n<hd.length;n++){var r=hd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ai!==null&&bl(Ai,t),xi!==null&&bl(xi,t),ki!==null&&bl(ki,t),Tu.forEach(e),bu.forEach(e),n=0;n<gi.length;n++)r=gi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)yS(n),n.blockedOn===null&&gi.shift()}var na=Xr.ReactCurrentBatchConfig,wh=!0;function pN(t,e,n,r){var i=Ae,s=na.transition;na.transition=null;try{Ae=1,l_(t,e,n,r)}finally{Ae=i,na.transition=s}}function mN(t,e,n,r){var i=Ae,s=na.transition;na.transition=null;try{Ae=4,l_(t,e,n,r)}finally{Ae=i,na.transition=s}}function l_(t,e,n,r){if(wh){var i=cg(t,e,n,r);if(i===null)tm(t,e,r,Ih,n),sE(t,r);else if(hN(i,t,e,n,r))r.stopPropagation();else if(sE(t,r),e&4&&-1<dN.indexOf(t)){for(;i!==null;){var s=gc(i);if(s!==null&&fS(s),s=cg(t,e,n,r),s===null&&tm(t,e,r,Ih,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tm(t,e,r,null,n)}}var Ih=null;function cg(t,e,n,r){if(Ih=null,t=i_(r),t=ws(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ih=t,null}function _S(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nN()){case s_:return 1;case uS:return 4;case _h:case rN:return 16;case cS:return 536870912;default:return 16}default:return 16}}var Ii=null,u_=null,Ud=null;function vS(){if(Ud)return Ud;var t,e=u_,n=e.length,r,i="value"in Ii?Ii.value:Ii.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ud=i.slice(t,1<r?1-r:void 0)}function Bd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fd(){return!0}function aE(){return!1}function Rn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fd:aE,this.isPropagationStopped=aE,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),e}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c_=Rn(Ba),mc=He({},Ba,{view:0,detail:0}),gN=Rn(mc),Wp,Gp,Sl,wf=He({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sl&&(Sl&&t.type==="mousemove"?(Wp=t.screenX-Sl.screenX,Gp=t.screenY-Sl.screenY):Gp=Wp=0,Sl=t),Wp)},movementY:function(t){return"movementY"in t?t.movementY:Gp}}),lE=Rn(wf),yN=He({},wf,{dataTransfer:0}),_N=Rn(yN),vN=He({},mc,{relatedTarget:0}),Hp=Rn(vN),wN=He({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),IN=Rn(wN),EN=He({},Ba,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TN=Rn(EN),bN=He({},Ba,{data:0}),uE=Rn(bN),SN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xN[t])?!!e[t]:!1}function d_(){return kN}var PN=He({},mc,{key:function(t){if(t.key){var e=SN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d_,charCode:function(t){return t.type==="keypress"?Bd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RN=Rn(PN),CN=He({},wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cE=Rn(CN),NN=He({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d_}),DN=Rn(NN),ON=He({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),VN=Rn(ON),FN=He({},wf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MN=Rn(FN),LN=[9,13,27,32],h_=$r&&"CompositionEvent"in window,Zl=null;$r&&"documentMode"in document&&(Zl=document.documentMode);var jN=$r&&"TextEvent"in window&&!Zl,wS=$r&&(!h_||Zl&&8<Zl&&11>=Zl),dE=" ",hE=!1;function IS(t,e){switch(t){case"keyup":return LN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ES(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bo=!1;function UN(t,e){switch(t){case"compositionend":return ES(e);case"keypress":return e.which!==32?null:(hE=!0,dE);case"textInput":return t=e.data,t===dE&&hE?null:t;default:return null}}function BN(t,e){if(Bo)return t==="compositionend"||!h_&&IS(t,e)?(t=vS(),Ud=u_=Ii=null,Bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wS&&e.locale!=="ko"?null:e.data;default:return null}}var $N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$N[t.type]:e==="textarea"}function TS(t,e,n,r){eS(r),e=Eh(e,"onChange"),0<e.length&&(n=new c_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eu=null,Au=null;function zN(t){OS(t,0)}function If(t){var e=qo(t);if(Gb(e))return t}function qN(t,e){if(t==="change")return e}var bS=!1;if($r){var Qp;if($r){var Yp="oninput"in document;if(!Yp){var pE=document.createElement("div");pE.setAttribute("oninput","return;"),Yp=typeof pE.oninput=="function"}Qp=Yp}else Qp=!1;bS=Qp&&(!document.documentMode||9<document.documentMode)}function mE(){eu&&(eu.detachEvent("onpropertychange",SS),Au=eu=null)}function SS(t){if(t.propertyName==="value"&&If(Au)){var e=[];TS(e,Au,t,i_(t)),iS(zN,e)}}function KN(t,e,n){t==="focusin"?(mE(),eu=e,Au=n,eu.attachEvent("onpropertychange",SS)):t==="focusout"&&mE()}function WN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return If(Au)}function GN(t,e){if(t==="click")return If(e)}function HN(t,e){if(t==="input"||t==="change")return If(e)}function QN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:QN;function xu(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wm.call(e,i)||!Jn(t[i],e[i]))return!1}return!0}function gE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yE(t,e){var n=gE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gE(n)}}function AS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?AS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xS(){for(var t=window,e=mh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mh(t.document)}return e}function f_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YN(t){var e=xS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&AS(n.ownerDocument.documentElement,n)){if(r!==null&&f_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=yE(n,s);var o=yE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JN=$r&&"documentMode"in document&&11>=document.documentMode,$o=null,dg=null,tu=null,hg=!1;function _E(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hg||$o==null||$o!==mh(r)||(r=$o,"selectionStart"in r&&f_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tu&&xu(tu,r)||(tu=r,r=Eh(dg,"onSelect"),0<r.length&&(e=new c_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$o)))}function pd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zo={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},Jp={},kS={};$r&&(kS=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Ef(t){if(Jp[t])return Jp[t];if(!zo[t])return t;var e=zo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kS)return Jp[t]=e[n];return t}var PS=Ef("animationend"),RS=Ef("animationiteration"),CS=Ef("animationstart"),NS=Ef("transitionend"),DS=new Map,vE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(t,e){DS.set(t,e),so(e,[t])}for(var Xp=0;Xp<vE.length;Xp++){var Zp=vE[Xp],XN=Zp.toLowerCase(),ZN=Zp[0].toUpperCase()+Zp.slice(1);Yi(XN,"on"+ZN)}Yi(PS,"onAnimationEnd");Yi(RS,"onAnimationIteration");Yi(CS,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(NS,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function wE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X1(r,e,void 0,t),t.currentTarget=null}function OS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;wE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;wE(i,a,c),s=l}}}if(yh)throw t=ag,yh=!1,ag=null,t}function Oe(t,e){var n=e[yg];n===void 0&&(n=e[yg]=new Set);var r=t+"__bubble";n.has(r)||(VS(e,t,2,!1),n.add(r))}function em(t,e,n){var r=0;e&&(r|=4),VS(n,t,r,e)}var md="_reactListening"+Math.random().toString(36).slice(2);function ku(t){if(!t[md]){t[md]=!0,$b.forEach(function(n){n!=="selectionchange"&&(eD.has(n)||em(n,!1,t),em(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[md]||(e[md]=!0,em("selectionchange",!1,e))}}function VS(t,e,n,r){switch(_S(e)){case 1:var i=pN;break;case 4:i=mN;break;default:i=l_}n=i.bind(null,e,n,t),i=void 0,!og||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ws(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}iS(function(){var c=s,d=i_(n),h=[];e:{var p=DS.get(t);if(p!==void 0){var g=c_,b=t;switch(t){case"keypress":if(Bd(n)===0)break e;case"keydown":case"keyup":g=RN;break;case"focusin":b="focus",g=Hp;break;case"focusout":b="blur",g=Hp;break;case"beforeblur":case"afterblur":g=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=lE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=_N;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=DN;break;case PS:case RS:case CS:g=IN;break;case NS:g=VN;break;case"scroll":g=gN;break;case"wheel":g=MN;break;case"copy":case"cut":case"paste":g=TN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cE}var S=(e&4)!==0,P=!S&&t==="scroll",I=S?p!==null?p+"Capture":null:p;S=[];for(var y=c,A;y!==null;){A=y;var C=A.stateNode;if(A.tag===5&&C!==null&&(A=C,I!==null&&(C=Eu(y,I),C!=null&&S.push(Pu(y,C,A)))),P)break;y=y.return}0<S.length&&(p=new g(p,b,null,n,d),h.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==ig&&(b=n.relatedTarget||n.fromElement)&&(ws(b)||b[zr]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=c,b=b?ws(b):null,b!==null&&(P=oo(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(S=lE,C="onMouseLeave",I="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=cE,C="onPointerLeave",I="onPointerEnter",y="pointer"),P=g==null?p:qo(g),A=b==null?p:qo(b),p=new S(C,y+"leave",g,n,d),p.target=P,p.relatedTarget=A,C=null,ws(d)===c&&(S=new S(I,y+"enter",b,n,d),S.target=A,S.relatedTarget=P,C=S),P=C,g&&b)t:{for(S=g,I=b,y=0,A=S;A;A=To(A))y++;for(A=0,C=I;C;C=To(C))A++;for(;0<y-A;)S=To(S),y--;for(;0<A-y;)I=To(I),A--;for(;y--;){if(S===I||I!==null&&S===I.alternate)break t;S=To(S),I=To(I)}S=null}else S=null;g!==null&&IE(h,p,g,S,!1),b!==null&&P!==null&&IE(h,P,b,S,!0)}}e:{if(p=c?qo(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var O=qN;else if(fE(p))if(bS)O=HN;else{O=WN;var D=KN}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=GN);if(O&&(O=O(t,c))){TS(h,O,n,d);break e}D&&D(t,p,c),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&Zm(p,"number",p.value)}switch(D=c?qo(c):window,t){case"focusin":(fE(D)||D.contentEditable==="true")&&($o=D,dg=c,tu=null);break;case"focusout":tu=dg=$o=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,_E(h,n,d);break;case"selectionchange":if(JN)break;case"keydown":case"keyup":_E(h,n,d)}var v;if(h_)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Bo?IS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(wS&&n.locale!=="ko"&&(Bo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Bo&&(v=vS()):(Ii=d,u_="value"in Ii?Ii.value:Ii.textContent,Bo=!0)),D=Eh(c,E),0<D.length&&(E=new uE(E,t,null,n,d),h.push({event:E,listeners:D}),v?E.data=v:(v=ES(n),v!==null&&(E.data=v)))),(v=jN?UN(t,n):BN(t,n))&&(c=Eh(c,"onBeforeInput"),0<c.length&&(d=new uE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=v))}OS(h,e)})}function Pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Eh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Eu(t,n),s!=null&&r.unshift(Pu(t,s,i)),s=Eu(t,e),s!=null&&r.push(Pu(t,s,i))),t=t.return}return r}function To(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Eu(n,s),l!=null&&o.unshift(Pu(n,l,a))):i||(l=Eu(n,s),l!=null&&o.push(Pu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tD=/\r\n?/g,nD=/\u0000|\uFFFD/g;function EE(t){return(typeof t=="string"?t:""+t).replace(tD,`
`).replace(nD,"")}function gd(t,e,n){if(e=EE(e),EE(t)!==e&&n)throw Error($(425))}function Th(){}var fg=null,pg=null;function mg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gg=typeof setTimeout=="function"?setTimeout:void 0,rD=typeof clearTimeout=="function"?clearTimeout:void 0,TE=typeof Promise=="function"?Promise:void 0,iD=typeof queueMicrotask=="function"?queueMicrotask:typeof TE<"u"?function(t){return TE.resolve(null).then(t).catch(sD)}:gg;function sD(t){setTimeout(function(){throw t})}function nm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Su(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Su(e)}function Pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $a=Math.random().toString(36).slice(2),rr="__reactFiber$"+$a,Ru="__reactProps$"+$a,zr="__reactContainer$"+$a,yg="__reactEvents$"+$a,oD="__reactListeners$"+$a,aD="__reactHandles$"+$a;function ws(t){var e=t[rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bE(t);t!==null;){if(n=t[rr])return n;t=bE(t)}return e}t=n,n=t.parentNode}return null}function gc(t){return t=t[rr]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Tf(t){return t[Ru]||null}var _g=[],Ko=-1;function Ji(t){return{current:t}}function Me(t){0>Ko||(t.current=_g[Ko],_g[Ko]=null,Ko--)}function Ce(t,e){Ko++,_g[Ko]=t.current,t.current=e}var Fi={},zt=Ji(Fi),pn=Ji(!1),Fs=Fi;function ga(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mn(t){return t=t.childContextTypes,t!=null}function bh(){Me(pn),Me(zt)}function SE(t,e,n){if(zt.current!==Fi)throw Error($(168));Ce(zt,e),Ce(pn,n)}function FS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,K1(t)||"Unknown",i));return He({},n,r)}function Sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,Fs=zt.current,Ce(zt,t),Ce(pn,pn.current),!0}function AE(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=FS(t,e,Fs),r.__reactInternalMemoizedMergedChildContext=t,Me(pn),Me(zt),Ce(zt,t)):Me(pn),Ce(pn,n)}var xr=null,bf=!1,rm=!1;function MS(t){xr===null?xr=[t]:xr.push(t)}function lD(t){bf=!0,MS(t)}function Xi(){if(!rm&&xr!==null){rm=!0;var t=0,e=Ae;try{var n=xr;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xr=null,bf=!1}catch(i){throw xr!==null&&(xr=xr.slice(t+1)),lS(s_,Xi),i}finally{Ae=e,rm=!1}}return null}var Wo=[],Go=0,Ah=null,xh=0,Cn=[],Nn=0,Ms=null,Rr=1,Cr="";function ds(t,e){Wo[Go++]=xh,Wo[Go++]=Ah,Ah=t,xh=e}function LS(t,e,n){Cn[Nn++]=Rr,Cn[Nn++]=Cr,Cn[Nn++]=Ms,Ms=t;var r=Rr;t=Cr;var i=32-Hn(r)-1;r&=~(1<<i),n+=1;var s=32-Hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-Hn(e)+i|n<<i|r,Cr=s+t}else Rr=1<<s|n<<i|r,Cr=t}function p_(t){t.return!==null&&(ds(t,1),LS(t,1,0))}function m_(t){for(;t===Ah;)Ah=Wo[--Go],Wo[Go]=null,xh=Wo[--Go],Wo[Go]=null;for(;t===Ms;)Ms=Cn[--Nn],Cn[Nn]=null,Cr=Cn[--Nn],Cn[Nn]=null,Rr=Cn[--Nn],Cn[Nn]=null}var bn=null,En=null,Ue=!1,Gn=null;function jS(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,En=Pi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:Rr,overflow:Cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,En=null,!0):!1;default:return!1}}function vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wg(t){if(Ue){var e=En;if(e){var n=e;if(!xE(t,e)){if(vg(t))throw Error($(418));e=Pi(n.nextSibling);var r=bn;e&&xE(t,e)?jS(r,n):(t.flags=t.flags&-4097|2,Ue=!1,bn=t)}}else{if(vg(t))throw Error($(418));t.flags=t.flags&-4097|2,Ue=!1,bn=t}}}function kE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function yd(t){if(t!==bn)return!1;if(!Ue)return kE(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mg(t.type,t.memoizedProps)),e&&(e=En)){if(vg(t))throw US(),Error($(418));for(;e;)jS(t,e),e=Pi(e.nextSibling)}if(kE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=Pi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=bn?Pi(t.stateNode.nextSibling):null;return!0}function US(){for(var t=En;t;)t=Pi(t.nextSibling)}function ya(){En=bn=null,Ue=!1}function g_(t){Gn===null?Gn=[t]:Gn.push(t)}var uD=Xr.ReactCurrentBatchConfig;function Al(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function _d(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PE(t){var e=t._init;return e(t._payload)}function BS(t){function e(I,y){if(t){var A=I.deletions;A===null?(I.deletions=[y],I.flags|=16):A.push(y)}}function n(I,y){if(!t)return null;for(;y!==null;)e(I,y),y=y.sibling;return null}function r(I,y){for(I=new Map;y!==null;)y.key!==null?I.set(y.key,y):I.set(y.index,y),y=y.sibling;return I}function i(I,y){return I=Di(I,y),I.index=0,I.sibling=null,I}function s(I,y,A){return I.index=A,t?(A=I.alternate,A!==null?(A=A.index,A<y?(I.flags|=2,y):A):(I.flags|=2,y)):(I.flags|=1048576,y)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,y,A,C){return y===null||y.tag!==6?(y=cm(A,I.mode,C),y.return=I,y):(y=i(y,A),y.return=I,y)}function l(I,y,A,C){var O=A.type;return O===Uo?d(I,y,A.props.children,C,A.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===fi&&PE(O)===y.type)?(C=i(y,A.props),C.ref=Al(I,y,A),C.return=I,C):(C=Hd(A.type,A.key,A.props,null,I.mode,C),C.ref=Al(I,y,A),C.return=I,C)}function c(I,y,A,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==A.containerInfo||y.stateNode.implementation!==A.implementation?(y=dm(A,I.mode,C),y.return=I,y):(y=i(y,A.children||[]),y.return=I,y)}function d(I,y,A,C,O){return y===null||y.tag!==7?(y=Ps(A,I.mode,C,O),y.return=I,y):(y=i(y,A),y.return=I,y)}function h(I,y,A){if(typeof y=="string"&&y!==""||typeof y=="number")return y=cm(""+y,I.mode,A),y.return=I,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ad:return A=Hd(y.type,y.key,y.props,null,I.mode,A),A.ref=Al(I,null,y),A.return=I,A;case jo:return y=dm(y,I.mode,A),y.return=I,y;case fi:var C=y._init;return h(I,C(y._payload),A)}if(jl(y)||Il(y))return y=Ps(y,I.mode,A,null),y.return=I,y;_d(I,y)}return null}function p(I,y,A,C){var O=y!==null?y.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return O!==null?null:a(I,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ad:return A.key===O?l(I,y,A,C):null;case jo:return A.key===O?c(I,y,A,C):null;case fi:return O=A._init,p(I,y,O(A._payload),C)}if(jl(A)||Il(A))return O!==null?null:d(I,y,A,C,null);_d(I,A)}return null}function g(I,y,A,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return I=I.get(A)||null,a(y,I,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ad:return I=I.get(C.key===null?A:C.key)||null,l(y,I,C,O);case jo:return I=I.get(C.key===null?A:C.key)||null,c(y,I,C,O);case fi:var D=C._init;return g(I,y,A,D(C._payload),O)}if(jl(C)||Il(C))return I=I.get(A)||null,d(y,I,C,O,null);_d(y,C)}return null}function b(I,y,A,C){for(var O=null,D=null,v=y,E=y=0,w=null;v!==null&&E<A.length;E++){v.index>E?(w=v,v=null):w=v.sibling;var k=p(I,v,A[E],C);if(k===null){v===null&&(v=w);break}t&&v&&k.alternate===null&&e(I,v),y=s(k,y,E),D===null?O=k:D.sibling=k,D=k,v=w}if(E===A.length)return n(I,v),Ue&&ds(I,E),O;if(v===null){for(;E<A.length;E++)v=h(I,A[E],C),v!==null&&(y=s(v,y,E),D===null?O=v:D.sibling=v,D=v);return Ue&&ds(I,E),O}for(v=r(I,v);E<A.length;E++)w=g(v,I,E,A[E],C),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?E:w.key),y=s(w,y,E),D===null?O=w:D.sibling=w,D=w);return t&&v.forEach(function(R){return e(I,R)}),Ue&&ds(I,E),O}function S(I,y,A,C){var O=Il(A);if(typeof O!="function")throw Error($(150));if(A=O.call(A),A==null)throw Error($(151));for(var D=O=null,v=y,E=y=0,w=null,k=A.next();v!==null&&!k.done;E++,k=A.next()){v.index>E?(w=v,v=null):w=v.sibling;var R=p(I,v,k.value,C);if(R===null){v===null&&(v=w);break}t&&v&&R.alternate===null&&e(I,v),y=s(R,y,E),D===null?O=R:D.sibling=R,D=R,v=w}if(k.done)return n(I,v),Ue&&ds(I,E),O;if(v===null){for(;!k.done;E++,k=A.next())k=h(I,k.value,C),k!==null&&(y=s(k,y,E),D===null?O=k:D.sibling=k,D=k);return Ue&&ds(I,E),O}for(v=r(I,v);!k.done;E++,k=A.next())k=g(v,I,E,k.value,C),k!==null&&(t&&k.alternate!==null&&v.delete(k.key===null?E:k.key),y=s(k,y,E),D===null?O=k:D.sibling=k,D=k);return t&&v.forEach(function(N){return e(I,N)}),Ue&&ds(I,E),O}function P(I,y,A,C){if(typeof A=="object"&&A!==null&&A.type===Uo&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ad:e:{for(var O=A.key,D=y;D!==null;){if(D.key===O){if(O=A.type,O===Uo){if(D.tag===7){n(I,D.sibling),y=i(D,A.props.children),y.return=I,I=y;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===fi&&PE(O)===D.type){n(I,D.sibling),y=i(D,A.props),y.ref=Al(I,D,A),y.return=I,I=y;break e}n(I,D);break}else e(I,D);D=D.sibling}A.type===Uo?(y=Ps(A.props.children,I.mode,C,A.key),y.return=I,I=y):(C=Hd(A.type,A.key,A.props,null,I.mode,C),C.ref=Al(I,y,A),C.return=I,I=C)}return o(I);case jo:e:{for(D=A.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===A.containerInfo&&y.stateNode.implementation===A.implementation){n(I,y.sibling),y=i(y,A.children||[]),y.return=I,I=y;break e}else{n(I,y);break}else e(I,y);y=y.sibling}y=dm(A,I.mode,C),y.return=I,I=y}return o(I);case fi:return D=A._init,P(I,y,D(A._payload),C)}if(jl(A))return b(I,y,A,C);if(Il(A))return S(I,y,A,C);_d(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,y!==null&&y.tag===6?(n(I,y.sibling),y=i(y,A),y.return=I,I=y):(n(I,y),y=cm(A,I.mode,C),y.return=I,I=y),o(I)):n(I,y)}return P}var _a=BS(!0),$S=BS(!1),kh=Ji(null),Ph=null,Ho=null,y_=null;function __(){y_=Ho=Ph=null}function v_(t){var e=kh.current;Me(kh),t._currentValue=e}function Ig(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ra(t,e){Ph=t,y_=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(y_!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(Ph===null)throw Error($(308));Ho=t,Ph.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var Is=null;function w_(t){Is===null?Is=[t]:Is.push(t)}function zS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,w_(e)):(n.next=i.next,i.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function I_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qr(t,n)}return i=r.interleaved,i===null?(e.next=e,w_(r)):(e.next=i.next,i.next=e),r.interleaved=e,qr(t,n)}function $d(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o_(t,n)}}function RE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rh(t,e,n,r){var i=t.updateQueue;pi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,S=a;switch(p=e,g=n,S.tag){case 1:if(b=S.payload,typeof b=="function"){h=b.call(g,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,p=typeof b=="function"?b.call(g,h,p):b,p==null)break e;h=He({},h,p);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);js|=o,t.lanes=o,t.memoizedState=h}}function CE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var yc={},hr=Ji(yc),Cu=Ji(yc),Nu=Ji(yc);function Es(t){if(t===yc)throw Error($(174));return t}function E_(t,e){switch(Ce(Nu,e),Ce(Cu,t),Ce(hr,yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tg(e,t)}Me(hr),Ce(hr,e)}function va(){Me(hr),Me(Cu),Me(Nu)}function KS(t){Es(Nu.current);var e=Es(hr.current),n=tg(e,t.type);e!==n&&(Ce(Cu,t),Ce(hr,n))}function T_(t){Cu.current===t&&(Me(hr),Me(Cu))}var Ke=Ji(0);function Ch(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var im=[];function b_(){for(var t=0;t<im.length;t++)im[t]._workInProgressVersionPrimary=null;im.length=0}var zd=Xr.ReactCurrentDispatcher,sm=Xr.ReactCurrentBatchConfig,Ls=0,We=null,dt=null,vt=null,Nh=!1,nu=!1,Du=0,cD=0;function Mt(){throw Error($(321))}function S_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function A_(t,e,n,r,i,s){if(Ls=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?pD:mD,t=n(r,i),nu){s=0;do{if(nu=!1,Du=0,25<=s)throw Error($(301));s+=1,vt=dt=null,e.updateQueue=null,zd.current=gD,t=n(r,i)}while(nu)}if(zd.current=Dh,e=dt!==null&&dt.next!==null,Ls=0,vt=dt=We=null,Nh=!1,e)throw Error($(300));return t}function x_(){var t=Du!==0;return Du=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?We.memoizedState=vt=t:vt=vt.next=t,vt}function Ln(){if(dt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=vt===null?We.memoizedState:vt.next;if(e!==null)vt=e,dt=t;else{if(t===null)throw Error($(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?We.memoizedState=vt=t:vt=vt.next=t}return vt}function Ou(t,e){return typeof e=="function"?e(t):e}function om(t){var e=Ln(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ls&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,We.lanes|=d,js|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jn(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,js|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function am(t){var e=Ln(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jn(s,e.memoizedState)||(cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function WS(){}function GS(t,e){var n=We,r=Ln(),i=e(),s=!Jn(r.memoizedState,i);if(s&&(r.memoizedState=i,cn=!0),r=r.queue,k_(YS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Vu(9,QS.bind(null,n,r,i,e),void 0,null),It===null)throw Error($(349));Ls&30||HS(n,e,i)}return i}function HS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QS(t,e,n,r){e.value=n,e.getSnapshot=r,JS(e)&&XS(t)}function YS(t,e,n){return n(function(){JS(e)&&XS(t)})}function JS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function XS(t){var e=qr(t,1);e!==null&&Qn(e,t,1,-1)}function NE(t){var e=tr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:t},e.queue=t,t=t.dispatch=fD.bind(null,We,t),[e.memoizedState,t]}function Vu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZS(){return Ln().memoizedState}function qd(t,e,n,r){var i=tr();We.flags|=t,i.memoizedState=Vu(1|e,n,void 0,r===void 0?null:r)}function Sf(t,e,n,r){var i=Ln();r=r===void 0?null:r;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,r!==null&&S_(r,o.deps)){i.memoizedState=Vu(e,n,s,r);return}}We.flags|=t,i.memoizedState=Vu(1|e,n,s,r)}function DE(t,e){return qd(8390656,8,t,e)}function k_(t,e){return Sf(2048,8,t,e)}function eA(t,e){return Sf(4,2,t,e)}function tA(t,e){return Sf(4,4,t,e)}function nA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rA(t,e,n){return n=n!=null?n.concat([t]):null,Sf(4,4,nA.bind(null,e,t),n)}function P_(){}function iA(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&S_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sA(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&S_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oA(t,e,n){return Ls&21?(Jn(n,e)||(n=dS(),We.lanes|=n,js|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function dD(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=sm.transition;sm.transition={};try{t(!1),e()}finally{Ae=n,sm.transition=r}}function aA(){return Ln().memoizedState}function hD(t,e,n){var r=Ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lA(t))uA(e,n);else if(n=zS(t,e,n,r),n!==null){var i=Jt();Qn(n,t,r,i),cA(n,e,r)}}function fD(t,e,n){var r=Ni(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lA(t))uA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o)){var l=e.interleaved;l===null?(i.next=i,w_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=zS(t,e,i,r),n!==null&&(i=Jt(),Qn(n,t,r,i),cA(n,e,r))}}function lA(t){var e=t.alternate;return t===We||e!==null&&e===We}function uA(t,e){nu=Nh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o_(t,n)}}var Dh={readContext:Mn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},pD={readContext:Mn,useCallback:function(t,e){return tr().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:DE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qd(4194308,4,nA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return qd(4,2,t,e)},useMemo:function(t,e){var n=tr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hD.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=tr();return t={current:t},e.memoizedState=t},useState:NE,useDebugValue:P_,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=NE(!1),e=t[0];return t=dD.bind(null,t[1]),tr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=tr();if(Ue){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),It===null)throw Error($(349));Ls&30||HS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,DE(YS.bind(null,r,s,t),[t]),r.flags|=2048,Vu(9,QS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tr(),e=It.identifierPrefix;if(Ue){var n=Cr,r=Rr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mD={readContext:Mn,useCallback:iA,useContext:Mn,useEffect:k_,useImperativeHandle:rA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:sA,useReducer:om,useRef:ZS,useState:function(){return om(Ou)},useDebugValue:P_,useDeferredValue:function(t){var e=Ln();return oA(e,dt.memoizedState,t)},useTransition:function(){var t=om(Ou)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:WS,useSyncExternalStore:GS,useId:aA,unstable_isNewReconciler:!1},gD={readContext:Mn,useCallback:iA,useContext:Mn,useEffect:k_,useImperativeHandle:rA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:sA,useReducer:am,useRef:ZS,useState:function(){return am(Ou)},useDebugValue:P_,useDeferredValue:function(t){var e=Ln();return dt===null?e.memoizedState=t:oA(e,dt.memoizedState,t)},useTransition:function(){var t=am(Ou)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:WS,useSyncExternalStore:GS,useId:aA,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Eg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Af={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Ni(t),s=Fr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,i),e!==null&&(Qn(e,t,i,r),$d(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Ni(t),s=Fr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,i),e!==null&&(Qn(e,t,i,r),$d(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Ni(t),i=Fr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ri(t,i,r),e!==null&&(Qn(e,t,r,n),$d(e,t,r))}};function OE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xu(n,r)||!xu(i,s):!0}function dA(t,e,n){var r=!1,i=Fi,s=e.contextType;return typeof s=="object"&&s!==null?s=Mn(s):(i=mn(e)?Fs:zt.current,r=e.contextTypes,s=(r=r!=null)?ga(t,i):Fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Af,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function VE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Af.enqueueReplaceState(e,e.state,null)}function Tg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},I_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Mn(s):(s=mn(e)?Fs:zt.current,i.context=ga(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Eg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Af.enqueueReplaceState(i,i.state,null),Rh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wa(t,e){try{var n="",r=e;do n+=q1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function lm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yD=typeof WeakMap=="function"?WeakMap:Map;function hA(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vh||(Vh=!0,Og=r),bg(t,e)},n}function fA(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bg(t,e),typeof r!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function FE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=CD.bind(null,t,e,n),e.then(t,t))}function ME(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,Ri(n,e,1))),n.lanes|=1),t)}var _D=Xr.ReactCurrentOwner,cn=!1;function Gt(t,e,n,r){e.child=t===null?$S(e,null,n,r):_a(e,t.child,n,r)}function jE(t,e,n,r,i){n=n.render;var s=e.ref;return ra(e,i),r=A_(t,e,n,r,s,i),n=x_(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kr(t,e,i)):(Ue&&n&&p_(e),e.flags|=1,Gt(t,e,r,i),e.child)}function UE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!M_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pA(t,e,s,r,i)):(t=Hd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xu,n(o,r)&&t.ref===e.ref)return Kr(t,e,i)}return e.flags|=1,t=Di(s,r),t.ref=e.ref,t.return=e,e.child=t}function pA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xu(s,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Kr(t,e,i)}return Sg(t,e,n,r,i)}function mA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Yo,wn),wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Yo,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Yo,wn),wn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Yo,wn),wn|=r;return Gt(t,e,i,n),e.child}function gA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sg(t,e,n,r,i){var s=mn(n)?Fs:zt.current;return s=ga(e,s),ra(e,i),n=A_(t,e,n,r,s,i),r=x_(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kr(t,e,i)):(Ue&&r&&p_(e),e.flags|=1,Gt(t,e,n,i),e.child)}function BE(t,e,n,r,i){if(mn(n)){var s=!0;Sh(e)}else s=!1;if(ra(e,i),e.stateNode===null)Kd(t,e),dA(e,n,r),Tg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mn(c):(c=mn(n)?Fs:zt.current,c=ga(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&VE(e,o,r,c),pi=!1;var p=e.memoizedState;o.state=p,Rh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||pn.current||pi?(typeof d=="function"&&(Eg(e,n,d,r),l=e.memoizedState),(a=pi||OE(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mn(l):(l=mn(n)?Fs:zt.current,l=ga(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&VE(e,o,r,l),pi=!1,p=e.memoizedState,o.state=p,Rh(e,r,o,i);var b=e.memoizedState;a!==h||p!==b||pn.current||pi?(typeof g=="function"&&(Eg(e,n,g,r),b=e.memoizedState),(c=pi||OE(e,n,c,r,p,b,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ag(t,e,n,r,s,i)}function Ag(t,e,n,r,i,s){gA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&AE(e,n,!1),Kr(t,e,s);r=e.stateNode,_D.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_a(e,t.child,null,s),e.child=_a(e,null,a,s)):Gt(t,e,a,s),e.memoizedState=r.state,i&&AE(e,n,!0),e.child}function yA(t){var e=t.stateNode;e.pendingContext?SE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SE(t,e.context,!1),E_(t,e.containerInfo)}function $E(t,e,n,r,i){return ya(),g_(i),e.flags|=256,Gt(t,e,n,r),e.child}var xg={dehydrated:null,treeContext:null,retryLane:0};function kg(t){return{baseLanes:t,cachePool:null,transitions:null}}function _A(t,e,n){var r=e.pendingProps,i=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Ke,i&1),t===null)return wg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pf(o,r,0,null),t=Ps(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kg(n),e.memoizedState=xg,t):R_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Di(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Di(a,s):(s=Ps(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xg,r}return s=t.child,t=s.sibling,r=Di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function R_(t,e){return e=Pf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&g_(r),_a(e,t.child,null,n),t=R_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=lm(Error($(422))),vd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pf({mode:"visible",children:r.children},i,0,null),s=Ps(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_a(e,t.child,null,o),e.child.memoizedState=kg(o),e.memoizedState=xg,s);if(!(e.mode&1))return vd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=lm(s,r,void 0),vd(t,e,o,r)}if(a=(o&t.childLanes)!==0,cn||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qr(t,i),Qn(r,t,i,-1))}return F_(),r=lm(Error($(421))),vd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ND.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,En=Pi(i.nextSibling),bn=e,Ue=!0,Gn=null,t!==null&&(Cn[Nn++]=Rr,Cn[Nn++]=Cr,Cn[Nn++]=Ms,Rr=t.id,Cr=t.overflow,Ms=e),e=R_(e,r.children),e.flags|=4096,e)}function zE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ig(t.return,e,n)}function um(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zE(t,n,e);else if(t.tag===19)zE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ch(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),um(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ch(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}um(e,!0,n,null,s);break;case"together":um(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),js|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wD(t,e,n){switch(e.tag){case 3:yA(e),ya();break;case 5:KS(e);break;case 1:mn(e.type)&&Sh(e);break;case 4:E_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(kh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?_A(t,e,n):(Ce(Ke,Ke.current&1),t=Kr(t,e,n),t!==null?t.sibling:null);Ce(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,mA(t,e,n)}return Kr(t,e,n)}var wA,Pg,IA,EA;wA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pg=function(){};IA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Es(hr.current);var s=null;switch(n){case"input":i=Jm(t,i),r=Jm(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=eg(t,i),r=eg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Th)}ng(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};EA=function(t,e,n,r){n!==r&&(e.flags|=4)};function xl(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ID(t,e,n){var r=e.pendingProps;switch(m_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return mn(e.type)&&bh(),Lt(e),null;case 3:return r=e.stateNode,va(),Me(pn),Me(zt),b_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(Mg(Gn),Gn=null))),Pg(t,e),Lt(e),null;case 5:T_(e);var i=Es(Nu.current);if(n=e.type,t!==null&&e.stateNode!=null)IA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Lt(e),null}if(t=Es(hr.current),yd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[rr]=e,r[Ru]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<Bl.length;i++)Oe(Bl[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":XI(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":eE(r,s),Oe("invalid",r)}ng(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gd(r.textContent,a,t),i=["children",""+a]):wu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":ld(r),ZI(r,s,!0);break;case"textarea":ld(r),tE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Th)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rr]=e,t[Ru]=r,wA(t,e,!1,!1),e.stateNode=t;e:{switch(o=rg(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bl.length;i++)Oe(Bl[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":XI(t,r),i=Jm(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":eE(t,r),i=eg(t,r),Oe("invalid",t);break;default:i=r}ng(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Zb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Jb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Iu(t,l):typeof l=="number"&&Iu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&e_(t,s,l,o))}switch(n){case"input":ld(t),ZI(t,r,!1);break;case"textarea":ld(t),tE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)EA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Es(Nu.current),Es(hr.current),yd(e)){if(r=e.stateNode,n=e.memoizedProps,r[rr]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:gd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rr]=e,e.stateNode=r}return Lt(e),null;case 13:if(Me(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&En!==null&&e.mode&1&&!(e.flags&128))US(),ya(),e.flags|=98560,s=!1;else if(s=yd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[rr]=e}else ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else Gn!==null&&(Mg(Gn),Gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?ft===0&&(ft=3):F_())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return va(),Pg(t,e),t===null&&ku(e.stateNode.containerInfo),Lt(e),null;case 10:return v_(e.type._context),Lt(e),null;case 17:return mn(e.type)&&bh(),Lt(e),null;case 19:if(Me(Ke),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xl(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ch(t),o!==null){for(e.flags|=128,xl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Ia&&(e.flags|=128,r=!0,xl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ch(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return Lt(e),null}else 2*rt()-s.renderingStartTime>Ia&&n!==1073741824&&(e.flags|=128,r=!0,xl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Ke.current,Ce(Ke,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return V_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function ED(t,e){switch(m_(e),e.tag){case 1:return mn(e.type)&&bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return va(),Me(pn),Me(zt),b_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return T_(e),null;case 13:if(Me(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Ke),null;case 4:return va(),null;case 10:return v_(e.type._context),null;case 22:case 23:return V_(),null;case 24:return null;default:return null}}var wd=!1,Ut=!1,TD=typeof WeakSet=="function"?WeakSet:Set,X=null;function Qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Rg(t,e,n){try{n()}catch(r){Je(t,e,r)}}var qE=!1;function bD(t,e){if(fg=wh,t=xS(),f_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pg={focusedElem:t,selectionRange:n},wh=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var S=b.memoizedProps,P=b.memoizedState,I=e.stateNode,y=I.getSnapshotBeforeUpdate(e.elementType===e.type?S:Kn(e.type,S),P);I.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){Je(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return b=qE,qE=!1,b}function ru(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rg(e,n,s)}i=i.next}while(i!==r)}}function xf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TA(t){var e=t.alternate;e!==null&&(t.alternate=null,TA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rr],delete e[Ru],delete e[yg],delete e[oD],delete e[aD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bA(t){return t.tag===5||t.tag===3||t.tag===4}function KE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ng(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Th));else if(r!==4&&(t=t.child,t!==null))for(Ng(t,e,n),t=t.sibling;t!==null;)Ng(t,e,n),t=t.sibling}function Dg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dg(t,e,n),t=t.sibling;t!==null;)Dg(t,e,n),t=t.sibling}var St=null,Wn=!1;function ai(t,e,n){for(n=n.child;n!==null;)SA(t,e,n),n=n.sibling}function SA(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(vf,n)}catch{}switch(n.tag){case 5:Ut||Qo(n,e);case 6:var r=St,i=Wn;St=null,ai(t,e,n),St=r,Wn=i,St!==null&&(Wn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Wn?(t=St,n=n.stateNode,t.nodeType===8?nm(t.parentNode,n):t.nodeType===1&&nm(t,n),Su(t)):nm(St,n.stateNode));break;case 4:r=St,i=Wn,St=n.stateNode.containerInfo,Wn=!0,ai(t,e,n),St=r,Wn=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rg(n,e,o),i=i.next}while(i!==r)}ai(t,e,n);break;case 1:if(!Ut&&(Qo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}ai(t,e,n);break;case 21:ai(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,ai(t,e,n),Ut=r):ai(t,e,n);break;default:ai(t,e,n)}}function WE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TD),e.forEach(function(r){var i=DD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Wn=!1;break e;case 3:St=a.stateNode.containerInfo,Wn=!0;break e;case 4:St=a.stateNode.containerInfo,Wn=!0;break e}a=a.return}if(St===null)throw Error($(160));SA(s,o,i),St=null,Wn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)AA(e,t),e=e.sibling}function AA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),er(t),r&4){try{ru(3,t,t.return),xf(3,t)}catch(S){Je(t,t.return,S)}try{ru(5,t,t.return)}catch(S){Je(t,t.return,S)}}break;case 1:qn(e,t),er(t),r&512&&n!==null&&Qo(n,n.return);break;case 5:if(qn(e,t),er(t),r&512&&n!==null&&Qo(n,n.return),t.flags&32){var i=t.stateNode;try{Iu(i,"")}catch(S){Je(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Hb(i,s),rg(a,o);var c=rg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Zb(i,h):d==="dangerouslySetInnerHTML"?Jb(i,h):d==="children"?Iu(i,h):e_(i,d,h,c)}switch(a){case"input":Xm(i,s);break;case"textarea":Qb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Zo(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Zo(i,!!s.multiple,s.defaultValue,!0):Zo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ru]=s}catch(S){Je(t,t.return,S)}}break;case 6:if(qn(e,t),er(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Je(t,t.return,S)}}break;case 3:if(qn(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(S){Je(t,t.return,S)}break;case 4:qn(e,t),er(t);break;case 13:qn(e,t),er(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(D_=rt())),r&4&&WE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(c=Ut)||d,qn(e,t),Ut=c):qn(e,t),er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(p=X,g=p.child,p.tag){case 0:case 11:case 14:case 15:ru(4,p,p.return);break;case 1:Qo(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(S){Je(r,n,S)}}break;case 5:Qo(p,p.return);break;case 22:if(p.memoizedState!==null){HE(h);continue}}g!==null?(g.return=p,X=g):HE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Xb("display",o))}catch(S){Je(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(S){Je(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qn(e,t),er(t),r&4&&WE(t);break;case 21:break;default:qn(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bA(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Iu(i,""),r.flags&=-33);var s=KE(t);Dg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=KE(t);Ng(t,a,o);break;default:throw Error($(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SD(t,e,n){X=t,xA(t)}function xA(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ut;a=wd;var c=Ut;if(wd=o,(Ut=l)&&!c)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?QE(i):l!==null?(l.return=o,X=l):QE(i);for(;s!==null;)X=s,xA(s),s=s.sibling;X=i,wd=a,Ut=c}GE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):GE(t)}}function GE(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||xf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&CE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Su(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ut||e.flags&512&&Cg(e)}catch(p){Je(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function HE(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function QE(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xf(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Je(e,i,l)}}var s=e.return;try{Cg(e)}catch(l){Je(e,s,l)}break;case 5:var o=e.return;try{Cg(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var AD=Math.ceil,Oh=Xr.ReactCurrentDispatcher,C_=Xr.ReactCurrentOwner,Vn=Xr.ReactCurrentBatchConfig,ye=0,It=null,ut=null,kt=0,wn=0,Yo=Ji(0),ft=0,Fu=null,js=0,kf=0,N_=0,iu=null,un=null,D_=0,Ia=1/0,br=null,Vh=!1,Og=null,Ci=null,Id=!1,Ei=null,Fh=0,su=0,Vg=null,Wd=-1,Gd=0;function Jt(){return ye&6?rt():Wd!==-1?Wd:Wd=rt()}function Ni(t){return t.mode&1?ye&2&&kt!==0?kt&-kt:uD.transition!==null?(Gd===0&&(Gd=dS()),Gd):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:_S(t.type)),t):1}function Qn(t,e,n,r){if(50<su)throw su=0,Vg=null,Error($(185));pc(t,n,r),(!(ye&2)||t!==It)&&(t===It&&(!(ye&2)&&(kf|=n),ft===4&&yi(t,kt)),gn(t,r),n===1&&ye===0&&!(e.mode&1)&&(Ia=rt()+500,bf&&Xi()))}function gn(t,e){var n=t.callbackNode;uN(t,e);var r=vh(t,t===It?kt:0);if(r===0)n!==null&&iE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iE(n),e===1)t.tag===0?lD(YE.bind(null,t)):MS(YE.bind(null,t)),iD(function(){!(ye&6)&&Xi()}),n=null;else{switch(hS(r)){case 1:n=s_;break;case 4:n=uS;break;case 16:n=_h;break;case 536870912:n=cS;break;default:n=_h}n=VA(n,kA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kA(t,e){if(Wd=-1,Gd=0,ye&6)throw Error($(327));var n=t.callbackNode;if(ia()&&t.callbackNode!==n)return null;var r=vh(t,t===It?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mh(t,r);else{e=r;var i=ye;ye|=2;var s=RA();(It!==t||kt!==e)&&(br=null,Ia=rt()+500,ks(t,e));do try{PD();break}catch(a){PA(t,a)}while(!0);__(),Oh.current=s,ye=i,ut!==null?e=0:(It=null,kt=0,e=ft)}if(e!==0){if(e===2&&(i=lg(t),i!==0&&(r=i,e=Fg(t,i))),e===1)throw n=Fu,ks(t,0),yi(t,r),gn(t,rt()),n;if(e===6)yi(t,r);else{if(i=t.current.alternate,!(r&30)&&!xD(i)&&(e=Mh(t,r),e===2&&(s=lg(t),s!==0&&(r=s,e=Fg(t,s))),e===1))throw n=Fu,ks(t,0),yi(t,r),gn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:hs(t,un,br);break;case 3:if(yi(t,r),(r&130023424)===r&&(e=D_+500-rt(),10<e)){if(vh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gg(hs.bind(null,t,un,br),e);break}hs(t,un,br);break;case 4:if(yi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AD(r/1960))-r,10<r){t.timeoutHandle=gg(hs.bind(null,t,un,br),r);break}hs(t,un,br);break;case 5:hs(t,un,br);break;default:throw Error($(329))}}}return gn(t,rt()),t.callbackNode===n?kA.bind(null,t):null}function Fg(t,e){var n=iu;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=Mh(t,e),t!==2&&(e=un,un=n,e!==null&&Mg(e)),t}function Mg(t){un===null?un=t:un.push.apply(un,t)}function xD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yi(t,e){for(e&=~N_,e&=~kf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),r=1<<n;t[n]=-1,e&=~r}}function YE(t){if(ye&6)throw Error($(327));ia();var e=vh(t,0);if(!(e&1))return gn(t,rt()),null;var n=Mh(t,e);if(t.tag!==0&&n===2){var r=lg(t);r!==0&&(e=r,n=Fg(t,r))}if(n===1)throw n=Fu,ks(t,0),yi(t,e),gn(t,rt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hs(t,un,br),gn(t,rt()),null}function O_(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(Ia=rt()+500,bf&&Xi())}}function Us(t){Ei!==null&&Ei.tag===0&&!(ye&6)&&ia();var e=ye;ye|=1;var n=Vn.transition,r=Ae;try{if(Vn.transition=null,Ae=1,t)return t()}finally{Ae=r,Vn.transition=n,ye=e,!(ye&6)&&Xi()}}function V_(){wn=Yo.current,Me(Yo)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rD(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(m_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:va(),Me(pn),Me(zt),b_();break;case 5:T_(r);break;case 4:va();break;case 13:Me(Ke);break;case 19:Me(Ke);break;case 10:v_(r.type._context);break;case 22:case 23:V_()}n=n.return}if(It=t,ut=t=Di(t.current,null),kt=wn=e,ft=0,Fu=null,N_=kf=js=0,un=iu=null,Is!==null){for(e=0;e<Is.length;e++)if(n=Is[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return t}function PA(t,e){do{var n=ut;try{if(__(),zd.current=Dh,Nh){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nh=!1}if(Ls=0,vt=dt=We=null,nu=!1,Du=0,C_.current=null,n===null||n.return===null){ft=1,Fu=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ME(o);if(g!==null){g.flags&=-257,LE(g,o,a,s,e),g.mode&1&&FE(s,c,e),e=g,l=c;var b=e.updateQueue;if(b===null){var S=new Set;S.add(l),e.updateQueue=S}else b.add(l);break e}else{if(!(e&1)){FE(s,c,e),F_();break e}l=Error($(426))}}else if(Ue&&a.mode&1){var P=ME(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),LE(P,o,a,s,e),g_(wa(l,a));break e}}s=l=wa(l,a),ft!==4&&(ft=2),iu===null?iu=[s]:iu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=hA(s,l,e);RE(s,I);break e;case 1:a=l;var y=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ci===null||!Ci.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=fA(s,a,e);RE(s,C);break e}}s=s.return}while(s!==null)}NA(n)}catch(O){e=O,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function RA(){var t=Oh.current;return Oh.current=Dh,t===null?Dh:t}function F_(){(ft===0||ft===3||ft===2)&&(ft=4),It===null||!(js&268435455)&&!(kf&268435455)||yi(It,kt)}function Mh(t,e){var n=ye;ye|=2;var r=RA();(It!==t||kt!==e)&&(br=null,ks(t,e));do try{kD();break}catch(i){PA(t,i)}while(!0);if(__(),ye=n,Oh.current=r,ut!==null)throw Error($(261));return It=null,kt=0,ft}function kD(){for(;ut!==null;)CA(ut)}function PD(){for(;ut!==null&&!eN();)CA(ut)}function CA(t){var e=OA(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?NA(t):ut=e,C_.current=null}function NA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ED(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ut=null;return}}else if(n=ID(n,e,wn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);ft===0&&(ft=5)}function hs(t,e,n){var r=Ae,i=Vn.transition;try{Vn.transition=null,Ae=1,RD(t,e,n,r)}finally{Vn.transition=i,Ae=r}return null}function RD(t,e,n,r){do ia();while(Ei!==null);if(ye&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cN(t,s),t===It&&(ut=It=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Id||(Id=!0,VA(_h,function(){return ia(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vn.transition,Vn.transition=null;var o=Ae;Ae=1;var a=ye;ye|=4,C_.current=null,bD(t,n),AA(n,t),YN(pg),wh=!!fg,pg=fg=null,t.current=n,SD(n),tN(),ye=a,Ae=o,Vn.transition=s}else t.current=n;if(Id&&(Id=!1,Ei=t,Fh=i),s=t.pendingLanes,s===0&&(Ci=null),iN(n.stateNode),gn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vh)throw Vh=!1,t=Og,Og=null,t;return Fh&1&&t.tag!==0&&ia(),s=t.pendingLanes,s&1?t===Vg?su++:(su=0,Vg=t):su=0,Xi(),null}function ia(){if(Ei!==null){var t=hS(Fh),e=Vn.transition,n=Ae;try{if(Vn.transition=null,Ae=16>t?16:t,Ei===null)var r=!1;else{if(t=Ei,Ei=null,Fh=0,ye&6)throw Error($(331));var i=ye;for(ye|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:ru(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var p=d.sibling,g=d.return;if(TA(d),d===c){X=null;break}if(p!==null){p.return=g,X=p;break}X=g}}}var b=s.alternate;if(b!==null){var S=b.child;if(S!==null){b.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,X=I;break e}X=s.return}}var y=t.current;for(X=y;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=y;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xf(9,a)}}catch(O){Je(a,a.return,O)}if(a===o){X=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,X=C;break e}X=a.return}}if(ye=i,Xi(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(vf,t)}catch{}r=!0}return r}finally{Ae=n,Vn.transition=e}}return!1}function JE(t,e,n){e=wa(n,e),e=hA(t,e,1),t=Ri(t,e,1),e=Jt(),t!==null&&(pc(t,1,e),gn(t,e))}function Je(t,e,n){if(t.tag===3)JE(t,t,n);else for(;e!==null;){if(e.tag===3){JE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ci===null||!Ci.has(r))){t=wa(n,t),t=fA(e,t,1),e=Ri(e,t,1),t=Jt(),e!==null&&(pc(e,1,t),gn(e,t));break}}e=e.return}}function CD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(kt&n)===n&&(ft===4||ft===3&&(kt&130023424)===kt&&500>rt()-D_?ks(t,0):N_|=n),gn(t,e)}function DA(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var n=Jt();t=qr(t,e),t!==null&&(pc(t,e,n),gn(t,n))}function ND(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DA(t,n)}function DD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),DA(t,n)}var OA;OA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,wD(t,e,n);cn=!!(t.flags&131072)}else cn=!1,Ue&&e.flags&1048576&&LS(e,xh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kd(t,e),t=e.pendingProps;var i=ga(e,zt.current);ra(e,n),i=A_(null,e,r,t,i,n);var s=x_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(s=!0,Sh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I_(e),i.updater=Af,e.stateNode=i,i._reactInternals=e,Tg(e,r,t,n),e=Ag(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&p_(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=VD(r),t=Kn(r,t),i){case 0:e=Sg(null,e,r,t,n);break e;case 1:e=BE(null,e,r,t,n);break e;case 11:e=jE(null,e,r,t,n);break e;case 14:e=UE(null,e,r,Kn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),Sg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),BE(t,e,r,i,n);case 3:e:{if(yA(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,qS(t,e),Rh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wa(Error($(423)),e),e=$E(t,e,r,n,i);break e}else if(r!==i){i=wa(Error($(424)),e),e=$E(t,e,r,n,i);break e}else for(En=Pi(e.stateNode.containerInfo.firstChild),bn=e,Ue=!0,Gn=null,n=$S(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ya(),r===i){e=Kr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return KS(e),t===null&&wg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mg(r,i)?o=null:s!==null&&mg(r,s)&&(e.flags|=32),gA(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&wg(e),null;case 13:return _A(t,e,n);case 4:return E_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_a(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),jE(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(kh,r._currentValue),r._currentValue=o,s!==null)if(Jn(s.value,o)){if(s.children===i.children&&!pn.current){e=Kr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ig(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ig(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ra(e,n),i=Mn(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Kn(r,e.pendingProps),i=Kn(r.type,i),UE(t,e,r,i,n);case 15:return pA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),Kd(t,e),e.tag=1,mn(r)?(t=!0,Sh(e)):t=!1,ra(e,n),dA(e,r,i),Tg(e,r,i,n),Ag(null,e,r,!0,t,n);case 19:return vA(t,e,n);case 22:return mA(t,e,n)}throw Error($(156,e.tag))};function VA(t,e){return lS(t,e)}function OD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new OD(t,e,n,r)}function M_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VD(t){if(typeof t=="function")return M_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n_)return 11;if(t===r_)return 14}return 2}function Di(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")M_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uo:return Ps(n.children,i,s,e);case t_:o=8,i|=8;break;case Gm:return t=Dn(12,n,e,i|2),t.elementType=Gm,t.lanes=s,t;case Hm:return t=Dn(13,n,e,i),t.elementType=Hm,t.lanes=s,t;case Qm:return t=Dn(19,n,e,i),t.elementType=Qm,t.lanes=s,t;case Kb:return Pf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zb:o=10;break e;case qb:o=9;break e;case n_:o=11;break e;case r_:o=14;break e;case fi:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ps(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Pf(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=Kb,t.lanes=n,t.stateNode={isHidden:!1},t}function cm(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function dm(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kp(0),this.expirationTimes=Kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function L_(t,e,n,r,i,s,o,a,l){return t=new FD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(s),t}function MD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FA(t){if(!t)return Fi;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(mn(n))return FS(t,n,e)}return e}function MA(t,e,n,r,i,s,o,a,l){return t=L_(n,r,!0,t,i,s,o,a,l),t.context=FA(null),n=t.current,r=Jt(),i=Ni(n),s=Fr(r,i),s.callback=e??null,Ri(n,s,i),t.current.lanes=i,pc(t,i,r),gn(t,r),t}function Rf(t,e,n,r){var i=e.current,s=Jt(),o=Ni(i);return n=FA(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ri(i,e,o),t!==null&&(Qn(t,i,o,s),$d(t,i,o)),o}function Lh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function j_(t,e){XE(t,e),(t=t.alternate)&&XE(t,e)}function LD(){return null}var LA=typeof reportError=="function"?reportError:function(t){console.error(t)};function U_(t){this._internalRoot=t}Cf.prototype.render=U_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Rf(t,e,null,null)};Cf.prototype.unmount=U_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Us(function(){Rf(null,t,null,null)}),e[zr]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=mS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gi.length&&e!==0&&e<gi[n].priority;n++);gi.splice(n,0,t),n===0&&yS(t)}};function B_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZE(){}function jD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Lh(o);s.call(c)}}var o=MA(e,r,t,0,null,!1,!1,"",ZE);return t._reactRootContainer=o,t[zr]=o.current,ku(t.nodeType===8?t.parentNode:t),Us(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Lh(l);a.call(c)}}var l=L_(t,0,!1,null,null,!1,!1,"",ZE);return t._reactRootContainer=l,t[zr]=l.current,ku(t.nodeType===8?t.parentNode:t),Us(function(){Rf(e,l,n,r)}),l}function Df(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Lh(o);a.call(l)}}Rf(e,o,t,i)}else o=jD(n,e,t,i,r);return Lh(o)}fS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ul(e.pendingLanes);n!==0&&(o_(e,n|1),gn(e,rt()),!(ye&6)&&(Ia=rt()+500,Xi()))}break;case 13:Us(function(){var r=qr(t,1);if(r!==null){var i=Jt();Qn(r,t,1,i)}}),j_(t,1)}};a_=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=Jt();Qn(e,t,134217728,n)}j_(t,134217728)}};pS=function(t){if(t.tag===13){var e=Ni(t),n=qr(t,e);if(n!==null){var r=Jt();Qn(n,t,e,r)}j_(t,e)}};mS=function(){return Ae};gS=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};sg=function(t,e,n){switch(e){case"input":if(Xm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Tf(r);if(!i)throw Error($(90));Gb(r),Xm(r,i)}}}break;case"textarea":Qb(t,n);break;case"select":e=n.value,e!=null&&Zo(t,!!n.multiple,e,!1)}};nS=O_;rS=Us;var UD={usingClientEntryPoint:!1,Events:[gc,qo,Tf,eS,tS,O_]},kl={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BD={bundleType:kl.bundleType,version:kl.version,rendererPackageName:kl.rendererPackageName,rendererConfig:kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oS(t),t===null?null:t.stateNode},findFiberByHostInstance:kl.findFiberByHostInstance||LD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{vf=Ed.inject(BD),dr=Ed}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UD;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B_(e))throw Error($(200));return MD(t,e,null,n)};Pn.createRoot=function(t,e){if(!B_(t))throw Error($(299));var n=!1,r="",i=LA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=L_(t,1,!1,null,null,n,!1,r,i),t[zr]=e.current,ku(t.nodeType===8?t.parentNode:t),new U_(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=oS(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Us(t)};Pn.hydrate=function(t,e,n){if(!Nf(e))throw Error($(200));return Df(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!B_(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=LA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MA(e,null,t,1,n??null,i,!1,s,o),t[zr]=e.current,ku(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cf(e)};Pn.render=function(t,e,n){if(!Nf(e))throw Error($(200));return Df(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!Nf(t))throw Error($(40));return t._reactRootContainer?(Us(function(){Df(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};Pn.unstable_batchedUpdates=O_;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nf(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Df(t,e,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function jA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jA)}catch(t){console.error(t)}}jA(),jb.exports=Pn;var $D=jb.exports,e0=$D;Km.createRoot=e0.createRoot,Km.hydrateRoot=e0.hydrateRoot;const Ve=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ct=Object.keys,$t=Array.isArray;function tn(t,e){return typeof e!="object"||ct(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Ve.Promise||(Ve.Promise=Promise);const Mu=Object.getPrototypeOf,zD={}.hasOwnProperty;function xn(t,e){return zD.call(t,e)}function Ea(t,e){typeof e=="function"&&(e=e(Mu(t))),(typeof Reflect>"u"?ct:Reflect.ownKeys)(e).forEach(n=>{Mr(t,n,e[n])})}const UA=Object.defineProperty;function Mr(t,e,n,r){UA(t,e,tn(n&&xn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function sa(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Mr(t.prototype,"constructor",t),{extend:Ea.bind(null,t.prototype)}}}}const qD=Object.getOwnPropertyDescriptor;function $_(t,e){let n;return qD(t,e)||(n=Mu(t))&&$_(n,e)}const KD=[].slice;function jh(t,e,n){return KD.call(t,e,n)}function BA(t,e){return e(t)}function $l(t){if(!t)throw new Error("Assertion Failed")}function $A(t){Ve.setImmediate?setImmediate(t):setTimeout(t,0)}function zA(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Lr(t,e){if(typeof e=="string"&&xn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=Lr(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a==null?void 0:Lr(a,e.substr(o+1))}}function Yn(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){$l(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Yn(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?$t(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&xn(t,o)||(l=t[o]={}),Yn(l,a,n)}}else n===void 0?$t(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function qA(t){var e={};for(var n in t)xn(t,n)&&(e[n]=t[n]);return e}const WD=[].concat;function KA(t){return WD.apply([],t)}const WA="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(KA([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Ve[t]),GD=WA.map(t=>Ve[t]);zA(WA,t=>[t,!0]);let mi=null;function _c(t){mi=typeof WeakMap<"u"&&new WeakMap;const e=Lg(t);return mi=null,e}function Lg(t){if(!t||typeof t!="object")return t;let e=mi&&mi.get(t);if(e)return e;if($t(t)){e=[],mi&&mi.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Lg(t[n]))}else if(GD.indexOf(t.constructor)>=0)e=t;else{const s=Mu(t);for(var i in e=s===Object.prototype?{}:Object.create(s),mi&&mi.set(t,e),t)xn(t,i)&&(e[i]=Lg(t[i]))}return e}const{toString:HD}={};function jg(t){return HD.call(t).slice(8,-1)}const Ug=typeof Symbol<"u"?Symbol.iterator:"@@iterator",QD=typeof Ug=="symbol"?function(t){var e;return t!=null&&(e=t[Ug])&&e.apply(t)}:function(){return null},Co={};function Pr(t){var e,n,r,i;if(arguments.length===1){if($t(t))return t.slice();if(this===Co&&typeof t=="string")return[t];if(i=QD(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const z_=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var wr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function GA(t,e){wr=t,HA=e}var HA=()=>!0;const YD=!new Error("").stack;function ao(){if(YD)try{throw ao.arguments,new Error}catch(t){return t}return new Error}function Bg(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(HA).map(r=>`
`+r).join("")):""}var QA=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q_=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(QA),JD={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function oa(t,e){this._e=ao(),this.name=t,this.message=e}function YA(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Uh(t,e,n,r){this._e=ao(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=YA(t,e)}function ou(t,e){this._e=ao(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=YA(t,e)}sa(oa).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Bg(this._e,2))}},toString:function(){return this.name+": "+this.message}}),sa(Uh).from(oa),sa(ou).from(oa);var K_=q_.reduce((t,e)=>(t[e]=e+"Error",t),{});const XD=oa;var ae=q_.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=ao(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=JD[e]||n,this.inner=null)}return sa(r).from(XD),t[e]=r,t},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var t0=QA.reduce((t,e)=>(t[e+"Error"]=ae[e],t),{}),Qd=q_.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=ae[e]),t),{});function Pe(){}function Lu(t){return t}function ZD(t,e){return t==null||t===Lu?e:function(n){return e(t(n))}}function Bs(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function eO(t,e){return t===Pe?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Bs(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Bs(i,this.onerror):i),s!==void 0?s:n}}function tO(t,e){return t===Pe?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Bs(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Bs(r,this.onerror):r)}}function nO(t,e){return t===Pe?e:function(n){var r=t.apply(this,arguments);tn(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Bs(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Bs(s,this.onerror):s),r===void 0?o===void 0?void 0:o:tn(r,o)}}function rO(t,e){return t===Pe?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function W_(t,e){return t===Pe?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}Qd.ModifyError=Uh,Qd.DexieError=oa,Qd.BulkError=ou;var ju={};const JA=100,[$g,Bh,zg]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Mu(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Mu(e),t]})(),XA=Bh&&Bh.then,Yd=$g&&$g.constructor,G_=!!zg;var qg=!1,iO=zg?()=>{zg.then(Td)}:Ve.setImmediate?setImmediate.bind(null,Td):Ve.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Td(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Td,0)},au=function(t,e){zl.push([t,e]),$h&&(iO(),$h=!1)},Kg=!0,$h=!0,Rs=[],Jd=[],Wg=null,Gg=Lu,aa={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:i0,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{i0(t[0],t[1])}catch{}})}},se=aa,zl=[],Cs=0,Xd=[];function J(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Pe,this._lib=!1;var e=this._PSD=se;if(wr&&(this._stackHolder=ao(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==ju)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qg(this,this._value))}this._state=null,this._value=null,++e.ref,ex(this,t)}const Hg={get:function(){var t=se,e=zh;function n(r,i){var s=!t.global&&(t!==se||e!==zh);const o=s&&!Wr();var a=new J((l,c)=>{H_(this,new ZA(qh(r,t,s,o),qh(i,t,s,o),l,c,t))});return wr&&rx(a,this),a}return n.prototype=ju,n},set:function(t){Mr(this,"then",t&&t.prototype===ju?Hg:{get:function(){return t},set:Hg.set})}};function ZA(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function ex(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&vc();n&&typeof n.then=="function"?ex(t,(i,s)=>{n instanceof J?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,tx(t)),r&&wc()}},Qg.bind(null,t))}catch(n){Qg(t,n)}}function Qg(t,e){if(Jd.push(e),t._state===null){var n=t._lib&&vc();e=Gg(e),t._state=!1,t._value=e,wr&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch{}}(()=>{var r=$_(e,"stack");e._promise=t,Mr(e,"stack",{get:()=>qg?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Rs.some(i=>i._value===r._value)||Rs.push(r)}(t),tx(t),n&&wc()}}function tx(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)H_(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Cs===0&&(++Cs,au(()=>{--Cs==0&&Q_()},[]))}function H_(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Cs,au(sO,[n,t,e])}else t._listeners.push(e)}function sO(t,e,n){try{Wg=e;var r,i=e._value;e._state?r=t(i):(Jd.length&&(Jd=[]),r=t(i),Jd.indexOf(i)===-1&&function(s){for(var o=Rs.length;o;)if(Rs[--o]._value===s._value)return void Rs.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Wg=null,--Cs==0&&Q_(),--n.psd.ref||n.psd.finalize()}}function nx(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Bg(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return wr&&((r=Bg(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&nx(t._prev,e,n)),e}function rx(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Td(){vc()&&wc()}function vc(){var t=Kg;return Kg=!1,$h=!1,t}function wc(){var t,e,n;do for(;zl.length>0;)for(t=zl,zl=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(zl.length>0);Kg=!0,$h=!0}function Q_(){var t=Rs;Rs=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Xd.slice(0),n=e.length;n;)e[--n]()}function bd(t){return new J(ju,!1,t)}function Le(t,e){var n=se;return function(){var r=vc(),i=se;try{return Li(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Li(i,!1),r&&wc()}}}Ea(J.prototype,{then:Hg,_then:function(t,e){H_(this,new ZA(null,null,t,e,se))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):bd(r)):this.then(null,r=>r&&r.name===e?n(r):bd(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),bd(e)))},stack:{get:function(){if(this._stack)return this._stack;try{qg=!0;var t=nx(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{qg=!1}}},timeout:function(t,e){return t<1/0?new J((n,r)=>{var i=setTimeout(()=>r(new ae.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Mr(J.prototype,Symbol.toStringTag,"Dexie.Promise"),aa.env=ix(),Ea(J,{all:function(){var t=Pr.apply(null,arguments).map(Sd);return new J(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>J.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof J)return t;if(t&&typeof t.then=="function")return new J((n,r)=>{t.then(n,r)});var e=new J(ju,!0,t);return rx(e,Wg),e},reject:bd,race:function(){var t=Pr.apply(null,arguments).map(Sd);return new J((e,n)=>{t.map(r=>J.resolve(r).then(e,n))})},PSD:{get:()=>se,set:t=>se=t},totalEchoes:{get:()=>zh},newPSD:Mi,usePSD:qa,scheduler:{get:()=>au,set:t=>{au=t}},rejectionMapper:{get:()=>Gg,set:t=>{Gg=t}},follow:(t,e)=>new J((n,r)=>Mi((i,s)=>{var o=se;o.unhandleds=[],o.onunhandled=s,o.finalize=Bs(function(){(function(a){function l(){a(),Xd.splice(Xd.indexOf(l),1)}Xd.push(l),++Cs,au(()=>{--Cs==0&&Q_()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),Yd&&(Yd.allSettled&&Mr(J,"allSettled",function(){const t=Pr.apply(null,arguments).map(Sd);return new J(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>J.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),Yd.any&&typeof AggregateError<"u"&&Mr(J,"any",function(){const t=Pr.apply(null,arguments).map(Sd);return new J((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>J.resolve(s).then(a=>e(a),a=>{i[o]=a,--r||n(new AggregateError(i))}))})}));const Bt={awaits:0,echoes:0,id:0};var oO=0,Zd=[],hm=0,zh=0,aO=0;function Mi(t,e,n,r){var i=se,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++aO;var o=aa.env;s.env=G_?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject,nthen:n0(o.nthen,s),gthen:n0(o.gthen,s)}:{},e&&tn(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=qa(s,t,n,r);return s.ref===0&&s.finalize(),a}function za(){return Bt.id||(Bt.id=++oO),++Bt.awaits,Bt.echoes+=JA,Bt.id}function Wr(){return!!Bt.awaits&&(--Bt.awaits==0&&(Bt.id=0),Bt.echoes=Bt.awaits*JA,!0)}function Sd(t){return Bt.echoes&&t&&t.constructor===Yd?(za(),t.then(e=>(Wr(),e),e=>(Wr(),pt(e)))):t}function lO(t){++zh,Bt.echoes&&--Bt.echoes!=0||(Bt.echoes=Bt.id=0),Zd.push(se),Li(t,!0)}function uO(){var t=Zd[Zd.length-1];Zd.pop(),Li(t,!1)}function Li(t,e){var n=se;if((e?!Bt.echoes||hm++&&t===se:!hm||--hm&&t===se)||sx(e?lO.bind(null,t):uO),t!==se&&(se=t,n===aa&&(aa.env=ix()),G_)){var r=aa.env.Promise,i=t.env;Bh.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(Ve,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ix(){var t=Ve.Promise;return G_?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Ve,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Bh.then,gthen:t.prototype.then}:{}}function qa(t,e,n,r,i){var s=se;try{return Li(t,!0),e(n,r,i)}finally{Li(s,!1)}}function sx(t){XA.call($g,t)}function qh(t,e,n,r){return typeof t!="function"?t:function(){var i=se;n&&za(),Li(e,!0);try{return t.apply(this,arguments)}finally{Li(i,!1),r&&sx(Wr)}}}function n0(t,e){return function(n,r){return t.call(this,qh(n,e),qh(r,e))}}(""+XA).indexOf("[native code]")===-1&&(za=Wr=Pe);const r0="unhandledrejection";function i0(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(Ve.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(r0,!0,!0),tn(r,i)):Ve.CustomEvent&&tn(r=new CustomEvent(r0,{detail:i}),i),r&&Ve.dispatchEvent&&(dispatchEvent(r),!Ve.PromiseRejectionEvent&&Ve.onunhandledrejection))try{Ve.onunhandledrejection(r)}catch{}wr&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var pt=J.reject;function Yg(t,e,n,r){if(t.idbdb&&(t._state.openComplete||se.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===K_.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Yg(t,e,n,r))):pt(s)}return i._promise(e,(s,o)=>Mi(()=>(se.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return pt(new ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return pt(new ae.DatabaseClosed);t.open().catch(Pe)}return t._state.dbReadyPromise.then(()=>Yg(t,e,n,r))}const s0="3.2.7",Ts="",Jg=-1/0,Tr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ox="String expected.",lu=[],Of=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),cO=Of,dO=Of,ax=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Vf="__dbnames",fm="readonly",pm="readwrite";function $s(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const lx={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ad(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=_c(e))[t],e)}class hO{_trans(e,n,r){const i=this._tx||se.trans,s=this.name;function o(l,c,d){if(!d.schema[s])throw new ae.NotFound("Table "+s+" not part of transaction");return n(d.idbtrans,d)}const a=vc();try{return i&&i.db===this.db?i===se.trans?i._promise(e,o,r):Mi(()=>i._promise(e,o,r),{trans:i,transless:se.transless||se}):Yg(this.db,e,[this.name],o)}finally{a&&wc()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if($t(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ct(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(d=>c.keyPath.indexOf(d)>=0)){for(let d=0;d<n.length;++d)if(n.indexOf(c.keyPath[d])===-1)return!1;return!0}return!1}).sort((c,d)=>c.keyPath.length-d.keyPath.length)[0];if(r&&this.db._maxKey!==Ts){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(d=>e[d]))}!r&&wr&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,d){try{return s.cmp(c,d)===0}catch{return!1}}const[a,l]=n.reduce(([c,d],h)=>{const p=i[h],g=e[h];return[c||p,c||!p?$s(d,p&&p.multi?b=>{const S=Lr(b,h);return $t(S)&&S.some(P=>o(g,P))}:b=>o(g,Lr(b,h))):d]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,$t(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(xn(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){tn(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Ad(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?J.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Yn(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||$t(e))return this.where(":id").equals(e).modify(n);{const r=Lr(e,this.schema.primKey.keyPath);if(r===void 0)return pt(new ae.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ct(n).forEach(i=>{Yn(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Ad(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?J.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Yn(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?J.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:lx})).then(e=>e.numFailures?J.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let d=l&&a?e.map(Ad(l)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:d,wantResults:s}).then(({numFailures:h,results:p,lastResult:g,failures:b})=>{if(h===0)return s?p:g;throw new ou(`${this.name}.bulkAdd(): ${h} of ${c} operations failed`,b)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let d=l&&a?e.map(Ad(l)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:d,wantResults:s}).then(({numFailures:h,results:p,lastResult:g,failures:b})=>{if(h===0)return s?p:g;throw new ou(`${this.name}.bulkPut(): ${h} of ${c} operations failed`,b)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new ou(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function uu(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[o].subscribe.apply(null,c),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,a,l){if(typeof o!="object"){var c;a||(a=rO),l||(l=Pe);var d={subscribers:[],fire:l,subscribe:function(h){d.subscribers.indexOf(h)===-1&&(d.subscribers.push(h),d.fire=a(d.fire,h))},unsubscribe:function(h){d.subscribers=d.subscribers.filter(function(p){return p!==h}),d.fire=d.subscribers.reduce(a,l)}};return e[o]=n[o]=d,d}ct(c=o).forEach(function(h){var p=c[h];if($t(p))s(h,c[h][0],c[h][1]);else{if(p!=="asap")throw new ae.InvalidArgument("Invalid event config");var g=s(h,Lu,function(){for(var b=arguments.length,S=new Array(b);b--;)S[b]=arguments[b];g.subscribers.forEach(function(P){$A(function(){P.apply(null,S)})})})}})}}function Pl(t,e){return sa(e).from({prototype:t}),e}function bo(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function mm(t,e){t.filter=$s(t.filter,e)}function gm(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>$s(r(),e()):e,t.justLimit=n&&!r}function eh(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new ae.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function o0(t,e,n){const r=eh(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function xd(t,e,n,r){const i=t.replayFilter?$s(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,l,c)=>{if(!i||i(l,c,p=>l.stop(p),p=>l.fail(p))){var d=l.primaryKey,h=""+d;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(d)),xn(s,h)||(s[h]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(o,n),a0(o0(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return a0(o0(t,r,n),$s(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function a0(t,e,n,r){var i=Le(r?(s,o,a)=>n(r(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=Pe},a=>{s.fail(a),o=Pe})||i(s.value,s,a=>o=a),o()})})}function Yt(t,e){try{const n=l0(t),r=l0(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===a?0:o<a?-1:1}(u0(t),u0(e));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c){const d=Yt(i[c],s[c]);if(d!==0)return d}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function l0(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=jg(t);return n==="ArrayBuffer"?"binary":n}function u0(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class fO{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,pt.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,pt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=$s(n.algorithm,e)}_iterate(e,n){return xd(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&tn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>xd(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(bo(r,!0))return i.count({trans:n,query:{index:eh(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return xd(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(c,d){return d?o(c[r[d]],d-1):c[i]}var a=this._ctx.dir==="next"?1:-1;function l(c,d){var h=o(c,s),p=o(d,s);return h<p?-a:h>p?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&bo(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=eh(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return xd(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,bo(n)?gm(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):gm(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),gm(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return mm(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return mm(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=$s(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&bo(n,!0)&&n.limit>0)return this._read(i=>{var s=eh(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return mm(this._ctx,function(i){var s=i.primaryKey.toString(),o=xn(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=ct(e),o=s.length;i=function(S){for(var P=!1,I=0;I<o;++I){var y=s[I],A=e[y];Lr(S,y)!==A&&(Yn(S,y,A),P=!0)}return P}}const a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,d=this.db._options.modifyChunkSize||200,h=[];let p=0;const g=[],b=(S,P)=>{const{failures:I,numFailures:y}=P;p+=S-y;for(let A of ct(I))h.push(I[A])};return this.clone().primaryKeys().then(S=>{const P=I=>{const y=Math.min(d,S.length-I);return a.getMany({trans:r,keys:S.slice(I,I+y),cache:"immutable"}).then(A=>{const C=[],O=[],D=l?[]:null,v=[];for(let w=0;w<y;++w){const k=A[w],R={value:_c(k),primKey:S[I+w]};i.call(R,R.value,R)!==!1&&(R.value==null?v.push(S[I+w]):l||Yt(c(k),c(R.value))===0?(O.push(R.value),l&&D.push(S[I+w])):(v.push(S[I+w]),C.push(R.value)))}const E=bo(n)&&n.limit===1/0&&(typeof e!="function"||e===ym)&&{index:n.index,range:n.range};return Promise.resolve(C.length>0&&a.mutate({trans:r,type:"add",values:C}).then(w=>{for(let k in w.failures)v.splice(parseInt(k),1);b(C.length,w)})).then(()=>(O.length>0||E&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:D,values:O,criteria:E,changeSpec:typeof e!="function"&&e}).then(w=>b(O.length,w))).then(()=>(v.length>0||E&&e===ym)&&a.mutate({trans:r,type:"delete",keys:v,criteria:E}).then(w=>b(v.length,w))).then(()=>S.length>I+y&&P(I+d))})};return P(0).then(()=>{if(h.length>0)throw new Uh("Error modifying one or more objects",h,p,g);return S.length})})})}delete(){var e=this._ctx,n=e.range;return bo(e)&&(e.isPrimKey&&!dO||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:c,numFailures:d})=>{if(d)throw new Uh("Could not delete some values",Object.keys(a).map(h=>a[h]),o-d);return o-d}))}):this.modify(ym)}}const ym=(t,e)=>e.value=null;function pO(t,e){return t<e?-1:t===e?0:1}function mO(t,e){return t>e?-1:t===e?0:1}function vn(t,e,n){var r=t instanceof cx?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function So(t){return new t.Collection(t,()=>ux("")).limit(0)}function gO(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function kd(t,e,n,r){var i,s,o,a,l,c,d,h=n.length;if(!n.every(S=>typeof S=="string"))return vn(t,ox);function p(S){i=function(I){return I==="next"?y=>y.toUpperCase():y=>y.toLowerCase()}(S),s=function(I){return I==="next"?y=>y.toLowerCase():y=>y.toUpperCase()}(S),o=S==="next"?pO:mO;var P=n.map(function(I){return{lower:s(I),upper:i(I)}}).sort(function(I,y){return o(I.lower,y.lower)});a=P.map(function(I){return I.upper}),l=P.map(function(I){return I.lower}),c=S,d=S==="next"?"":r}p("next");var g=new t.Collection(t,()=>hi(a[0],l[h-1]+r));g._ondirectionchange=function(S){p(S)};var b=0;return g._addAlgorithm(function(S,P,I){var y=S.key;if(typeof y!="string")return!1;var A=s(y);if(e(A,l,b))return!0;for(var C=null,O=b;O<h;++O){var D=gO(y,A,a[O],l[O],o,c);D===null&&C===null?b=O+1:(C===null||o(C,D)>0)&&(C=D)}return P(C!==null?function(){S.continue(C+d)}:I),!1}),g}function hi(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function ux(t){return{type:1,lower:t,upper:t}}class cx{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?So(this):new this.Collection(this,()=>hi(e,n,!r,!i))}catch{return vn(this,Tr)}}equals(e){return e==null?vn(this,Tr):new this.Collection(this,()=>ux(e))}above(e){return e==null?vn(this,Tr):new this.Collection(this,()=>hi(e,void 0,!0))}aboveOrEqual(e){return e==null?vn(this,Tr):new this.Collection(this,()=>hi(e,void 0,!1))}below(e){return e==null?vn(this,Tr):new this.Collection(this,()=>hi(void 0,e,!1,!0))}belowOrEqual(e){return e==null?vn(this,Tr):new this.Collection(this,()=>hi(void 0,e))}startsWith(e){return typeof e!="string"?vn(this,ox):this.between(e,e+Ts,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):kd(this,(n,r)=>n.indexOf(r[0])===0,[e],Ts)}equalsIgnoreCase(e){return kd(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Pr.apply(Co,arguments);return e.length===0?So(this):kd(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Pr.apply(Co,arguments);return e.length===0?So(this):kd(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Ts)}anyOf(){const e=Pr.apply(Co,arguments);let n=this._cmp;try{e.sort(n)}catch{return vn(this,Tr)}if(e.length===0)return So(this);const r=new this.Collection(this,()=>hi(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,a)=>{const l=s.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return o(a),!1;return n(l,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[Jg,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Pr.apply(Co,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return vn(this,Tr)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Jg,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return So(this);if(!e.every(y=>y[0]!==void 0&&y[1]!==void 0&&i(y[0],y[1])<=0))return vn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let d,h=i;function p(y,A){return h(y[0],A[0])}try{d=e.reduce(function(y,A){let C=0,O=y.length;for(;C<O;++C){const D=y[C];if(r(A[0],D[1])<0&&r(A[1],D[0])>0){D[0]=o(D[0],A[0]),D[1]=a(D[1],A[1]);break}}return C===O&&y.push(A),y},[]),d.sort(p)}catch{return vn(this,Tr)}let g=0;const b=c?y=>i(y,d[g][1])>0:y=>i(y,d[g][1])>=0,S=l?y=>s(y,d[g][0])>0:y=>s(y,d[g][0])>=0;let P=b;const I=new this.Collection(this,()=>hi(d[0][0],d[d.length-1][1],!l,!c));return I._ondirectionchange=y=>{y==="next"?(P=b,h=i):(P=S,h=s),d.sort(p)},I._addAlgorithm((y,A,C)=>{for(var O=y.key;P(O);)if(++g,g===d.length)return A(C),!1;return!!function(D){return!b(D)&&!S(D)}(O)||(this._cmp(O,d[g][1])===0||this._cmp(O,d[g][0])===0||A(()=>{h===i?y.continue(d[g][0]):y.continue(d[g][1])}),!1)}),I}startsWithAnyOf(){const e=Pr.apply(Co,arguments);return e.every(n=>typeof n=="string")?e.length===0?So(this):this.inAnyRange(e.map(n=>[n,n+Ts])):vn(this,"startsWithAnyOf() only works with strings")}}function nr(t){return Le(function(e){return Uu(e),t(e.target.error),!1})}function Uu(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Bu="storagemutated",_i="x-storagemutated-1",ji=uu(null,Bu);class yO{_lock(){return $l(!se.global),++this._reculock,this._reculock!==1||se.global||(se.lockOwnerFor=this),this}_unlock(){if($l(!se.global),--this._reculock==0)for(se.global||(se.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{qa(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&se.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if($l(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(r);case"MissingAPIError":throw new ae.MissingAPI(r.message,r);default:throw new ae.OpenFailed(r)}if(!this.active)throw new ae.TransactionInactive;return $l(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Le(i=>{Uu(i),this._reject(e.error)}),e.onabort=Le(i=>{Uu(i),this.active&&this._reject(new ae.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Le(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&ji.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return pt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return pt(new ae.TransactionInactive);if(this._locked())return new J((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},se])});if(r)return Mi(()=>{var s=new J((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new J((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=J.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new J((o,a)=>{r.then(l=>n._waitingQueue.push(Le(o.bind(null,l))),l=>n._waitingQueue.push(Le(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(xn(n,e))return n[e];const r=this.schema[e];if(!r)throw new ae.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function Xg(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+dx(e)}}function dx(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function hx(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:zA(n,r=>[r.name,r])}}let $u=t=>{try{return t.only([[]]),$u=()=>[[]],[[]]}catch{return $u=()=>Ts,Ts}};function Zg(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Lr(r,e)}(t):e=>Lr(e,t)}function c0(t){return[].slice.call(t)}let _O=0;function cu(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function vO(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:d,lowerOpen:h,upperOpen:p}=l;return c===void 0?d===void 0?null:e.upperBound(d,!!p):d===void 0?e.lowerBound(c,!!h):e.bound(c,d,!!h,!!p)}const{schema:i,hasGetAll:s}=function(l,c){const d=c0(l.objectStoreNames);return{schema:{name:l.name,tables:d.map(h=>c.objectStore(h)).map(h=>{const{keyPath:p,autoIncrement:g}=h,b=$t(p),S=p==null,P={},I={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S,compound:b,keyPath:p,autoIncrement:g,unique:!0,extractKey:Zg(p)},indexes:c0(h.indexNames).map(y=>h.index(y)).map(y=>{const{name:A,unique:C,multiEntry:O,keyPath:D}=y,v={name:A,compound:$t(D),keyPath:D,unique:C,multiEntry:O,extractKey:Zg(D)};return P[cu(D)]=v,v}),getIndexByKeyPath:y=>P[cu(y)]};return P[":id"]=I.primaryKey,p!=null&&(P[cu(p)]=I.primaryKey),I})},hasGetAll:d.length>0&&"getAll"in c.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(l=>function(c){const d=c.name;return{name:d,schema:c,mutate:function({trans:h,type:p,keys:g,values:b,range:S}){return new Promise((P,I)=>{P=Le(P);const y=h.objectStore(d),A=y.keyPath==null,C=p==="put"||p==="add";if(!C&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:O}=g||b||{length:1};if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});let D;const v=[],E=[];let w=0;const k=N=>{++w,Uu(N)};if(p==="deleteRange"){if(S.type===4)return P({numFailures:w,failures:E,results:[],lastResult:void 0});S.type===3?v.push(D=y.clear()):v.push(D=y.delete(r(S)))}else{const[N,x]=C?A?[b,g]:[b,null]:[g,null];if(C)for(let K=0;K<O;++K)v.push(D=x&&x[K]!==void 0?y[p](N[K],x[K]):y[p](N[K])),D.onerror=k;else for(let K=0;K<O;++K)v.push(D=y[p](N[K])),D.onerror=k}const R=N=>{const x=N.target.result;v.forEach((K,we)=>K.error!=null&&(E[we]=K.error)),P({numFailures:w,failures:E,results:p==="delete"?g:v.map(K=>K.result),lastResult:x})};D.onerror=N=>{k(N),R(N)},D.onsuccess=R})},getMany:({trans:h,keys:p})=>new Promise((g,b)=>{g=Le(g);const S=h.objectStore(d),P=p.length,I=new Array(P);let y,A=0,C=0;const O=v=>{const E=v.target;I[E._pos]=E.result,++C===A&&g(I)},D=nr(b);for(let v=0;v<P;++v)p[v]!=null&&(y=S.get(p[v]),y._pos=v,y.onsuccess=O,y.onerror=D,++A);A===0&&g(I)}),get:({trans:h,key:p})=>new Promise((g,b)=>{g=Le(g);const S=h.objectStore(d).get(p);S.onsuccess=P=>g(P.target.result),S.onerror=nr(b)}),query:function(h){return p=>new Promise((g,b)=>{g=Le(g);const{trans:S,values:P,limit:I,query:y}=p,A=I===1/0?void 0:I,{index:C,range:O}=y,D=S.objectStore(d),v=C.isPrimaryKey?D:D.index(C.name),E=r(O);if(I===0)return g({result:[]});if(h){const w=P?v.getAll(E,A):v.getAllKeys(E,A);w.onsuccess=k=>g({result:k.target.result}),w.onerror=nr(b)}else{let w=0;const k=P||!("openKeyCursor"in v)?v.openCursor(E):v.openKeyCursor(E),R=[];k.onsuccess=N=>{const x=k.result;return x?(R.push(P?x.value:x.primaryKey),++w===I?g({result:R}):void x.continue()):g({result:R})},k.onerror=nr(b)}})}(s),openCursor:function({trans:h,values:p,query:g,reverse:b,unique:S}){return new Promise((P,I)=>{P=Le(P);const{index:y,range:A}=g,C=h.objectStore(d),O=y.isPrimaryKey?C:C.index(y.name),D=b?S?"prevunique":"prev":S?"nextunique":"next",v=p||!("openKeyCursor"in O)?O.openCursor(r(A),D):O.openKeyCursor(r(A),D);v.onerror=nr(I),v.onsuccess=Le(E=>{const w=v.result;if(!w)return void P(null);w.___id=++_O,w.done=!1;const k=w.continue.bind(w);let R=w.continuePrimaryKey;R&&(R=R.bind(w));const N=w.advance.bind(w),x=()=>{throw new Error("Cursor not stopped")};w.trans=h,w.stop=w.continue=w.continuePrimaryKey=w.advance=()=>{throw new Error("Cursor not started")},w.fail=Le(I),w.next=function(){let K=1;return this.start(()=>K--?this.continue():this.stop()).then(()=>this)},w.start=K=>{const we=new Promise((Z,B)=>{Z=Le(Z),v.onerror=nr(B),w.fail=B,w.stop=H=>{w.stop=w.continue=w.continuePrimaryKey=w.advance=x,Z(H)}}),Ie=()=>{if(v.result)try{K()}catch(Z){w.fail(Z)}else w.done=!0,w.start=()=>{throw new Error("Cursor behind last entry")},w.stop()};return v.onsuccess=Le(Z=>{v.onsuccess=Ie,Ie()}),w.continue=k,w.continuePrimaryKey=R,w.advance=N,Ie(),we},P(w)},I)})},count({query:h,trans:p}){const{index:g,range:b}=h;return new Promise((S,P)=>{const I=p.objectStore(d),y=g.isPrimaryKey?I:I.index(g.name),A=r(b),C=A?y.count(A):y.count();C.onsuccess=Le(O=>S(O.target.result)),C.onerror=nr(P)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:$u(e),schema:i}}function ey({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(d,h){return h.reduce((p,{create:g})=>({...p,...g(p)}),d)}(vO(s,o,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function Kh({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const a=$_(o,i);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Mr(o,i,{get(){return this.table(i)},set(l){UA(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function ty({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function wO(t,e){return t._cfg.version-e._cfg.version}function IO(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),a=se.transless||se;Mi(()=>{se.trans=s,se.transless=a,e===0?(ct(i).forEach(l=>{_m(n,l,i[l].primKey,i[l].indexes)}),ey(t,n),J.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:l},c,d,h){const p=[],g=l._versions;let b=l._dbSchema=ry(l,l.idbdb,h),S=!1;const P=g.filter(y=>y._cfg.version>=c);function I(){return p.length?J.resolve(p.shift()(d.idbtrans)).then(I):J.resolve()}return P.forEach(y=>{p.push(()=>{const A=b,C=y._cfg.dbschema;iy(l,A,h),iy(l,C,h),b=l._dbSchema=C;const O=fx(A,C);O.add.forEach(v=>{_m(h,v[0],v[1].primKey,v[1].indexes)}),O.change.forEach(v=>{if(v.recreate)throw new ae.Upgrade("Not yet support for changing primary key");{const E=h.objectStore(v.name);v.add.forEach(w=>ny(E,w)),v.change.forEach(w=>{E.deleteIndex(w.name),ny(E,w)}),v.del.forEach(w=>E.deleteIndex(w))}});const D=y._cfg.contentUpgrade;if(D&&y._cfg.version>c){ey(l,h),d._memoizedTables={},S=!0;let v=qA(C);O.del.forEach(R=>{v[R]=A[R]}),ty(l,[l.Transaction.prototype]),Kh(l,[l.Transaction.prototype],ct(v),v),d.schema=v;const E=z_(D);let w;E&&za();const k=J.follow(()=>{if(w=D(d),w&&E){var R=Wr.bind(null,null);w.then(R,R)}});return w&&typeof w.then=="function"?J.resolve(w):k.then(()=>w)}}),p.push(A=>{(!S||!cO)&&function(C,O){[].slice.call(O.db.objectStoreNames).forEach(D=>C[D]==null&&O.db.deleteObjectStore(D))}(y._cfg.dbschema,A),ty(l,[l.Transaction.prototype]),Kh(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),d.schema=l._dbSchema})}),I().then(()=>{var y,A;A=h,ct(y=b).forEach(C=>{A.db.objectStoreNames.contains(C)||_m(A,C,y[C].primKey,y[C].indexes)})})}(t,e,s,n).catch(o)})}function fx(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Of)o.recreate=!0,n.change.push(o);else{const a=i.idxByName,l=s.idxByName;let c;for(c in a)l[c]||o.del.push(c);for(c in l){const d=a[c],h=l[c];d?d.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function _m(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>ny(i,s)),i}function ny(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ry(t,e,n){const r={};return jh(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const a=Xg(dx(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let d=0;d<s.indexNames.length;++d){const h=s.index(s.indexNames[d]);o=h.keyPath;var c=Xg(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);l.push(c)}r[i]=hx(i,a,l)}),r}function iy({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],c=o.index(l).keyPath,d=typeof c=="string"?c:"["+jh(c).join("+")+"]";if(e[s]){const h=e[s].idxByName[d];h&&(h.name=l,delete e[s].idxByName[d],e[s].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ve.WorkerGlobalScope&&Ve instanceof Ve.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class EO{_parseStoresSpec(e,n){ct(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Xg(l,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),$t(c),a===0)}),s=i.shift();if(s.multi)throw new ae.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")}),n[r]=hx(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?tn(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{tn(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,ty(n,[n._allTables,n,n.Transaction.prototype]),Kh(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ct(s),s),n._storeNames=ct(s),this}upgrade(e){return this._cfg.contentUpgrade=W_(this._cfg.contentUpgrade||Pe,e),this}}function Y_(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Ns(Vf,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function J_(t){return t&&typeof t.databases=="function"}function sy(t){return Mi(function(){return se.letThrough=!0,t()})}function TO(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function bO(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?pt(e.dbOpenError):t);wr&&(e.openCanceller._stackHolder=ao()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new ae.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;const l=()=>new J((c,d)=>{if(i(),!n)throw new ae.MissingAPI;const h=t.name,p=e.autoSchema?n.open(h):n.open(h,Math.round(10*t.verno));if(!p)throw new ae.MissingAPI;p.onerror=nr(d),p.onblocked=Le(t._fireOnBlocked),p.onupgradeneeded=Le(g=>{if(o=p.transaction,e.autoSchema&&!t._options.allowEmptyDB){p.onerror=Uu,o.abort(),p.result.close();const S=n.deleteDatabase(h);S.onsuccess=S.onerror=Le(()=>{d(new ae.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=nr(d);var b=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;a=b<1,t._novip.idbdb=p.result,IO(t,b/10,o,d)}},d),p.onsuccess=Le(()=>{o=null;const g=t._novip.idbdb=p.result,b=jh(g.objectStoreNames);if(b.length>0)try{const P=g.transaction((S=b).length===1?S[0]:S,"readonly");e.autoSchema?function({_novip:I},y,A){I.verno=y.version/10;const C=I._dbSchema=ry(0,y,A);I._storeNames=jh(y.objectStoreNames,0),Kh(I,[I._allTables],ct(C),C)}(t,g,P):(iy(t,t._dbSchema,P),function(I,y){const A=fx(ry(0,I.idbdb,y),I._dbSchema);return!(A.add.length||A.change.some(C=>C.add.length||C.change.length))}(t,P)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ey(t,P)}catch{}var S;lu.push(t),g.onversionchange=Le(P=>{e.vcFired=!0,t.on("versionchange").fire(P)}),g.onclose=Le(P=>{t.on("close").fire(P)}),a&&function({indexedDB:P,IDBKeyRange:I},y){!J_(P)&&y!==Vf&&Y_(P,I).put({name:y}).catch(Pe)}(t._deps,h),c()},d)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l()):J.reject(c));return J.race([r,(typeof navigator>"u"?J.resolve():TO()).then(l)]).then(()=>(i(),e.onReadyBeingFired=[],J.resolve(sy(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let d=e.onReadyBeingFired.reduce(W_,Pe);return e.onReadyBeingFired=[],J.resolve(sy(()=>d(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),pt(c)}).finally(()=>{e.openComplete=!0,s()})}function oy(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):$t(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function SO(t,e,n){var r=arguments.length;if(r<2)throw new ae.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,KA(i),n]}function px(t,e,n,r,i){return J.resolve().then(()=>{const s=se.transless||se,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===K_.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>px(t,e,n,null,i))):pt(h)}const l=z_(i);let c;l&&za();const d=J.follow(()=>{if(c=i.call(o,o),c)if(l){var h=Wr.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=oy(c))},a);return(c&&typeof c.then=="function"?J.resolve(c).then(h=>o.active?h:pt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>c)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),pt(h)))})}function Pd(t,e,n){const r=$t(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const AO={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(d,h,p){const g=cu(d),b=i[g]=i[g]||[],S=d==null?0:typeof d=="string"?1:d.length,P=h>0,I={...p,isVirtual:P,keyTail:h,keyLength:S,extractKey:Zg(d),unique:!P&&p.unique};return b.push(I),I.isPrimaryKey||s.push(I),S>1&&o(S===2?d[0]:d.slice(0,S-1),h+1,p),b.sort((y,A)=>y.keyTail-A.keyTail),I}const a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const d of r.indexes)o(d.keyPath,0,d);function l(d){const h=d.query.index;return h.isVirtual?{...d,query:{index:h,range:(p=d.query.range,g=h.keyTail,{type:p.type===1?2:p.type,lower:Pd(p.lower,p.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:Pd(p.upper,p.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0})}}:d;var p,g}return{...n,schema:{...r,primaryKey:a,indexes:s,getIndexByKeyPath:function(d){const h=i[cu(d)];return h&&h[0]}},count:d=>n.count(l(d)),query:d=>n.query(l(d)),openCursor(d){const{keyTail:h,isVirtual:p,keyLength:g}=d.query.index;return p?n.openCursor(l(d)).then(b=>b&&function(S){return Object.create(S,{continue:{value:function(I){I!=null?S.continue(Pd(I,d.reverse?t.MAX_KEY:t.MIN_KEY,h)):d.unique?S.continue(S.key.slice(0,g).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,h)):S.continue()}},continuePrimaryKey:{value(I,y){S.continuePrimaryKey(Pd(I,t.MAX_KEY,h),y)}},primaryKey:{get:()=>S.primaryKey},key:{get(){const I=S.key;return g===1?I[0]:I.slice(0,g)}},value:{get:()=>S.value}})}(b)):n.openCursor(d)}}}}}};function X_(t,e,n,r){return n=n||{},r=r||"",ct(t).forEach(i=>{if(xn(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=jg(s);a!==jg(o)?n[r+i]=e[i]:a==="Object"?X_(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),ct(e).forEach(i=>{xn(t,i)||(n[r+i]=e[i])}),n}const xO={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=se.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(s.type){case"add":if(l.fire===Pe)break;return o._promise("readwrite",()=>d(s),!0);case"put":if(l.fire===Pe&&c.fire===Pe)break;return o._promise("readwrite",()=>d(s),!0);case"delete":if(a.fire===Pe)break;return o._promise("readwrite",()=>d(s),!0);case"deleteRange":if(a.fire===Pe)break;return o._promise("readwrite",()=>function(p){return h(p.trans,p.range,1e4)}(s),!0)}return n.mutate(s);function d(p){const g=se.trans,b=p.keys||function(S,P){return P.type==="delete"?P.keys:P.keys||P.values.map(S.extractKey)}(r,p);if(!b)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:b}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(S,P,I){return P.type==="add"?Promise.resolve([]):S.getMany({trans:P.trans,keys:I,cache:"immutable"})}(n,p,b).then(S=>{const P=b.map((I,y)=>{const A=S[y],C={onerror:null,onsuccess:null};if(p.type==="delete")a.fire.call(C,I,A,g);else if(p.type==="add"||A===void 0){const O=l.fire.call(C,I,p.values[y],g);I==null&&O!=null&&(I=O,p.keys[y]=I,r.outbound||Yn(p.values[y],r.keyPath,I))}else{const O=X_(A,p.values[y]),D=c.fire.call(C,O,I,A,g);if(D){const v=p.values[y];Object.keys(D).forEach(E=>{xn(v,E)?v[E]=D[E]:Yn(v,E,D[E])})}}return C});return n.mutate(p).then(({failures:I,results:y,numFailures:A,lastResult:C})=>{for(let O=0;O<b.length;++O){const D=y?y[O]:b[O],v=P[O];D==null?v.onerror&&v.onerror(I[O]):v.onsuccess&&v.onsuccess(p.type==="put"&&S[O]?p.values[O]:D)}return{failures:I,results:y,numFailures:A,lastResult:C}}).catch(I=>(P.forEach(y=>y.onerror&&y.onerror(I)),Promise.reject(I)))})}function h(p,g,b){return n.query({trans:p,values:!1,query:{index:r,range:g},limit:b}).then(({result:S})=>d({type:"delete",keys:S,trans:p}).then(P=>P.numFailures>0?Promise.reject(P.failures[0]):S.length<b?{failures:[],numFailures:0,lastResult:void 0}:h(p,{...g,lower:S[S.length-1],lowerOpen:!0},b)))}}}}})};function mx(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)Yt(e.keys[i],t[s])===0&&(r.push(n?_c(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const kO={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=mx(r.keys,r.trans._cache,r.cache==="clone");return i?J.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?_c(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Z_(t){return!("from"in t)}const kr=function(t,e){if(!this){const n=new kr;return t&&"d"in t&&tn(n,t),n}tn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function zu(t,e,n){const r=Yt(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Z_(t))return tn(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(Yt(n,t.from)<0)return i?zu(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},d0(t);if(Yt(e,t.to)>0)return s?zu(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},d0(t);Yt(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Yt(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&Wh(t,i),s&&o&&Wh(t,s)}function Wh(t,e){Z_(e)||function n(r,{from:i,to:s,l:o,r:a}){zu(r,i,s),o&&n(r,o),a&&n(r,a)}(t,e)}function PO(t,e){const n=ay(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=ay(t);let o=s.next(i.from),a=o.value;for(;!r.done&&!o.done;){if(Yt(a.from,i.to)<=0&&Yt(a.to,i.from)>=0)return!0;Yt(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function ay(t){let e=Z_(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Yt(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Yt(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function d0(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],o[i]=a[s],t[s]=o,o.d=h0(o)}t.d=h0(t)}function h0({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Ea(kr.prototype,{add(t){return Wh(this,t),this},addKey(t){return zu(this,t,t),this},addKeys(t){return t.forEach(e=>zu(this,e,e)),this},[Ug](){return ay(this)}});const RO={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new kr(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,c={...i,mutate:p=>{const g=p.trans,b=g.mutatedParts||(g.mutatedParts={}),S=D=>{const v=`idb://${e}/${r}/${D}`;return b[v]||(b[v]=new kr)},P=S(""),I=S(":dels"),{type:y}=p;let[A,C]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const O=p.trans._cache;return i.mutate(p).then(D=>{if($t(A)){y!=="delete"&&(A=D.results),P.addKeys(A);const v=mx(A,O);v||y==="add"||I.addKeys(A),(v||C)&&function(E,w,k,R){function N(x){const K=E(x.name||"");function we(Z){return Z!=null?x.extractKey(Z):null}const Ie=Z=>x.multiEntry&&$t(Z)?Z.forEach(B=>K.addKey(B)):K.addKey(Z);(k||R).forEach((Z,B)=>{const H=k&&we(k[B]),ne=R&&we(R[B]);Yt(H,ne)!==0&&(H!=null&&Ie(H),ne!=null&&Ie(ne))})}w.indexes.forEach(N)}(S,s,v,C)}else if(A){const v={from:A.lower,to:A.upper};I.add(v),P.add(v)}else P.add(n),I.add(n),s.indexes.forEach(v=>S(v.name).add(n));return D})}},d=({query:{index:p,range:g}})=>{var b,S;return[p,new kr((b=g.lower)!==null&&b!==void 0?b:t.MIN_KEY,(S=g.upper)!==null&&S!==void 0?S:t.MAX_KEY)]},h={get:p=>[o,new kr(p.key)],getMany:p=>[o,new kr().addKeys(p.keys)],count:d,query:d,openCursor:d};return ct(h).forEach(p=>{c[p]=function(g){const{subscr:b}=se;if(b){const S=C=>{const O=`idb://${e}/${r}/${C}`;return b[O]||(b[O]=new kr)},P=S(""),I=S(":dels"),[y,A]=h[p](g);if(S(y.name||"").add(A),!y.isPrimaryKey){if(p!=="count"){const C=p==="query"&&l&&g.values&&i.query({...g,values:!1});return i[p].apply(this,arguments).then(O=>{if(p==="query"){if(l&&g.values)return C.then(({result:v})=>(P.addKeys(v),O));const D=g.values?O.result.map(a):O.result;g.values?P.addKeys(D):I.addKeys(D)}else if(p==="openCursor"){const D=O,v=g.values;return D&&Object.create(D,{key:{get:()=>(I.addKey(D.primaryKey),D.key)},primaryKey:{get(){const E=D.primaryKey;return I.addKey(E),E}},value:{get:()=>(v&&P.addKey(D.primaryKey),D.value)}})}return O})}I.add(n)}}return i[p].apply(this,arguments)}}),c}}}};class Ns{constructor(e,n){this._middlewares={},this.verno=0;const r=Ns.dependencies;this._options=n={addons:Ns.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Pe,dbReadyPromise:null,cancelOpen:Pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new J(a=>{s.dbReadyResolve=a}),s.openCanceller=new J((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=uu(this,"populate","blocked","versionchange","close",{ready:[W_,Pe]}),this.on.ready.subscribe=BA(this.on.ready.subscribe,a=>(l,c)=>{Ns.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||J.resolve().then(l),c&&a(l);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(l),c&&a(l);else{a(l);const h=this;c||a(function p(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(p)})}})}),this.Collection=(o=this,Pl(fO.prototype,function(a,l){this.db=o;let c=lx,d=null;if(l)try{c=l()}catch(b){d=b}const h=a._ctx,p=h.table,g=p.hook.reading.fire;this._ctx={table:p,index:h.index,isPrimKey:!h.index||p.schema.primKey.keyPath&&h.index===p.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:h.or,valueMapper:g!==Lu?g:null}})),this.Table=function(a){return Pl(hO.prototype,function(l,c,d){this.db=a,this._tx=d,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:uu(null,{creating:[eO,Pe],reading:[ZD,Lu],updating:[nO,Pe],deleting:[tO,Pe]})})}(this),this.Transaction=function(a){return Pl(yO.prototype,function(l,c,d,h,p){this.db=a,this.mode=l,this.storeNames=c,this.schema=d,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=uu(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new J((g,b)=>{this._resolve=g,this._reject=b}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var b=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):b&&this.idbtrans&&this.idbtrans.abort(),pt(g)})})}(this),this.Version=function(a){return Pl(EO.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Pl(cx.prototype,function(l,c,d){this.db=a,this._ctx={table:l,index:c===":id"?null:c,or:d};const h=a._deps.indexedDB;if(!h)throw new ae.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(p,g)=>h.cmp(g,p),this._max=(p,g)=>h.cmp(p,g)>0?p:g,this._min=(p,g)=>h.cmp(p,g)<0?p:g,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=$u(n.IDBKeyRange),this._createTransaction=(a,l,c,d)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,d),this._fireOnBlocked=a=>{this.on("blocked").fire(a),lu.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(AO),this.use(xO),this.use(RO),this.use(kO),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new ae.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(wO),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?e():new J((n,r)=>{if(this._state.openComplete)return r(new ae.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ae.DatabaseClosed);this.open().catch(Pe)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return bO(this)}_close(){const e=this._state,n=lu.indexOf(this);if(n>=0&&lu.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new J(r=>{e.dbReadyResolve=r}),e.openCanceller=new J((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ae.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new J((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=Le(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!J_(a)&&c!==Vf&&Y_(a,l).delete(c).catch(Pe)})(this._deps,this.name),r()}),o.onerror=nr(i),o.onblocked=this._fireOnBlocked};if(e)throw new ae.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ct(this._allTables).map(e=>this._allTables[e])}transaction(){const e=SO.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=se.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(c=>{var d=c instanceof this.Table?c.name:c;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),e=="r"||e===fm)o=fm;else{if(e!="rw"&&e!=pm)throw new ae.InvalidArgument("Invalid transaction mode: "+e);o=pm}if(i){if(i.mode===fm&&o===pm){if(!s)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new ae.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(d,h)=>{h(c)}):pt(c)}const l=px.bind(null,this,o,a,i,r);return i?i._promise(o,l,"lock"):se.trans?qa(se.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!xn(this._allTables,e))throw new ae.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const CO=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class NO{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[CO](){return this}}function gx(t,e){return ct(e).forEach(n=>{Wh(t[n]||(t[n]=new kr),e[n])}),t}function DO(t){let e,n=!1;const r=new NO(i=>{const s=z_(t);let o=!1,a={},l={};const c={get closed(){return o},unsubscribe:()=>{o=!0,ji.storagemutated.unsubscribe(g)}};i.start&&i.start(c);let d=!1,h=!1;function p(){return ct(l).some(S=>a[S]&&PO(a[S],l[S]))}const g=S=>{gx(a,S),p()&&b()},b=()=>{if(d||o)return;a={};const S={},P=function(I){s&&za();const y=()=>Mi(t,{subscr:I,trans:null}),A=se.trans?qa(se.transless,y):y();return s&&A.then(Wr,Wr),A}(S);h||(ji(Bu,g),h=!0),d=!0,Promise.resolve(P).then(I=>{n=!0,e=I,d=!1,o||(p()?b():(a={},l=S,i.next&&i.next(I)))},I=>{d=!1,n=!1,i.error&&i.error(I),c.unsubscribe()})};return b(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let ly;try{ly={indexedDB:Ve.indexedDB||Ve.mozIndexedDB||Ve.webkitIndexedDB||Ve.msIndexedDB,IDBKeyRange:Ve.IDBKeyRange||Ve.webkitIDBKeyRange}}catch{ly={indexedDB:null,IDBKeyRange:null}}const us=Ns;function th(t){let e=Nr;try{Nr=!0,ji.storagemutated.fire(t)}finally{Nr=e}}Ea(us,{...Qd,delete:t=>new us(t,{addons:[]}).delete(),exists:t=>new us(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return J_(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Vf)):Y_(e,n).toCollection().primaryKeys()}(us.dependencies).then(t)}catch{return pt(new ae.MissingAPI)}},defineClass:()=>function(t){tn(this,t)},ignoreTransaction:t=>se.trans?qa(se.transless,t):t(),vip:sy,async:function(t){return function(){try{var e=oy(t.apply(this,arguments));return e&&typeof e.then=="function"?e:J.resolve(e)}catch(n){return pt(n)}}},spawn:function(t,e,n){try{var r=oy(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:J.resolve(r)}catch(i){return pt(i)}},currentTransaction:{get:()=>se.trans||null},waitFor:function(t,e){const n=J.resolve(typeof t=="function"?us.ignoreTransaction(t):t).timeout(e||6e4);return se.trans?se.trans.waitFor(n):n},Promise:J,debug:{get:()=>wr,set:t=>{GA(t,t==="dexie"?()=>!0:ax)}},derive:sa,extend:tn,props:Ea,override:BA,Events:uu,on:ji,liveQuery:DO,extendObservabilitySet:gx,getByKeyPath:Lr,setByKeyPath:Yn,delByKeyPath:function(t,e){typeof e=="string"?Yn(t,e,void 0):"length"in e&&[].map.call(e,function(n){Yn(t,n,void 0)})},shallowClone:qA,deepClone:_c,getObjectDiff:X_,cmp:Yt,asap:$A,minKey:Jg,addons:[],connections:lu,errnames:K_,dependencies:ly,semVer:s0,version:s0.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),us.maxKey=$u(us.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ji(Bu,t=>{if(!Nr){let e;Of?(e=document.createEvent("CustomEvent"),e.initCustomEvent(_i,!0,!0,t)):e=new CustomEvent(_i,{detail:t}),Nr=!0,dispatchEvent(e),Nr=!1}}),addEventListener(_i,({detail:t})=>{Nr||th(t)}));let Nr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(_i);typeof t.unref=="function"&&t.unref(),ji(Bu,e=>{Nr||t.postMessage(e)}),t.onmessage=e=>{e.data&&th(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){ji(Bu,e=>{try{Nr||(typeof localStorage<"u"&&localStorage.setItem(_i,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:_i,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===_i){const n=JSON.parse(e.newValue);n&&th(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===_i&&th(e.changedParts)})}J.rejectionMapper=function(t,e){if(!t||t instanceof oa||t instanceof TypeError||t instanceof SyntaxError||!t.name||!t0[t.name])return t;var n=new t0[t.name](e||t.message,t);return"stack"in t&&Mr(n,"stack",{get:function(){return this.inner.stack}}),n},GA(wr,ax);var f0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},OO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new VO;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const b=c<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FO=function(t){const e=yx(t);return _x.encodeByteArray(e,!0)},Gh=function(t){return FO(t).replace(/\./g,"")},vx=function(t){try{return _x.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Hh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!MO(n)||(t[n]=Hh(t[n],e[n]));return t}function MO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=()=>wx().__FIREBASE_DEFAULTS__,jO=()=>{if(typeof process>"u"||typeof f0>"u")return;const t=f0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vx(t[1]);return e&&JSON.parse(e)},ev=()=>{try{return LO()||jO()||UO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ix=()=>{var t;return(t=ev())===null||t===void 0?void 0:t.config},BO=t=>{var e;return(e=ev())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gh(JSON.stringify(n)),Gh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function tv(){var t;const e=(t=ev())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KO(){return typeof window<"u"||Ex()}function Ex(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function WO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ff(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tx(){const t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bx(){return!tv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gr(){try{return typeof indexedDB=="object"}catch{return!1}}function rv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function iv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="FirebaseError";class Pt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GO,Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zn.prototype.create)}}class Zn{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pt(i,a,r)}}function HO(t,e){return t.replace(QO,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const QO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function YO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(m0(s)&&m0(o)){if(!qu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function m0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ql(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Sx(t,e){const n=new JO(t,e);return n.subscribe.bind(n)}class JO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=vm),i.error===void 0&&(i.error=vm),i.complete===void 0&&(i.complete=vm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=1e3,e2=2,t2=4*60*60*1e3,n2=.5;function g0(t,e=ZO,n=e2){const r=e*Math.pow(n,t),i=Math.round(n2*r*(Math.random()-.5)*2);return Math.min(t2,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){return t&&t._delegate?t._delegate:t}class gt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $O;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i2(t){return t===fs?void 0:t}function s2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new r2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=[];var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const xx={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},o2=he.INFO,a2={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},l2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=a2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ic{constructor(e){this.name=e,this._logLevel=o2,this._logHandler=l2,this._userLogHandler=null,sv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}function u2(t){sv.forEach(e=>{e.setLogLevel(t)})}function c2(t,e){for(const n of sv){let r=null;e&&e.level&&(r=xx[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:he[s].toLowerCase(),message:a,args:o,type:i.name})}}}const d2=(t,e)=>e.some(n=>t instanceof n);let y0,_0;function h2(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f2(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kx=new WeakMap,uy=new WeakMap,Px=new WeakMap,wm=new WeakMap,ov=new WeakMap;function p2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kx.set(n,t)}).catch(()=>{}),ov.set(e,t),e}function m2(t){if(uy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});uy.set(t,e)}let cy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Px.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function g2(t){cy=t(cy)}function y2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Im(this),e,...n);return Px.set(r,e.sort?e.sort():[e]),jr(r)}:f2().includes(t)?function(...e){return t.apply(Im(this),e),jr(kx.get(this))}:function(...e){return jr(t.apply(Im(this),e))}}function _2(t){return typeof t=="function"?y2(t):(t instanceof IDBTransaction&&m2(t),d2(t,h2())?new Proxy(t,cy):t)}function jr(t){if(t instanceof IDBRequest)return p2(t);if(wm.has(t))return wm.get(t);const e=_2(t);return e!==t&&(wm.set(t,e),ov.set(e,t)),e}const Im=t=>ov.get(t);function Wa(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=jr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(jr(o.result),l.oldVersion,l.newVersion,jr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function la(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),jr(n).then(()=>{})}const v2=["get","getKey","getAll","getAllKeys","count"],w2=["put","add","delete","clear"],Em=new Map;function v0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=w2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||v2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Em.set(e,s),s}g2(t=>({...t,get:(e,n,r)=>v0(e,n)||t.get(e,n,r),has:(e,n)=>!!v0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(E2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function E2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",dy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Ic("@firebase/app"),T2="@firebase/app-compat",b2="@firebase/analytics-compat",S2="@firebase/analytics",A2="@firebase/app-check-compat",x2="@firebase/app-check",k2="@firebase/auth",P2="@firebase/auth-compat",R2="@firebase/database",C2="@firebase/data-connect",N2="@firebase/database-compat",D2="@firebase/functions",O2="@firebase/functions-compat",V2="@firebase/installations",F2="@firebase/installations-compat",M2="@firebase/messaging",L2="@firebase/messaging-compat",j2="@firebase/performance",U2="@firebase/performance-compat",B2="@firebase/remote-config",$2="@firebase/remote-config-compat",z2="@firebase/storage",q2="@firebase/storage-compat",K2="@firebase/firestore",W2="@firebase/vertexai-preview",G2="@firebase/firestore-compat",H2="firebase",Q2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="[DEFAULT]",Y2={[Qh]:"fire-core",[T2]:"fire-core-compat",[S2]:"fire-analytics",[b2]:"fire-analytics-compat",[x2]:"fire-app-check",[A2]:"fire-app-check-compat",[k2]:"fire-auth",[P2]:"fire-auth-compat",[R2]:"fire-rtdb",[C2]:"fire-data-connect",[N2]:"fire-rtdb-compat",[D2]:"fire-fn",[O2]:"fire-fn-compat",[V2]:"fire-iid",[F2]:"fire-iid-compat",[M2]:"fire-fcm",[L2]:"fire-fcm-compat",[j2]:"fire-perf",[U2]:"fire-perf-compat",[B2]:"fire-rc",[$2]:"fire-rc-compat",[z2]:"fire-gcs",[q2]:"fire-gcs-compat",[K2]:"fire-fst",[G2]:"fire-fst-compat",[W2]:"fire-vertex","fire-js":"fire-js",[H2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Map,Ta=new Map,ba=new Map;function Ku(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rx(t,e){t.container.addOrOverwriteComponent(e)}function nn(t){const e=t.name;if(ba.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;ba.set(e,t);for(const n of Bi.values())Ku(n,t);for(const n of Ta.values())Ku(n,t);return!0}function Mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function J2(t,e,n=Ui){Mf(t,e).clearInstance(n)}function Cx(t){return t.options!==void 0}function Xe(t){return t.settings!==void 0}function X2(){ba.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new Zn("app","Firebase",Z2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nx=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV extends Nx{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Rt(Qh,dy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){lv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=Q2;function av(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ui,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fn.create("bad-app-name",{appName:String(i)});if(n||(n=Ix()),!n)throw Fn.create("no-options");const s=Bi.get(i);if(s){if(qu(n,s.options)&&qu(r,s.config))return s;throw Fn.create("duplicate-app",{appName:i})}const o=new Ax(i);for(const l of ba.values())o.addComponent(l);const a=new Nx(n,r,o);return Bi.set(i,a),a}function tV(t,e){if(KO()&&!Ex())throw Fn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Cx(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Ta.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Ax(s);for(const c of ba.values())a.addComponent(c);const l=new eV(n,e,s,a);return Ta.set(s,l),l}function nV(t=Ui){const e=Bi.get(t);if(!e&&t===Ui&&Ix())return av();if(!e)throw Fn.create("no-app",{appName:t});return e}function rV(){return Array.from(Bi.values())}async function lv(t){let e=!1;const n=t.name;Bi.has(n)?(e=!0,Bi.delete(n)):Ta.has(n)&&t.decRefCount()<=0&&(Ta.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Rt(t,e,n){var r;let i=(r=Y2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(a.join(" "));return}nn(new gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Dx(t,e){if(t!==null&&typeof t!="function")throw Fn.create("invalid-log-argument");c2(t,e)}function Ox(t){u2(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="firebase-heartbeat-database",sV=1,Wu="firebase-heartbeat-store";let Tm=null;function Vx(){return Tm||(Tm=Wa(iV,sV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fn.create("idb-open",{originalErrorMessage:t.message})})),Tm}async function oV(t){try{const n=(await Vx()).transaction(Wu),r=await n.objectStore(Wu).get(Fx(t));return await n.done,r}catch(e){if(e instanceof Pt)Hr.warn(e.message);else{const n=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function w0(t,e){try{const r=(await Vx()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(e,Fx(t)),await r.done}catch(n){if(n instanceof Pt)Hr.warn(n.message);else{const r=Fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function Fx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=1024,lV=30*24*60*60*1e3;class uV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=I0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=I0(),{heartbeatsToSend:r,unsentEntries:i}=cV(this._heartbeatsCache.heartbeats),s=Gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hr.warn(n),""}}}function I0(){return new Date().toISOString().substring(0,10)}function cV(t,e=aV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),E0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),E0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gr()?rv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return w0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return w0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function E0(t){return Gh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){nn(new gt("platform-logger",e=>new I2(e),"PRIVATE")),nn(new gt("heartbeat",e=>new uV(e),"PRIVATE")),Rt(Qh,dy,t),Rt(Qh,dy,"esm2017"),Rt("fire-js","")}hV("");const fV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pt,SDK_VERSION:Zi,_DEFAULT_ENTRY_NAME:Ui,_addComponent:Ku,_addOrOverwriteComponent:Rx,_apps:Bi,_clearComponents:X2,_components:ba,_getProvider:Mf,_isFirebaseApp:Cx,_isFirebaseServerApp:Xe,_registerComponent:nn,_removeServiceInstance:J2,_serverApps:Ta,deleteApp:lv,getApp:nV,getApps:rV,initializeApp:av,initializeServerApp:tV,onLog:Dx,registerVersion:Rt,setLogLevel:Ox},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n){this._delegate=e,this.firebase=n,Ku(e,new gt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),lv(this._delegate)))}_getService(e,n=Ui){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ui){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ku(this._delegate,e)}_addOrOverwriteComponent(e){Rx(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},T0=new Zn("app-compat","Firebase",mV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Rt,setLogLevel:Ox,onLog:Dx,apps:null,SDK_VERSION:Zi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:fV}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Ui,!p0(e,c))throw T0.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,d={}){const h=av(c,d);if(p0(e,h.name))return e[h.name];const p=new t(h,n);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(nn(c)&&c.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[h]!="function")throw T0.create("invalid-app-argument",{appName:d});return g[h]()};c.serviceProps!==void 0&&Hh(p,c.serviceProps),n[h]=p,t.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){const t=gV(pV);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Mx,extendNamespace:e,createSubscribe:Sx,ErrorFactory:Zn,deepExtend:Hh});function e(n){Hh(t,n)}return t}const yV=Mx();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Ic("@firebase/app-compat"),_V="@firebase/app-compat",vV="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t){Rt(_V,vV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=wx();if(t.firebase!==void 0){b0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&b0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ht=yV;wV();var IV="firebase",EV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.registerVersion(IV,EV,"app-compat");function uv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Rl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ao={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Lx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bV=TV,SV=Lx,jx=new Zn("auth","Firebase",Lx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Ic("@firebase/auth");function AV(t,...e){Yh.logLevel<=he.WARN&&Yh.warn(`Auth (${Zi}): ${t}`,...e)}function nh(t,...e){Yh.logLevel<=he.ERROR&&Yh.error(`Auth (${Zi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t,...e){throw dv(t,...e)}function mt(t,...e){return dv(t,...e)}function cv(t,e,n){const r=Object.assign(Object.assign({},SV()),{[e]:n});return new Zn("auth","Firebase",r).create(e,{appName:t.name})}function Et(t){return cv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ga(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dt(t,"argument-error"),cv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jx.create(t,...e)}function z(t,e,...n){if(!t)throw dv(e,...n)}function lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nh(e),new Error(e)}function Xn(t,e){t||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hv(){return S0()==="http:"||S0()==="https:"}function S0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hv()||Ff()||"connection"in navigator)?navigator.onLine:!0}function kV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=qO()||nv()}get(){return xV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new Ec(3e4,6e4);function tt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nt(t,e,n,r,i={}){return Bx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ka(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return WO()||(c.referrerPolicy="no-referrer"),Ux.fetch()($x(t,t.config.apiHost,n,a),c)})}async function Bx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PV),e);try{const i=new NV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Kl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw cv(t,d,c);Dt(t,d)}}catch(i){if(i instanceof Pt)throw i;Dt(t,"network-request-failed",{message:String(i)})}}async function Zr(t,e,n,r,i={}){const s=await nt(t,e,n,r,i);return"mfaPendingCredential"in s&&Dt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $x(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?fv(t.config,i):`${t.config.apiScheme}://${i}`}function CV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mt(this.auth,"network-request-failed")),RV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){return t!==void 0&&t.getResponse!==void 0}function x0(t){return t!==void 0&&t.enterprise!==void 0}class DV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV(t){return(await nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function VV(t,e){return nt(t,"GET","/v2/recaptchaConfig",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(t,e){return nt(t,"POST","/v1/accounts:delete",e)}async function MV(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function zx(t,e){return nt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LV(t,e=!1){const n=te(t),r=await n.getIdToken(e),i=Lf(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:du(bm(i.auth_time)),issuedAtTime:du(bm(i.iat)),expirationTime:du(bm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bm(t){return Number(t)*1e3}function Lf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const i=vx(n);return i?JSON.parse(i):(nh("Failed to decode base64 JWT payload"),null)}catch(i){return nh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function k0(t){const e=Lf(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pt&&jV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Qr(t,zx(n,{idToken:r}));z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qx(s.providerUserInfo):[],a=$V(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function BV(t){const e=te(t);await Hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $V(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qx(t){return t.map(e=>{var{providerId:n}=e,r=uv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){const n=await Bx(t,{},async()=>{const r=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$x(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ux.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qV(t,e){return nt(t,"POST","/v2/accounts:revokeToken",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");const n=k0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ua;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=uv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qr(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LV(this,e)}reload(){return BV(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xe(this.auth.app))return Promise.reject(Et(this.auth));const e=await this.getIdToken();return await Qr(this,FV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:A,emailVerified:C,isAnonymous:O,providerData:D,stsTokenManager:v}=n;z(A&&v,e,"internal-error");const E=ua.fromJSON(this.name,v);z(typeof A=="string",e,"internal-error"),li(h,e.name),li(p,e.name),z(typeof C=="boolean",e,"internal-error"),z(typeof O=="boolean",e,"internal-error"),li(g,e.name),li(b,e.name),li(S,e.name),li(P,e.name),li(I,e.name),li(y,e.name);const w=new Dr({uid:A,auth:e,email:p,emailVerified:C,displayName:h,isAnonymous:O,photoURL:b,phoneNumber:g,tenantId:S,stsTokenManager:E,createdAt:I,lastLoginAt:y});return D&&Array.isArray(D)&&(w.providerData=D.map(k=>Object.assign({},k))),P&&(w._redirectEventId=P),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new ua;i.updateFromServerResponse(n);const s=new Dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?qx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ua;a.updateFromIdToken(r);const l=new Dr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map;function Tn(t){Xn(t instanceof Function,"Expected a class definition");let e=P0.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,P0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Kx.type="NONE";const Sa=Kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e,n){return`firebase:${t}:${e}:${n}`}class ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ds(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ds("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ca(Tn(Sa),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Tn(Sa);const o=Ds(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Dr._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ca(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ca(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yx(e))return"Blackberry";if(Jx(e))return"Webos";if(Gx(e))return"Safari";if((e.includes("chrome/")||Hx(e))&&!e.includes("edge/"))return"Chrome";if(Tc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Wx(t=Qe()){return/firefox\//i.test(t)}function Gx(t=Qe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hx(t=Qe()){return/crios\//i.test(t)}function Qx(t=Qe()){return/iemobile/i.test(t)}function Tc(t=Qe()){return/android/i.test(t)}function Yx(t=Qe()){return/blackberry/i.test(t)}function Jx(t=Qe()){return/webos/i.test(t)}function bc(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KV(t=Qe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function WV(t=Qe()){var e;return bc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GV(){return Tx()&&document.documentMode===10}function Xx(t=Qe()){return bc(t)||Tc(t)||Jx(t)||Yx(t)||/windows phone/i.test(t)||Qx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e=[]){let n;switch(t){case"Browser":n=R0(Qe());break;case"Worker":n=`${R0(Qe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t,e={}){return nt(t,"GET","/v2/passwordPolicy",tt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=6;class JV{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new HV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zx(this,{idToken:e}),r=await Dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xe(this.app))return Promise.reject(Et(this));const n=e?te(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xe(this.app)?Promise.reject(Et(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xe(this.app)?Promise.reject(Et(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QV(this),n=new JV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[Tn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ze(t){return te(t)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sx(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZV(t){Sc=t}function pv(t){return Sc.loadJS(t)}function eF(){return Sc.recaptchaV2Script}function tF(){return Sc.recaptchaEnterpriseScript}function nF(){return Sc.gapiScript}function ek(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const rF="recaptcha-enterprise",iF="NO_RECAPTCHA";class sF{constructor(e){this.type=rF,this.auth=Ze(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{VV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new DV(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;x0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(iF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&x0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=tF();l.length!==0&&(l+=a),pv(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function N0(t,e,n,r=!1){const i=new sF(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qu(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await N0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await N0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function oF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aF(t,e,n){const r=Ze(t);z(r._canInitEmulator,r,"emulator-config-failed"),z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=tk(e),{host:o,port:a}=lF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||uF()}function tk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lF(t){const e=tk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:D0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:D0(o)}}}function D0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e){return nt(t,"POST","/v1/accounts:resetPassword",tt(t,e))}async function cF(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function dF(t,e){return nt(t,"POST","/v1/accounts:signUp",e)}async function hF(t,e){return nt(t,"POST","/v1/accounts:update",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t,e){return Zr(t,"POST","/v1/accounts:signInWithPassword",tt(t,e))}async function jf(t,e){return nt(t,"POST","/v1/accounts:sendOobCode",tt(t,e))}async function pF(t,e){return jf(t,e)}async function mF(t,e){return jf(t,e)}async function gF(t,e){return jf(t,e)}async function yF(t,e){return jf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t,e){return Zr(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}async function vF(t,e){return Zr(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Ha{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Yu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qu(e,n,"signInWithPassword",fF);case"emailLink":return _F(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qu(e,r,"signUpPassword",dF);case"emailLink":return vF(e,{idToken:n,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ur(t,e){return Zr(t,"POST","/v1/accounts:signInWithIdp",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="http://localhost";class gr extends Ha{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=uv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ur(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ur(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ur(e,n)}buildRequest(){const e={requestUri:wF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e){return nt(t,"POST","/v1/accounts:sendVerificationCode",tt(t,e))}async function EF(t,e){return Zr(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e))}async function TF(t,e){const n=await Zr(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e));if(n.temporaryProof)throw Kl(t,"account-exists-with-different-credential",n);return n}const bF={USER_NOT_FOUND:"user-not-found"};async function SF(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Zr(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,n),bF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ha{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Os({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Os({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return EF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return TF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return SF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Os({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xF(t){const e=Jo(ql(t)).link,n=e?Jo(ql(e)).deep_link_id:null,r=Jo(ql(t)).deep_link_id;return(r?Jo(ql(r)).link:null)||r||n||e||t}class Uf{constructor(e){var n,r,i,s,o,a;const l=Jo(ql(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=AF((i=l.mode)!==null&&i!==void 0?i:null);z(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=xF(e);try{return new Uf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.providerId=es.PROVIDER_ID}static credential(e,n){return Yu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Uf.parseLink(n);return z(r,"argument-error"),Yu._fromEmailAndCode(e,r.code,r.tenantId)}}es.PROVIDER_ID="password";es.EMAIL_PASSWORD_SIGN_IN_METHOD="password";es.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends ei{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class da extends Qa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return z("providerId"in n&&"signInMethod"in n,"argument-error"),gr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return z(e.idToken||e.accessToken,"argument-error"),gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return da.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return da.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new da(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Qa{constructor(){super("facebook.com")}static credential(e){return gr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Qa{constructor(){super("github.com")}static credential(e){return gr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="http://localhost";class Aa extends Ha{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ur(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ur(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ur(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Aa(r,s)}static _create(e,n){return new Aa(e,n)}buildRequest(){return{requestUri:kF,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="saml.";class Jh extends ei{constructor(e){z(e.startsWith(PF),"argument-error"),super(e)}static credentialFromResult(e){return Jh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Aa.fromJSON(e);return z(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Aa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Qa{constructor(){super("twitter.com")}static credential(e,n){return gr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e){return Zr(t,"POST","/v1/accounts:signUp",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Dr._fromIdTokenResponse(e,r,i),o=O0(r);return new jn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=O0(r);return new jn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function O0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t){var e;if(Xe(t.app))return Promise.reject(Et(t));const n=Ze(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new jn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await rk(n,{returnSecureToken:!0}),i=await jn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Pt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xh(e,n,r,i)}}function ik(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CF(t,e){const n=te(t);await Bf(!0,n,e);const{providerUserInfo:r}=await MV(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=sk(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function mv(t,e,n=!1){const r=await Qr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jn._forOperation(t,"link",r)}async function Bf(t,e,n){await Hu(e);const r=sk(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";z(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e,n=!1){const{auth:r}=t;if(Xe(r.app))return Promise.reject(Et(r));const i="reauthenticate";try{const s=await Qr(t,ik(r,i,e,t),n);z(s.idToken,r,"internal-error");const o=Lf(s.idToken);z(o,r,"internal-error");const{sub:a}=o;return z(t.uid===a,r,"user-mismatch"),jn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e,n=!1){if(Xe(t.app))return Promise.reject(Et(t));const r="signIn",i=await ik(t,r,e),s=await jn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function $f(t,e){return ak(Ze(t),e)}async function lk(t,e){const n=te(t);return await Bf(!1,n,e.providerId),mv(n,e)}async function uk(t,e){return ok(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NF(t,e){return Zr(t,"POST","/v1/accounts:signInWithCustomToken",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e){if(Xe(t.app))return Promise.reject(Et(t));const n=Ze(t),r=await NF(n,{token:e,returnSecureToken:!0}),i=await jn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?gv._fromServerResponse(e,n):"totpInfo"in n?yv._fromServerResponse(e,n):Dt(e,"internal-error")}}class gv extends Ac{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new gv(n)}}class yv extends Ac{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new yv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e,n){var r;z(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(t){const e=Ze(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OF(t,e,n){const r=Ze(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&zf(r,i,n),await Qu(r,i,"getOobCode",mF)}async function VF(t,e,n){await nk(te(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_v(t),r})}async function FF(t,e){await hF(te(t),{oobCode:e})}async function ck(t,e){const n=te(t),r=await nk(n,{oobCode:e}),i=r.requestType;switch(z(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(r.mfaInfo,n,"internal-error");default:z(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Ac._fromServerResponse(Ze(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function MF(t,e){const{data:n}=await ck(te(t),e);return n.email}async function LF(t,e,n){if(Xe(t.app))return Promise.reject(Et(t));const r=Ze(t),o=await Qu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_v(t),l}),a=await jn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function jF(t,e,n){return Xe(t.app)?Promise.reject(Et(t)):$f(te(t),es.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_v(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e,n){const r=Ze(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){z(a.handleCodeInApp,r,"argument-error"),a&&zf(r,o,a)}s(i,n),await Qu(r,i,"getOobCode",gF)}function BF(t,e){const n=Uf.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function $F(t,e,n){if(Xe(t.app))return Promise.reject(Et(t));const r=te(t),i=es.credentialWithLink(e,n||Gu());return z(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),$f(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(t,e){return nt(t,"POST","/v1/accounts:createAuthUri",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e){const n=hv()?Gu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await zF(te(t),r);return i||[]}async function KF(t,e){const n=te(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&zf(n.auth,i,e);const{email:s}=await pF(n.auth,i);s!==t.email&&await t.reload()}async function WF(t,e,n){const r=te(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&zf(r.auth,s,n);const{email:o}=await yF(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(t,e){return nt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=te(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Qr(r,GF(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function QF(t,e){const n=te(t);return Xe(n.auth.app)?Promise.reject(Et(n.auth)):dk(n,e,null)}function YF(t,e){return dk(te(t),null,e)}async function dk(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Qr(t,cF(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Lf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ha(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new XF(s,i);case"github.com":return new ZF(s,i);case"google.com":return new eM(s,i);case"twitter.com":return new tM(s,i,t.screenName||null);case"custom":case"anonymous":return new ha(s,null);default:return new ha(s,r,i)}}class ha{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class hk extends ha{constructor(e,n,r,i){super(e,n,r),this.username=i}}class XF extends ha{constructor(e,n){super(e,"facebook.com",n)}}class ZF extends hk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class eM extends ha{constructor(e,n){super(e,"google.com",n)}}class tM extends hk{constructor(e,n,r){super(e,"twitter.com",n,r)}}function nM(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:JF(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new bs("enroll",e,n)}static _fromMfaPendingCredential(e){return new bs("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return bs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return bs._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ze(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Ac._fromServerResponse(r,a));z(i.mfaPendingCredential,r,"internal-error");const o=bs._fromMfaPendingCredential(i.mfaPendingCredential);return new vv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await jn._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return z(n.user,r,"internal-error"),jn._forOperation(n.user,n.operationType,c);default:Dt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function rM(t,e){var n;const r=te(t),i=e;return z(e.customData.operationType,r,"argument-error"),z((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),vv._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:start",tt(t,e))}function sM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",tt(t,e))}function oM(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(t,e))}class wv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Ac._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new wv(e)}async getSession(){return bs._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Qr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Qr(this.user,oM(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Sm=new WeakMap;function aM(t){const e=te(t);return Sm.has(e)||Sm.set(e,wv._fromUser(e)),Sm.get(e)}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1e3,uM=10;class pk extends fk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);GV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,uM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pk.type="LOCAL";const Iv=pk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk extends fk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mk.type="SESSION";const zs=mk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await cM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=xc("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return window}function hM(t){lt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(){return typeof lt().WorkerGlobalScope<"u"&&typeof lt().importScripts=="function"}async function fM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mM(){return Ev()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="firebaseLocalStorageDb",gM=1,ef="firebaseLocalStorage",yk="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kf(t,e){return t.transaction([ef],e?"readwrite":"readonly").objectStore(ef)}function yM(){const t=indexedDB.deleteDatabase(gk);return new kc(t).toPromise()}function fy(){const t=indexedDB.open(gk,gM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ef,{keyPath:yk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ef)?e(r):(r.close(),await yM(),e(await fy()))})})}async function V0(t,e,n){const r=Kf(t,!0).put({[yk]:e,value:n});return new kc(r).toPromise()}async function _M(t,e){const n=Kf(t,!1).get(e),r=await new kc(n).toPromise();return r===void 0?null:r.value}function F0(t,e){const n=Kf(t,!0).delete(e);return new kc(n).toPromise()}const vM=800,wM=3;class _k{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ev()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(mM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fM(),!this.activeServiceWorker)return;this.sender=new dM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fy();return await V0(e,Zh,"1"),await F0(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_M(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Kf(i,!1).getAll();return new kc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_k.type="LOCAL";const Ju=_k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:start",tt(t,e))}function EM(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:finalize",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=500,bM=6e4,Rd=1e12;class SM{constructor(e){this.auth=e,this.counter=Rd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new AM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Rd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Rd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Rd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class AM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;z(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=xM(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},bM)},TM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function xM(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=ek("rcb"),kM=new Ec(3e4,6e4);class PM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=lt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return z(RM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&A0(lt().grecaptcha)?Promise.resolve(lt().grecaptcha):new Promise((r,i)=>{const s=lt().setTimeout(()=>{i(mt(e,"network-request-failed"))},kM.get());lt()[Am]=()=>{lt().clearTimeout(s),delete lt()[Am];const a=lt().grecaptcha;if(!a||!A0(a)){i(mt(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const h=l(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${eF()}?${Ka({onload:Am,render:"explicit",hl:n})}`;pv(o).catch(()=>{clearTimeout(s),i(mt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=lt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function RM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class CM{async load(e){return new SM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="recaptcha",NM={theme:"light",type:"image"};let DM=class{constructor(e,n,r=Object.assign({},NM)){this.parameters=r,this.type=vk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ze(e),this.isInvisible=this.parameters.size==="invisible",z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;z(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new CM:new PM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=lt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){z(hv()&&!Ev(),this.auth,"internal-error"),await OM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await OV(this.auth);z(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function OM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Os._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function VM(t,e,n){if(Xe(t.app))return Promise.reject(Et(t));const r=Ze(t),i=await Wf(r,e,te(n));return new Tv(i,s=>$f(r,s))}async function FM(t,e,n){const r=te(t);await Bf(!1,r,"phone");const i=await Wf(r.auth,e,te(n));return new Tv(i,s=>lk(r,s))}async function MM(t,e,n){const r=te(t);if(Xe(r.auth.app))return Promise.reject(Et(r.auth));const i=await Wf(r.auth,e,te(n));return new Tv(i,s=>uk(r,s))}async function Wf(t,e,n){var r;const i=await n.verify();try{z(typeof i=="string",t,"argument-error"),z(n.type===vk,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return z(o.type==="enroll",t,"internal-error"),(await iM(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{z(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return z(a,t,"missing-multi-factor-info"),(await IM(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await IF(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function LM(t,e){const n=te(t);if(Xe(n.auth.app))return Promise.reject(Et(n.auth));await mv(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs=class rh{constructor(e){this.providerId=rh.PROVIDER_ID,this.auth=Ze(e)}verifyPhoneNumber(e,n){return Wf(this.auth,e,te(n))}static credential(e,n){return Os._fromVerification(e,n)}static credentialFromResult(e){const n=e;return rh.credentialFromTaggedObject(n)}static credentialFromError(e){return rh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Os._fromTokenResponse(n,r):null}};qs.PROVIDER_ID="phone";qs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e){return e?Tn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv extends Ha{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ur(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ur(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jM(t){return ak(t.auth,new bv(t),t.bypassAuthState)}function UM(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),ok(n,new bv(t),t.bypassAuthState)}async function BM(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),mv(n,new bv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jM;case"linkViaPopup":case"linkViaRedirect":return BM;case"reauthViaPopup":case"reauthViaRedirect":return UM;default:Dt(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new Ec(2e3,1e4);async function zM(t,e,n){if(Xe(t.app))return Promise.reject(mt(t,"operation-not-supported-in-this-environment"));const r=Ze(t);Ga(t,e,ei);const i=lo(r,n);return new Or(r,"signInViaPopup",e,i).executeNotNull()}async function qM(t,e,n){const r=te(t);if(Xe(r.auth.app))return Promise.reject(mt(r.auth,"operation-not-supported-in-this-environment"));Ga(r.auth,e,ei);const i=lo(r.auth,n);return new Or(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function KM(t,e,n){const r=te(t);Ga(r.auth,e,ei);const i=lo(r.auth,n);return new Or(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Or extends wk{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Or.currentPopupAction&&Or.currentPopupAction.cancel(),Or.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=xc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Or.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$M.get())};e()}}Or.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="pendingRedirect",hu=new Map;class GM extends wk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hu.get(this.auth._key());if(!e){try{const r=await HM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hu.set(this.auth._key(),e)}return this.bypassAuthState||hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HM(t,e){const n=Ek(e),r=Ik(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Sv(t,e){return Ik(t)._set(Ek(e),"true")}function QM(){hu.clear()}function Av(t,e){hu.set(t._key(),e)}function Ik(t){return Tn(t._redirectPersistence)}function Ek(t){return Ds(WM,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e,n){return JM(t,e,n)}async function JM(t,e,n){if(Xe(t.app))return Promise.reject(Et(t));const r=Ze(t);Ga(t,e,ei),await r._initializationPromise;const i=lo(r,n);return await Sv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function XM(t,e,n){return ZM(t,e,n)}async function ZM(t,e,n){const r=te(t);if(Ga(r.auth,e,ei),Xe(r.auth.app))return Promise.reject(Et(r.auth));await r.auth._initializationPromise;const i=lo(r.auth,n);await Sv(i,r.auth);const s=await Tk(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function eL(t,e,n){return tL(t,e,n)}async function tL(t,e,n){const r=te(t);Ga(r.auth,e,ei),await r.auth._initializationPromise;const i=lo(r.auth,n);await Bf(!1,r,e.providerId),await Sv(i,r.auth);const s=await Tk(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function nL(t,e){return await Ze(t)._initializationPromise,Gf(t,e,!1)}async function Gf(t,e,n=!1){if(Xe(t.app))return Promise.reject(Et(t));const r=Ze(t),i=lo(r,e),o=await new GM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Tk(t){const e=xc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=10*60*1e3;class bk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Sk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rL&&this.cachedEventUids.clear(),this.cachedEventUids.has(M0(e))}saveEventToCache(e){this.cachedEventUids.add(M0(e)),this.lastProcessedEventTime=Date.now()}}function M0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Sk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(t,e={}){return nt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oL=/^https?/;async function aL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ak(t);for(const n of e)try{if(lL(n))return}catch{}Dt(t,"unauthorized-domain")}function lL(t){const e=Gu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oL.test(n))return!1;if(sL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new Ec(3e4,6e4);function L0(){const t=lt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cL(t){return new Promise((e,n)=>{var r,i,s;function o(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),n(mt(t,"network-request-failed"))},timeout:uL.get()})}if(!((i=(r=lt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lt().gapi)===null||s===void 0)&&s.load)o();else{const a=ek("iframefcb");return lt()[a]=()=>{gapi.load?o():n(mt(t,"network-request-failed"))},pv(`${nF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ih=null,e})}let ih=null;function dL(t){return ih=ih||cL(t),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Ec(5e3,15e3),fL="__/auth/iframe",pL="emulator/auth/iframe",mL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yL(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fv(e,pL):`https://${t.config.authDomain}/${fL}`,r={apiKey:e.apiKey,appName:t.name,v:Zi},i=gL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ka(r).slice(1)}`}async function _L(t){const e=await dL(t),n=lt().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:yL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=mt(t,"network-request-failed"),a=lt().setTimeout(()=>{s(o)},hL.get());function l(){lt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wL=500,IL=600,EL="_blank",TL="http://localhost";class j0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bL(t,e,n,r=wL,i=IL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Qe().toLowerCase();n&&(a=Hx(c)?EL:n),Wx(c)&&(e=e||TL,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(WV(c)&&a!=="_self")return SL(e||"",a),new j0(null);const h=window.open(e||"",a,d);z(h,t,"popup-blocked");try{h.focus()}catch{}return new j0(h)}function SL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="__/auth/handler",xL="emulator/auth/handler",kL=encodeURIComponent("fac");async function py(t,e,n,r,i,s){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zi,eventId:i};if(e instanceof ei){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Qa){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${kL}=${encodeURIComponent(l)}`:"";return`${PL(t)}?${Ka(a).slice(1)}${c}`}function PL({config:t}){return t.emulator?fv(t,xL):`https://${t.authDomain}/${AL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class RL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zs,this._completeRedirectFn=Gf,this._overrideRedirectResult=Av}async _openPopup(e,n,r,i){var s;Xn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await py(e,n,r,Gu(),i);return bL(e,o,xc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await py(e,n,r,Gu(),i);return hM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _L(e),r=new bk(e);return n.register("authEvent",i=>(z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[xm];o!==void 0&&n(!!o),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xx()||Gx()||bc()}}const CL=RL;class NL{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return lr("unexpected MultiFactorSessionType")}}}class xv extends NL{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new xv(e)}_finalizeEnroll(e,n,r){return sM(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return EM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class xk{constructor(){}static assertion(e){return xv._fromCredential(e)}}xk.FACTOR_ID="phone";var U0="@firebase/auth",B0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VL(t){nn(new gt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zx(t)},c=new XV(r,i,s,l);return oF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nn(new gt("auth-internal",e=>{const n=Ze(e.getProvider("auth").getImmediate());return(r=>new DL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rt(U0,B0,OL(t)),Rt(U0,B0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=5*60;BO("authIdTokenMaxAge");function ML(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=mt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ML().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VL("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=2e3;async function jL(t,e,n){var r;const{BuildInfo:i}=Ks();Xn(e.sessionId,"AuthEvent did not contain a session ID");const s=await qL(e.sessionId),o={};return bc()?o.ibi=i.packageName:Tc()?o.apn=i.packageName:Dt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,py(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function UL(t){const{BuildInfo:e}=Ks(),n={};bc()?n.iosBundleId=e.packageName:Tc()?n.androidPackageName=e.packageName:Dt(t,"operation-not-supported-in-this-environment"),await Ak(t,n)}function BL(t){const{cordova:e}=Ks();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,KV()?"_blank":"_system","location=yes"),n(i)})})}async function $L(t,e,n){const{cordova:r}=Ks();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(mt(t,"redirect-cancelled-by-user"))},LL))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Tc()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function zL(t){var e,n,r,i,s,o,a,l,c,d;const h=Ks();z(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function qL(t){const e=KL(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function KL(t){if(Xn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=20;class GL extends bk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function HL(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:JL(),postBody:null,tenantId:t.tenantId,error:mt(t,"no-auth-event")}}function QL(t,e){return my()._set(gy(t),e)}async function $0(t){const e=await my()._get(gy(t));return e&&await my()._remove(gy(t)),e}function YL(t,e){var n,r;const i=ZL(e);if(i.includes("/__/auth/callback")){const s=sh(i),o=s.firebaseError?XL(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?mt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function JL(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<WL;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function my(){return Tn(Iv)}function gy(t){return Ds("authEvent",t.config.apiKey,t.name)}function XL(t){try{return JSON.parse(t)}catch{return null}}function ZL(t){const e=sh(t),n=e.link?decodeURIComponent(e.link):void 0,r=sh(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return sh(i).link||i||r||n||t}function sh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Jo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=500;class tj{constructor(){this._redirectPersistence=zs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gf,this._overrideRedirectResult=Av}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new GL(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Dt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){zL(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),QM(),await this._originValidation(e);const o=HL(e,r,i);await QL(e,o);const a=await jL(e,o,n),l=await BL(a);return $L(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UL(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Ks(),o=setTimeout(async()=>{await $0(e),n.onEvent(z0())},ej),a=async d=>{clearTimeout(o);const h=await $0(e);let p=null;h&&(d!=null&&d.url)&&(p=YL(h,d.url)),n.onEvent(p||z0())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Ks().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const nj=tj;function z0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t,e){Ze(t)._logFramework(e)}var ij="@firebase/auth-compat",sj="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=1e3;function fu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function aj(){return fu()==="http:"||fu()==="https:"}function kk(t=Qe()){return!!((fu()==="file:"||fu()==="ionic:"||fu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lj(){return nv()||tv()}function uj(){return Tx()&&(document==null?void 0:document.documentMode)===11}function cj(t=Qe()){return/Edge\/\d+/.test(t)}function dj(t=Qe()){return uj()||cj(t)}function Pk(){try{const t=self.localStorage,e=xc();if(t)return t.setItem(e,"1"),t.removeItem(e),dj()?Gr():!0}catch{return kv()&&Gr()}return!1}function kv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function km(){return(aj()||Ff()||kk())&&!lj()&&Pk()&&!kv()}function Rk(){return kk()&&typeof document<"u"}async function hj(){return Rk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},oj);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function fj(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In={LOCAL:"local",NONE:"none",SESSION:"session"},Cl=z,Ck="persistence";function pj(t,e){if(Cl(Object.values(In).includes(e),t,"invalid-persistence-type"),nv()){Cl(e!==In.SESSION,t,"unsupported-persistence-type");return}if(tv()){Cl(e===In.NONE,t,"unsupported-persistence-type");return}if(kv()){Cl(e===In.NONE||e===In.LOCAL&&Gr(),t,"unsupported-persistence-type");return}Cl(e===In.NONE||Pk(),t,"unsupported-persistence-type")}async function yy(t){await t._initializationPromise;const e=Nk(),n=Ds(Ck,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function mj(t,e){const n=Nk();if(!n)return[];const r=Ds(Ck,t,e);switch(n.getItem(r)){case In.NONE:return[Sa];case In.LOCAL:return[Ju,zs];case In.SESSION:return[zs];default:return[]}}function Nk(){var t;try{return((t=fj())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=z;class Ti{constructor(){this.browserResolver=Tn(CL),this.cordovaResolver=Tn(nj),this.underlyingResolver=null,this._redirectPersistence=zs,this._completeRedirectFn=Gf,this._overrideRedirectResult=Av}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Rk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gj(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await hj();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){return t.unwrap()}function yj(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){return Ok(t)}function vj(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new wj(t,rM(t,e))}else if(r){const i=Ok(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function Ok(t){const{_tokenResponse:e}=t instanceof Pt?t.customData:t;if(!e)return null;if(!(t instanceof Pt)&&"temporaryProof"in e&&"phoneNumber"in e)return qs.credentialFromResult(t);const n=e.providerId;if(!n||n===Rl.PASSWORD)return null;let r;switch(n){case Rl.GOOGLE:r=sr;break;case Rl.FACEBOOK:r=ir;break;case Rl.GITHUB:r=or;break;case Rl.TWITTER:r=ar;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Aa._create(n,a):gr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new da(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Pt?r.credentialFromError(t):r.credentialFromResult(t)}function an(t,e){return e.catch(n=>{throw n instanceof Pt&&vj(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:_j(n),additionalUserInfo:nM(n),user:Hf.getOrCreate(i)}})}async function _y(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>an(t,n.confirm(r))}}class wj{constructor(e,n){this.resolver=n,this.auth=yj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return an(Dk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf=class Wl{constructor(e){this._delegate=e,this.multiFactor=aM(e)}static getOrCreate(e){return Wl.USER_MAP.has(e)||Wl.USER_MAP.set(e,new Wl(e)),Wl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return an(this.auth,lk(this._delegate,e))}async linkWithPhoneNumber(e,n){return _y(this.auth,FM(this._delegate,e,n))}async linkWithPopup(e){return an(this.auth,KM(this._delegate,e,Ti))}async linkWithRedirect(e){return await yy(Ze(this.auth)),eL(this._delegate,e,Ti)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return an(this.auth,uk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return _y(this.auth,MM(this._delegate,e,n))}reauthenticateWithPopup(e){return an(this.auth,qM(this._delegate,e,Ti))}async reauthenticateWithRedirect(e){return await yy(Ze(this.auth)),XM(this._delegate,e,Ti)}sendEmailVerification(e){return KF(this._delegate,e)}async unlink(e){return await CF(this._delegate,e),this}updateEmail(e){return QF(this._delegate,e)}updatePassword(e){return YF(this._delegate,e)}updatePhoneNumber(e){return LM(this._delegate,e)}updateProfile(e){return HF(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return WF(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Hf.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=z;class vy{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Nl(r,"invalid-api-key",{appName:e.name}),Nl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ti:void 0;this._delegate=n.initialize({options:{persistence:Ij(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(bV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){aF(this._delegate,e,n)}applyActionCode(e){return FF(this._delegate,e)}checkActionCode(e){return ck(this._delegate,e)}confirmPasswordReset(e,n){return VF(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return an(this._delegate,LF(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return qF(this._delegate,e)}isSignInWithEmailLink(e){return BF(this._delegate,e)}async getRedirectResult(){Nl(km(),this._delegate,"operation-not-supported-in-this-environment");const e=await nL(this._delegate,Ti);return e?an(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){rj(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=q0(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=q0(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return UF(this._delegate,e,n)}sendPasswordResetEmail(e,n){return OF(this._delegate,e,n||void 0)}async setPersistence(e){pj(this._delegate,e);let n;switch(e){case In.SESSION:n=zs;break;case In.LOCAL:n=await Tn(Ju)._isAvailable()?Ju:Iv;break;case In.NONE:n=Sa;break;default:return Dt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return an(this._delegate,RF(this._delegate))}signInWithCredential(e){return an(this._delegate,$f(this._delegate,e))}signInWithCustomToken(e){return an(this._delegate,DF(this._delegate,e))}signInWithEmailAndPassword(e,n){return an(this._delegate,jF(this._delegate,e,n))}signInWithEmailLink(e,n){return an(this._delegate,$F(this._delegate,e,n))}signInWithPhoneNumber(e,n){return _y(this._delegate,VM(this._delegate,e,n))}async signInWithPopup(e){return Nl(km(),this._delegate,"operation-not-supported-in-this-environment"),an(this._delegate,zM(this._delegate,e,Ti))}async signInWithRedirect(e){return Nl(km(),this._delegate,"operation-not-supported-in-this-environment"),await yy(this._delegate),YM(this._delegate,e,Ti)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return MF(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}vy.Persistence=In;function q0(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Hf.getOrCreate(o)),error:e,complete:n}}function Ij(t,e){const n=mj(t,e);if(typeof self<"u"&&!n.includes(Ju)&&n.push(Ju),typeof window<"u")for(const r of[Iv,zs])n.includes(r)||n.push(r);return n.includes(Sa)||n.push(Sa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.providerId="phone",this._delegate=new qs(Dk(ht.auth()))}static credential(e,n){return qs.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Pv.PHONE_SIGN_IN_METHOD=qs.PHONE_SIGN_IN_METHOD;Pv.PROVIDER_ID=qs.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=z;class Tj{constructor(e,n,r=ht.app()){var i;Ej((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new DM(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="auth-compat";function Sj(t){t.INTERNAL.registerComponent(new gt(bj,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new vy(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ao.EMAIL_SIGNIN,PASSWORD_RESET:Ao.PASSWORD_RESET,RECOVER_EMAIL:Ao.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ao.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ao.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ao.VERIFY_EMAIL}},EmailAuthProvider:es,FacebookAuthProvider:ir,GithubAuthProvider:or,GoogleAuthProvider:sr,OAuthProvider:da,SAMLAuthProvider:Jh,PhoneAuthProvider:Pv,PhoneMultiFactorGenerator:xk,RecaptchaVerifier:Tj,TwitterAuthProvider:ar,Auth:vy,AuthCredential:Ha,Error:Pt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(ij,sj)}Sj(ht);var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,Vk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,E){function w(){}w.prototype=E.prototype,v.D=E.prototype,v.prototype=new w,v.prototype.constructor=v,v.C=function(k,R,N){for(var x=Array(arguments.length-2),K=2;K<arguments.length;K++)x[K-2]=arguments[K];return E.prototype[R].apply(k,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,E,w){w||(w=0);var k=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)k[R]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(R=0;16>R;++R)k[R]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;E=v.g[0],w=v.g[1],R=v.g[2];var N=v.g[3],x=E+(N^w&(R^N))+k[0]+3614090360&4294967295;E=w+(x<<7&4294967295|x>>>25),x=N+(R^E&(w^R))+k[1]+3905402710&4294967295,N=E+(x<<12&4294967295|x>>>20),x=R+(w^N&(E^w))+k[2]+606105819&4294967295,R=N+(x<<17&4294967295|x>>>15),x=w+(E^R&(N^E))+k[3]+3250441966&4294967295,w=R+(x<<22&4294967295|x>>>10),x=E+(N^w&(R^N))+k[4]+4118548399&4294967295,E=w+(x<<7&4294967295|x>>>25),x=N+(R^E&(w^R))+k[5]+1200080426&4294967295,N=E+(x<<12&4294967295|x>>>20),x=R+(w^N&(E^w))+k[6]+2821735955&4294967295,R=N+(x<<17&4294967295|x>>>15),x=w+(E^R&(N^E))+k[7]+4249261313&4294967295,w=R+(x<<22&4294967295|x>>>10),x=E+(N^w&(R^N))+k[8]+1770035416&4294967295,E=w+(x<<7&4294967295|x>>>25),x=N+(R^E&(w^R))+k[9]+2336552879&4294967295,N=E+(x<<12&4294967295|x>>>20),x=R+(w^N&(E^w))+k[10]+4294925233&4294967295,R=N+(x<<17&4294967295|x>>>15),x=w+(E^R&(N^E))+k[11]+2304563134&4294967295,w=R+(x<<22&4294967295|x>>>10),x=E+(N^w&(R^N))+k[12]+1804603682&4294967295,E=w+(x<<7&4294967295|x>>>25),x=N+(R^E&(w^R))+k[13]+4254626195&4294967295,N=E+(x<<12&4294967295|x>>>20),x=R+(w^N&(E^w))+k[14]+2792965006&4294967295,R=N+(x<<17&4294967295|x>>>15),x=w+(E^R&(N^E))+k[15]+1236535329&4294967295,w=R+(x<<22&4294967295|x>>>10),x=E+(R^N&(w^R))+k[1]+4129170786&4294967295,E=w+(x<<5&4294967295|x>>>27),x=N+(w^R&(E^w))+k[6]+3225465664&4294967295,N=E+(x<<9&4294967295|x>>>23),x=R+(E^w&(N^E))+k[11]+643717713&4294967295,R=N+(x<<14&4294967295|x>>>18),x=w+(N^E&(R^N))+k[0]+3921069994&4294967295,w=R+(x<<20&4294967295|x>>>12),x=E+(R^N&(w^R))+k[5]+3593408605&4294967295,E=w+(x<<5&4294967295|x>>>27),x=N+(w^R&(E^w))+k[10]+38016083&4294967295,N=E+(x<<9&4294967295|x>>>23),x=R+(E^w&(N^E))+k[15]+3634488961&4294967295,R=N+(x<<14&4294967295|x>>>18),x=w+(N^E&(R^N))+k[4]+3889429448&4294967295,w=R+(x<<20&4294967295|x>>>12),x=E+(R^N&(w^R))+k[9]+568446438&4294967295,E=w+(x<<5&4294967295|x>>>27),x=N+(w^R&(E^w))+k[14]+3275163606&4294967295,N=E+(x<<9&4294967295|x>>>23),x=R+(E^w&(N^E))+k[3]+4107603335&4294967295,R=N+(x<<14&4294967295|x>>>18),x=w+(N^E&(R^N))+k[8]+1163531501&4294967295,w=R+(x<<20&4294967295|x>>>12),x=E+(R^N&(w^R))+k[13]+2850285829&4294967295,E=w+(x<<5&4294967295|x>>>27),x=N+(w^R&(E^w))+k[2]+4243563512&4294967295,N=E+(x<<9&4294967295|x>>>23),x=R+(E^w&(N^E))+k[7]+1735328473&4294967295,R=N+(x<<14&4294967295|x>>>18),x=w+(N^E&(R^N))+k[12]+2368359562&4294967295,w=R+(x<<20&4294967295|x>>>12),x=E+(w^R^N)+k[5]+4294588738&4294967295,E=w+(x<<4&4294967295|x>>>28),x=N+(E^w^R)+k[8]+2272392833&4294967295,N=E+(x<<11&4294967295|x>>>21),x=R+(N^E^w)+k[11]+1839030562&4294967295,R=N+(x<<16&4294967295|x>>>16),x=w+(R^N^E)+k[14]+4259657740&4294967295,w=R+(x<<23&4294967295|x>>>9),x=E+(w^R^N)+k[1]+2763975236&4294967295,E=w+(x<<4&4294967295|x>>>28),x=N+(E^w^R)+k[4]+1272893353&4294967295,N=E+(x<<11&4294967295|x>>>21),x=R+(N^E^w)+k[7]+4139469664&4294967295,R=N+(x<<16&4294967295|x>>>16),x=w+(R^N^E)+k[10]+3200236656&4294967295,w=R+(x<<23&4294967295|x>>>9),x=E+(w^R^N)+k[13]+681279174&4294967295,E=w+(x<<4&4294967295|x>>>28),x=N+(E^w^R)+k[0]+3936430074&4294967295,N=E+(x<<11&4294967295|x>>>21),x=R+(N^E^w)+k[3]+3572445317&4294967295,R=N+(x<<16&4294967295|x>>>16),x=w+(R^N^E)+k[6]+76029189&4294967295,w=R+(x<<23&4294967295|x>>>9),x=E+(w^R^N)+k[9]+3654602809&4294967295,E=w+(x<<4&4294967295|x>>>28),x=N+(E^w^R)+k[12]+3873151461&4294967295,N=E+(x<<11&4294967295|x>>>21),x=R+(N^E^w)+k[15]+530742520&4294967295,R=N+(x<<16&4294967295|x>>>16),x=w+(R^N^E)+k[2]+3299628645&4294967295,w=R+(x<<23&4294967295|x>>>9),x=E+(R^(w|~N))+k[0]+4096336452&4294967295,E=w+(x<<6&4294967295|x>>>26),x=N+(w^(E|~R))+k[7]+1126891415&4294967295,N=E+(x<<10&4294967295|x>>>22),x=R+(E^(N|~w))+k[14]+2878612391&4294967295,R=N+(x<<15&4294967295|x>>>17),x=w+(N^(R|~E))+k[5]+4237533241&4294967295,w=R+(x<<21&4294967295|x>>>11),x=E+(R^(w|~N))+k[12]+1700485571&4294967295,E=w+(x<<6&4294967295|x>>>26),x=N+(w^(E|~R))+k[3]+2399980690&4294967295,N=E+(x<<10&4294967295|x>>>22),x=R+(E^(N|~w))+k[10]+4293915773&4294967295,R=N+(x<<15&4294967295|x>>>17),x=w+(N^(R|~E))+k[1]+2240044497&4294967295,w=R+(x<<21&4294967295|x>>>11),x=E+(R^(w|~N))+k[8]+1873313359&4294967295,E=w+(x<<6&4294967295|x>>>26),x=N+(w^(E|~R))+k[15]+4264355552&4294967295,N=E+(x<<10&4294967295|x>>>22),x=R+(E^(N|~w))+k[6]+2734768916&4294967295,R=N+(x<<15&4294967295|x>>>17),x=w+(N^(R|~E))+k[13]+1309151649&4294967295,w=R+(x<<21&4294967295|x>>>11),x=E+(R^(w|~N))+k[4]+4149444226&4294967295,E=w+(x<<6&4294967295|x>>>26),x=N+(w^(E|~R))+k[11]+3174756917&4294967295,N=E+(x<<10&4294967295|x>>>22),x=R+(E^(N|~w))+k[2]+718787259&4294967295,R=N+(x<<15&4294967295|x>>>17),x=w+(N^(R|~E))+k[9]+3951481745&4294967295,v.g[0]=v.g[0]+E&4294967295,v.g[1]=v.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+N&4294967295}r.prototype.u=function(v,E){E===void 0&&(E=v.length);for(var w=E-this.blockSize,k=this.B,R=this.h,N=0;N<E;){if(R==0)for(;N<=w;)i(this,v,N),N+=this.blockSize;if(typeof v=="string"){for(;N<E;)if(k[R++]=v.charCodeAt(N++),R==this.blockSize){i(this,k),R=0;break}}else for(;N<E;)if(k[R++]=v[N++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var E=1;E<v.length-8;++E)v[E]=0;var w=8*this.o;for(E=v.length-8;E<v.length;++E)v[E]=w&255,w/=256;for(this.u(v),v=Array(16),E=w=0;4>E;++E)for(var k=0;32>k;k+=8)v[w++]=this.g[E]>>>k&255;return v};function s(v,E){var w=a;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=E(v)}function o(v,E){this.h=E;for(var w=[],k=!0,R=v.length-1;0<=R;R--){var N=v[R]|0;k&&N==E||(w[R]=N,k=!1)}this.g=w}var a={};function l(v){return-128<=v&&128>v?s(v,function(E){return new o([E|0],0>E?-1:0)}):new o([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return h;if(0>v)return P(c(-v));for(var E=[],w=1,k=0;v>=w;k++)E[k]=v/w|0,w*=4294967296;return new o(E,0)}function d(v,E){if(v.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v.charAt(0)=="-")return P(d(v.substring(1),E));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(E,8)),k=h,R=0;R<v.length;R+=8){var N=Math.min(8,v.length-R),x=parseInt(v.substring(R,R+N),E);8>N?(N=c(Math.pow(E,N)),k=k.j(N).add(c(x))):(k=k.j(w),k=k.add(c(x)))}return k}var h=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-P(this).m();for(var v=0,E=1,w=0;w<this.g.length;w++){var k=this.i(w);v+=(0<=k?k:4294967296+k)*E,E*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b(this))return"0";if(S(this))return"-"+P(this).toString(v);for(var E=c(Math.pow(v,6)),w=this,k="";;){var R=C(w,E).g;w=I(w,R.j(E));var N=((0<w.g.length?w.g[0]:w.h)>>>0).toString(v);if(w=R,b(w))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function b(v){if(v.h!=0)return!1;for(var E=0;E<v.g.length;E++)if(v.g[E]!=0)return!1;return!0}function S(v){return v.h==-1}t.l=function(v){return v=I(this,v),S(v)?-1:b(v)?0:1};function P(v){for(var E=v.g.length,w=[],k=0;k<E;k++)w[k]=~v.g[k];return new o(w,~v.h).add(p)}t.abs=function(){return S(this)?P(this):this},t.add=function(v){for(var E=Math.max(this.g.length,v.g.length),w=[],k=0,R=0;R<=E;R++){var N=k+(this.i(R)&65535)+(v.i(R)&65535),x=(N>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);k=x>>>16,N&=65535,x&=65535,w[R]=x<<16|N}return new o(w,w[w.length-1]&-2147483648?-1:0)};function I(v,E){return v.add(P(E))}t.j=function(v){if(b(this)||b(v))return h;if(S(this))return S(v)?P(this).j(P(v)):P(P(this).j(v));if(S(v))return P(this.j(P(v)));if(0>this.l(g)&&0>v.l(g))return c(this.m()*v.m());for(var E=this.g.length+v.g.length,w=[],k=0;k<2*E;k++)w[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<v.g.length;R++){var N=this.i(k)>>>16,x=this.i(k)&65535,K=v.i(R)>>>16,we=v.i(R)&65535;w[2*k+2*R]+=x*we,y(w,2*k+2*R),w[2*k+2*R+1]+=N*we,y(w,2*k+2*R+1),w[2*k+2*R+1]+=x*K,y(w,2*k+2*R+1),w[2*k+2*R+2]+=N*K,y(w,2*k+2*R+2)}for(k=0;k<E;k++)w[k]=w[2*k+1]<<16|w[2*k];for(k=E;k<2*E;k++)w[k]=0;return new o(w,0)};function y(v,E){for(;(v[E]&65535)!=v[E];)v[E+1]+=v[E]>>>16,v[E]&=65535,E++}function A(v,E){this.g=v,this.h=E}function C(v,E){if(b(E))throw Error("division by zero");if(b(v))return new A(h,h);if(S(v))return E=C(P(v),E),new A(P(E.g),P(E.h));if(S(E))return E=C(v,P(E)),new A(P(E.g),E.h);if(30<v.g.length){if(S(v)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var w=p,k=E;0>=k.l(v);)w=O(w),k=O(k);var R=D(w,1),N=D(k,1);for(k=D(k,2),w=D(w,2);!b(k);){var x=N.add(k);0>=x.l(v)&&(R=R.add(w),N=x),k=D(k,1),w=D(w,1)}return E=I(v,R.j(E)),new A(R,E)}for(R=h;0<=v.l(E);){for(w=Math.max(1,Math.floor(v.m()/E.m())),k=Math.ceil(Math.log(w)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=c(w),x=N.j(E);S(x)||0<x.l(v);)w-=k,N=c(w),x=N.j(E);b(N)&&(N=p),R=R.add(N),v=I(v,x)}return new A(R,v)}t.A=function(v){return C(this,v).h},t.and=function(v){for(var E=Math.max(this.g.length,v.g.length),w=[],k=0;k<E;k++)w[k]=this.i(k)&v.i(k);return new o(w,this.h&v.h)},t.or=function(v){for(var E=Math.max(this.g.length,v.g.length),w=[],k=0;k<E;k++)w[k]=this.i(k)|v.i(k);return new o(w,this.h|v.h)},t.xor=function(v){for(var E=Math.max(this.g.length,v.g.length),w=[],k=0;k<E;k++)w[k]=this.i(k)^v.i(k);return new o(w,this.h^v.h)};function O(v){for(var E=v.g.length+1,w=[],k=0;k<E;k++)w[k]=v.i(k)<<1|v.i(k-1)>>>31;return new o(w,v.h)}function D(v,E){var w=E>>5;E%=32;for(var k=v.g.length-w,R=[],N=0;N<k;N++)R[N]=0<E?v.i(N+w)>>>E|v.i(N+w+1)<<32-E:v.i(N+w);return new o(R,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Vs=o}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fk,Gl,Mk,oh,wy,Lk,jk,Uk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cd=="object"&&Cd];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var V=u[T];if(!(V in m))break e;m=m[V]}u=u[u.length-1],T=m[u],f=f(T),f!=T&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,T=!1,V={next:function(){if(!T&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return T=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,T),u.apply(f,V)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function b(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,V,L){for(var q=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)q[ke-2]=arguments[ke];return f.prototype[V].apply(T,q)}}function S(u){const f=u.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=u[T];return m}return[]}function P(u,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const V=u.length||0,L=T.length||0;u.length=V+L;for(let q=0;q<L;q++)u[V+q]=T[q]}else u.push(T)}}class I{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(u){return/^[\s\xa0]*$/.test(u)}function A(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var O=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function D(u,f,m){for(const T in u)f.call(m,u[T],T,u)}function v(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function E(u){const f={};for(const m in u)f[m]=u[m];return f}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let m,T;for(let V=1;V<arguments.length;V++){T=arguments[V];for(m in T)u[m]=T[m];for(let L=0;L<w.length;L++)m=w[L],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function R(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function x(){var u=H;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,m){const T=we.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var we=new I(()=>new Ie,u=>u.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,B=!1,H=new K,ne=()=>{const u=a.Promise.resolve(void 0);Z=()=>{u.then(Ee)}};var Ee=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(m){N(m)}var f=we;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}B=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qe(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};var Un=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Bn(u,f){if(qe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{C(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:yn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Bn.aa.h.call(this)}}b(Bn,qe);var yn={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $n="closure_listenable_"+(1e6*Math.random()|0),wp=0;function Ip(u,f,m,T,V){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=V,this.key=++wp,this.da=this.fa=!1}function mo(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function go(u){this.src=u,this.g={},this.h=0}go.prototype.add=function(u,f,m,T,V){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var q=sl(u,f,T,V);return-1<q?(f=u[q],m||(f.fa=!1)):(f=new Ip(f,this.src,L,!!T,V),f.fa=m,u.push(f)),f};function il(u,f){var m=f.type;if(m in u.g){var T=u.g[m],V=Array.prototype.indexOf.call(T,f,void 0),L;(L=0<=V)&&Array.prototype.splice.call(T,V,1),L&&(mo(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function sl(u,f,m,T){for(var V=0;V<u.length;++V){var L=u[V];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==T)return V}return-1}var ol="closure_lm_"+(1e6*Math.random()|0),yo={};function Q(u,f,m,T,V){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Q(u,f[L],m,T,V);return null}return m=Yw(m),u&&u[$n]?u.K(f,m,c(T)?!!T.capture:!1,V):oe(u,f,m,!1,T,V)}function oe(u,f,m,T,V,L){if(!f)throw Error("Invalid event type");var q=c(V)?!!V.capture:!!V,ke=Ep(u);if(ke||(u[ol]=ke=new go(u)),m=ke.add(f,m,T,q,L),m.proxy)return m;if(T=le(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)Un||(V=q),V===void 0&&(V=!1),u.addEventListener(f.toString(),T,V);else if(u.attachEvent)u.attachEvent(_o(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function le(){function u(m){return f.call(u.src,u.listener,m)}const f=al;return u}function ue(u,f,m,T,V){if(Array.isArray(f))for(var L=0;L<f.length;L++)ue(u,f[L],m,T,V);else T=c(T)?!!T.capture:!!T,m=Yw(m),u&&u[$n]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=sl(L,m,T,V),-1<m&&(mo(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ep(u))&&(f=u.g[f.toString()],u=-1,f&&(u=sl(f,m,T,V)),(m=-1<u?f[u]:null)&&Re(m))}function Re(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[$n])il(f.i,u);else{var m=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(m,T,u.capture):f.detachEvent?f.detachEvent(_o(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=Ep(f))?(il(m,u),m.h==0&&(m.src=null,f[ol]=null)):mo(u)}}}function _o(u){return u in yo?yo[u]:yo[u]="on"+u}function al(u,f){if(u.da)u=!0;else{f=new Bn(f,this);var m=u.listener,T=u.ha||u.src;u.fa&&Re(u),u=m.call(T,f)}return u}function Ep(u){return u=u[ol],u instanceof go?u:null}var Tp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yw(u){return typeof u=="function"?u:(u[Tp]||(u[Tp]=function(f){return u.handleEvent(f)}),u[Tp])}function Ot(){Te.call(this),this.i=new go(this),this.M=this,this.F=null}b(Ot,Te),Ot.prototype[$n]=!0,Ot.prototype.removeEventListener=function(u,f,m,T){ue(this,u,f,m,T)};function Kt(u,f){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new qe(f,u);else if(f instanceof qe)f.target=f.target||u;else{var V=f;f=new qe(T,u),k(f,V)}if(V=!0,m)for(var L=m.length-1;0<=L;L--){var q=f.g=m[L];V=qc(q,T,!0,f)&&V}if(q=f.g=u,V=qc(q,T,!0,f)&&V,V=qc(q,T,!1,f)&&V,m)for(L=0;L<m.length;L++)q=f.g=m[L],V=qc(q,T,!1,f)&&V}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],T=0;T<m.length;T++)mo(m[T]);delete u.g[f],u.h--}}this.F=null},Ot.prototype.K=function(u,f,m,T){return this.i.add(String(u),f,!1,m,T)},Ot.prototype.L=function(u,f,m,T){return this.i.add(String(u),f,!0,m,T)};function qc(u,f,m,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,L=0;L<f.length;++L){var q=f[L];if(q&&!q.da&&q.capture==m){var ke=q.listener,bt=q.ha||q.src;q.fa&&il(u.i,q),V=ke.call(bt,T)!==!1&&V}}return V&&!T.defaultPrevented}function Jw(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Xw(u){u.g=Jw(()=>{u.g=null,u.i&&(u.i=!1,Xw(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class qC extends Te{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Xw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ll(u){Te.call(this),this.h=u,this.g={}}b(ll,Te);var Zw=[];function eI(u){D(u.g,function(f,m){this.g.hasOwnProperty(m)&&Re(f)},u),u.g={}}ll.prototype.N=function(){ll.aa.N.call(this),eI(this)},ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bp=a.JSON.stringify,KC=a.JSON.parse,WC=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Sp(){}Sp.prototype.h=null;function tI(u){return u.h||(u.h=u.i())}function nI(){}var ul={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ap(){qe.call(this,"d")}b(Ap,qe);function xp(){qe.call(this,"c")}b(xp,qe);var ss={},rI=null;function Kc(){return rI=rI||new Ot}ss.La="serverreachability";function iI(u){qe.call(this,ss.La,u)}b(iI,qe);function cl(u){const f=Kc();Kt(f,new iI(f))}ss.STAT_EVENT="statevent";function sI(u,f){qe.call(this,ss.STAT_EVENT,u),this.stat=f}b(sI,qe);function Wt(u){const f=Kc();Kt(f,new sI(f,u))}ss.Ma="timingevent";function oI(u,f){qe.call(this,ss.Ma,u),this.size=f}b(oI,qe);function dl(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function hl(){this.g=!0}hl.prototype.xa=function(){this.g=!1};function GC(u,f,m,T,V,L){u.info(function(){if(u.g)if(L)for(var q="",ke=L.split("&"),bt=0;bt<ke.length;bt++){var _e=ke[bt].split("=");if(1<_e.length){var Vt=_e[0];_e=_e[1];var Ft=Vt.split("_");q=2<=Ft.length&&Ft[1]=="type"?q+(Vt+"="+_e+"&"):q+(Vt+"=redacted&")}}else q=null;else q=L;return"XMLHTTP REQ ("+T+") [attempt "+V+"]: "+f+`
`+m+`
`+q})}function HC(u,f,m,T,V,L,q){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+V+"]: "+f+`
`+m+`
`+L+" "+q})}function vo(u,f,m,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+YC(u,m)+(T?" "+T:"")})}function QC(u,f){u.info(function(){return"TIMEOUT: "+f})}hl.prototype.info=function(){};function YC(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var V=T[1];if(Array.isArray(V)&&!(1>V.length)){var L=V[0];if(L!="noop"&&L!="stop"&&L!="close")for(var q=1;q<V.length;q++)V[q]=""}}}}return bp(m)}catch{return f}}var Wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kp;function Gc(){}b(Gc,Sp),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},kp=new Gc;function ii(u,f,m,T){this.j=u,this.i=f,this.l=m,this.R=T||1,this.U=new ll(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lI}function lI(){this.i=null,this.g="",this.h=!1}var uI={},Pp={};function Rp(u,f,m){u.L=1,u.v=Jc(Ir(f)),u.m=m,u.P=!0,cI(u,null)}function cI(u,f){u.F=Date.now(),Hc(u),u.A=Ir(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),bI(m.i,"t",T),u.C=0,m=u.j.J,u.h=new lI,u.g=$I(u.j,m?f:null,!u.m),0<u.O&&(u.M=new qC(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,T=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Zw[0]=V.toString()),V=Zw);for(var L=0;L<V.length;L++){var q=Q(m,V[L],T||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),cl(),GC(u.i,u.u,u.A,u.l,u.R,u.m)}ii.prototype.ca=function(u){u=u.target;const f=this.M;f&&Er(u)==3?f.j():this.Y(u)},ii.prototype.Y=function(u){try{if(u==this.g)e:{const Ft=Er(this.g);var f=this.g.Ba();const Eo=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||CI(this.g)))){this.J||Ft!=4||f==7||(f==8||0>=Eo?cl(3):cl(2)),Cp(this);var m=this.g.Z();this.X=m;t:if(dI(this)){var T=CI(this.g);u="";var V=T.length,L=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),fl(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(L&&f==V-1)});T.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,HC(this.i,this.u,this.A,this.l,this.R,Ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,bt=this.g;if((ke=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ke)){var _e=ke;break t}}_e=null}if(m=_e)vo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Np(this,m);else{this.o=!1,this.s=3,Wt(12),os(this),fl(this);break e}}if(this.P){m=!0;let zn;for(;!this.J&&this.C<q.length;)if(zn=JC(this,q),zn==Pp){Ft==4&&(this.s=4,Wt(14),m=!1),vo(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==uI){this.s=4,Wt(15),vo(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else vo(this.i,this.l,zn,null),Np(this,zn);if(dI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||q.length!=0||this.h.h||(this.s=1,Wt(16),m=!1),this.o=this.o&&m,!m)vo(this.i,this.l,q,"[Invalid Chunked Response]"),os(this),fl(this);else if(0<q.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Lp(Vt),Vt.M=!0,Wt(11))}}else vo(this.i,this.l,q,null),Np(this,q);Ft==4&&os(this),this.o&&!this.J&&(Ft==4?LI(this.j,this):(this.o=!1,Hc(this)))}else p1(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),os(this),fl(this)}}}catch{}finally{}};function dI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function JC(u,f){var m=u.C,T=f.indexOf(`
`,m);return T==-1?Pp:(m=Number(f.substring(m,T)),isNaN(m)?uI:(T+=1,T+m>f.length?Pp:(f=f.slice(T,T+m),u.C=T+m,f)))}ii.prototype.cancel=function(){this.J=!0,os(this)};function Hc(u){u.S=Date.now()+u.I,hI(u,u.I)}function hI(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=dl(p(u.ba,u),f)}function Cp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ii.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(QC(this.i,this.A),this.L!=2&&(cl(),Wt(17)),os(this),this.s=2,fl(this)):hI(this,this.S-u)};function fl(u){u.j.G==0||u.J||LI(u.j,u)}function os(u){Cp(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,eI(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Np(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Dp(m.h,u))){if(!u.K&&Dp(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var V=T;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)rd(m),td(m);else break e;Mp(m),Wt(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=dl(p(m.Za,m),6e3));if(1>=mI(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ls(m,11)}else if((u.K||m.g==u)&&rd(m),!y(f))for(V=m.Da.g.parse(f),f=0;f<V.length;f++){let _e=V[f];if(m.T=_e[0],_e=_e[1],m.G==2)if(_e[0]=="c"){m.K=_e[1],m.ia=_e[2];const Vt=_e[3];Vt!=null&&(m.la=Vt,m.j.info("VER="+m.la));const Ft=_e[4];Ft!=null&&(m.Aa=Ft,m.j.info("SVER="+m.Aa));const Eo=_e[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(T=1.5*Eo,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const zn=u.g;if(zn){const sd=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sd){var L=T.h;L.g||sd.indexOf("spdy")==-1&&sd.indexOf("quic")==-1&&sd.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Op(L,L.h),L.h=null))}if(T.D){const jp=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;jp&&(T.ya=jp,De(T.I,T.D,jp))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var q=u;if(T.qa=BI(T,T.J?T.ia:null,T.W),q.K){gI(T.h,q);var ke=q,bt=T.L;bt&&(ke.I=bt),ke.B&&(Cp(ke),Hc(ke)),T.g=q}else FI(T);0<m.i.length&&nd(m)}else _e[0]!="stop"&&_e[0]!="close"||ls(m,7);else m.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?ls(m,7):Fp(m):_e[0]!="noop"&&m.l&&m.l.ta(_e),m.v=0)}}cl(4)}catch{}}var XC=class{constructor(u,f){this.g=u,this.map=f}};function fI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function mI(u){return u.h?1:u.g?u.g.size:0}function Dp(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Op(u,f){u.g?u.g.add(f):u.h=f}function gI(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}fI.prototype.cancel=function(){if(this.i=yI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function yI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function ZC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,T=0;T<m;T++)f.push(u[T]);return f}f=[],m=0;for(T in u)f[m++]=u[T];return f}function e1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const T in u)f[m++]=T;return f}}}function _I(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=e1(u),T=ZC(u),V=T.length,L=0;L<V;L++)f.call(void 0,T[L],m&&m[L],u)}var vI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t1(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),V=null;if(0<=T){var L=u[m].substring(0,T);V=u[m].substring(T+1)}else L=u[m];f(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function as(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof as){this.h=u.h,Qc(this,u.j),this.o=u.o,this.g=u.g,Yc(this,u.s),this.l=u.l;var f=u.i,m=new gl;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),wI(this,m),this.m=u.m}else u&&(f=String(u).match(vI))?(this.h=!1,Qc(this,f[1]||"",!0),this.o=pl(f[2]||""),this.g=pl(f[3]||"",!0),Yc(this,f[4]),this.l=pl(f[5]||"",!0),wI(this,f[6]||"",!0),this.m=pl(f[7]||"")):(this.h=!1,this.i=new gl(null,this.h))}as.prototype.toString=function(){var u=[],f=this.j;f&&u.push(ml(f,II,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(ml(f,II,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(ml(m,m.charAt(0)=="/"?i1:r1,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",ml(m,o1)),u.join("")};function Ir(u){return new as(u)}function Qc(u,f,m){u.j=m?pl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Yc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function wI(u,f,m){f instanceof gl?(u.i=f,a1(u.i,u.h)):(m||(f=ml(f,s1)),u.i=new gl(f,u.h))}function De(u,f,m){u.i.set(f,m)}function Jc(u){return De(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function pl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ml(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,n1),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function n1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var II=/[#\/\?@]/g,r1=/[#\?:]/g,i1=/[#\?]/g,s1=/[#\?@]/g,o1=/#/g;function gl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function si(u){u.g||(u.g=new Map,u.h=0,u.i&&t1(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=gl.prototype,t.add=function(u,f){si(this),this.i=null,u=wo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function EI(u,f){si(u),f=wo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function TI(u,f){return si(u),f=wo(u,f),u.g.has(f)}t.forEach=function(u,f){si(this),this.g.forEach(function(m,T){m.forEach(function(V){u.call(f,V,T,this)},this)},this)},t.na=function(){si(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const V=u[T];for(let L=0;L<V.length;L++)m.push(f[T])}return m},t.V=function(u){si(this);let f=[];if(typeof u=="string")TI(this,u)&&(f=f.concat(this.g.get(wo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return si(this),this.i=null,u=wo(this,u),TI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function bI(u,f,m){EI(u,f),0<m.length&&(u.i=null,u.g.set(wo(u,f),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const L=encodeURIComponent(String(T)),q=this.V(T);for(T=0;T<q.length;T++){var V=L;q[T]!==""&&(V+="="+encodeURIComponent(String(q[T]))),u.push(V)}}return this.i=u.join("&")};function wo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function a1(u,f){f&&!u.j&&(si(u),u.i=null,u.g.forEach(function(m,T){var V=T.toLowerCase();T!=V&&(EI(this,T),bI(this,V,m))},u)),u.j=f}function l1(u,f){const m=new hl;if(a.Image){const T=new Image;T.onload=g(oi,m,"TestLoadImage: loaded",!0,f,T),T.onerror=g(oi,m,"TestLoadImage: error",!1,f,T),T.onabort=g(oi,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(oi,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function u1(u,f){const m=new hl,T=new AbortController,V=setTimeout(()=>{T.abort(),oi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(L=>{clearTimeout(V),L.ok?oi(m,"TestPingServer: ok",!0,f):oi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),oi(m,"TestPingServer: error",!1,f)})}function oi(u,f,m,T,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),T(m)}catch{}}function c1(){this.g=new WC}function d1(u,f,m){const T=m||"";try{_I(u,function(V,L){let q=V;c(V)&&(q=bp(V)),f.push(T+L+"="+encodeURIComponent(q))})}catch(V){throw f.push(T+"type="+encodeURIComponent("_badmap")),V}}function Xc(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Xc,Sp),Xc.prototype.g=function(){return new Zc(this.l,this.j)},Xc.prototype.i=function(u){return function(){return u}}({});function Zc(u,f){Ot.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Zc,Ot),t=Zc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,_l(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,_l(this)),this.g&&(this.readyState=3,_l(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;SI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function SI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?yl(this):_l(this),this.readyState==3&&SI(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,yl(this))},t.Qa=function(u){this.g&&(this.response=u,yl(this))},t.ga=function(){this.g&&yl(this)};function yl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,_l(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function _l(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function AI(u){let f="";return D(u,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function Vp(u,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=AI(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):De(u,f,m))}function Ye(u){Ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ye,Ot);var h1=/^https?$/i,f1=["POST","PUT"];t=Ye.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kp.g(),this.v=this.o?tI(this.o):tI(kp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){xI(this,L);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var V in T)m.set(V,T[V]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())m.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(f1,f,void 0))||T||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,q]of m)this.g.setRequestHeader(L,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{RI(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){xI(this,L)}};function xI(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,kI(u),ed(u)}function kI(u){u.A||(u.A=!0,Kt(u,"complete"),Kt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Kt(this,"complete"),Kt(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?PI(this):this.bb())},t.bb=function(){PI(this)};function PI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)Jw(u.Ea,0,u);else if(Kt(u,"readystatechange"),Er(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=q===0){var V=String(u.D).match(vI)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),T=!h1.test(V?V.toLowerCase():"")}m=T}if(m)Kt(u,"complete"),Kt(u,"success");else{u.m=6;try{var L=2<Er(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",kI(u)}}finally{ed(u)}}}}function ed(u,f){if(u.g){RI(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Kt(u,"ready");try{m.onreadystatechange=T}catch{}}}function RI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),KC(f)}};function CI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function p1(u){const f={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(y(u[T]))continue;var m=R(u[T]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[V]||[];f[V]=L,L.push(m)}v(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function NI(u){this.Aa=0,this.i=[],this.j=new hl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,u),this.cb=vl("retryDelaySeedMs",1e4,u),this.Wa=vl("forwardChannelMaxRetries",2,u),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new fI(u&&u.concurrentRequestLimit),this.Da=new c1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=NI.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,T){Wt(0),this.W=u,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=BI(this,null,this.W),nd(this)};function Fp(u){if(DI(u),u.G==3){var f=u.U++,m=Ir(u.I);if(De(m,"SID",u.K),De(m,"RID",f),De(m,"TYPE","terminate"),wl(u,m),f=new ii(u,u.j,f),f.L=2,f.v=Jc(Ir(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=$I(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Hc(f)}UI(u)}function td(u){u.g&&(Lp(u),u.g.cancel(),u.g=null)}function DI(u){td(u),u.u&&(a.clearTimeout(u.u),u.u=null),rd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nd(u){if(!pI(u.h)&&!u.s){u.s=!0;var f=u.Ga;Z||ne(),B||(Z(),B=!0),H.add(f,u),u.B=0}}function m1(u,f){return mI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=dl(p(u.Ga,u,f),jI(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new ii(this,this.j,u);let L=this.o;if(this.S&&(L?(L=E(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(V.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=VI(this,V,f),m=Ir(this.I),De(m,"RID",u),De(m,"CVER",22),this.D&&De(m,"X-HTTP-Session-Id",this.D),wl(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(AI(L)))+"&"+f:this.m&&Vp(m,this.m,L)),Op(this.h,V),this.Ua&&De(m,"TYPE","init"),this.P?(De(m,"$req",f),De(m,"SID","null"),V.T=!0,Rp(V,m,null)):Rp(V,m,f),this.G=2}}else this.G==3&&(u?OI(this,u):this.i.length==0||pI(this.h)||OI(this))};function OI(u,f){var m;f?m=f.l:m=u.U++;const T=Ir(u.I);De(T,"SID",u.K),De(T,"RID",m),De(T,"AID",u.T),wl(u,T),u.m&&u.o&&Vp(T,u.m,u.o),m=new ii(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=VI(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Op(u.h,m),Rp(m,T,f)}function wl(u,f){u.H&&D(u.H,function(m,T){De(f,T,m)}),u.l&&_I({},function(m,T){De(f,T,m)})}function VI(u,f,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var V=u.i;let L=-1;for(;;){const q=["count="+m];L==-1?0<m?(L=V[0].g,q.push("ofs="+L)):L=0:q.push("ofs="+L);let ke=!0;for(let bt=0;bt<m;bt++){let _e=V[bt].g;const Vt=V[bt].map;if(_e-=L,0>_e)L=Math.max(0,V[bt].g-100),ke=!1;else try{d1(Vt,q,"req"+_e+"_")}catch{T&&T(Vt)}}if(ke){T=q.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,T}function FI(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Z||ne(),B||(Z(),B=!0),H.add(f,u),u.v=0}}function Mp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=dl(p(u.Fa,u),jI(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,MI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=dl(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),td(this),MI(this))};function Lp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function MI(u){u.g=new ii(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Ir(u.qa);De(f,"RID","rpc"),De(f,"SID",u.K),De(f,"AID",u.T),De(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&De(f,"TO",u.ja),De(f,"TYPE","xmlhttp"),wl(u,f),u.m&&u.o&&Vp(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Jc(Ir(f)),m.m=null,m.P=!0,cI(m,u)}t.Za=function(){this.C!=null&&(this.C=null,td(this),Mp(this),Wt(19))};function rd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function LI(u,f){var m=null;if(u.g==f){rd(u),Lp(u),u.g=null;var T=2}else if(Dp(u.h,f))m=f.D,gI(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var V=u.B;T=Kc(),Kt(T,new oI(T,m)),nd(u)}else FI(u);else if(V=f.s,V==3||V==0&&0<f.X||!(T==1&&m1(u,f)||T==2&&Mp(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),V){case 1:ls(u,5);break;case 4:ls(u,10);break;case 3:ls(u,6);break;default:ls(u,2)}}}function jI(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function ls(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),T=u.Xa;const V=!T;T=new as(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(T,"https"),Jc(T),V?l1(T.toString(),m):u1(T.toString(),m)}else Wt(2);u.G=0,u.l&&u.l.sa(f),UI(u),DI(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function UI(u){if(u.G=0,u.ka=[],u.l){const f=yI(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ka,f),P(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function BI(u,f,m){var T=m instanceof as?Ir(m):new as(m);if(T.g!="")f&&(T.g=f+"."+T.g),Yc(T,T.s);else{var V=a.location;T=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var L=new as(null);T&&Qc(L,T),f&&(L.g=f),V&&Yc(L,V),m&&(L.l=m),T=L}return m=u.D,f=u.ya,m&&f&&De(T,m,f),De(T,"VER",u.la),wl(u,T),T}function $I(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ye(new Xc({eb:m})):new Ye(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zI(){}t=zI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function id(){}id.prototype.g=function(u,f){return new _n(u,f)};function _n(u,f){Ot.call(this),this.g=new NI(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!y(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Io(this)}b(_n,Ot),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Fp(this.g)},_n.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=bp(u),u=m);f.i.push(new XC(f.Ya++,u)),f.G==3&&nd(f)},_n.prototype.N=function(){this.g.l=null,delete this.j,Fp(this.g),delete this.g,_n.aa.N.call(this)};function qI(u){Ap.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}b(qI,Ap);function KI(){xp.call(this),this.status=1}b(KI,xp);function Io(u){this.g=u}b(Io,zI),Io.prototype.ua=function(){Kt(this.g,"a")},Io.prototype.ta=function(u){Kt(this.g,new qI(u))},Io.prototype.sa=function(u){Kt(this.g,new KI)},Io.prototype.ra=function(){Kt(this.g,"b")},id.prototype.createWebChannel=id.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,Uk=function(){return new id},jk=function(){return Kc()},Lk=ss,wy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,oh=Wc,aI.COMPLETE="complete",Mk=aI,nI.EventType=ul,ul.OPEN="a",ul.CLOSE="b",ul.ERROR="c",ul.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Gl=nI,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Fk=Ye}).apply(typeof Cd<"u"?Cd:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Ic("@firebase/firestore");function No(){return $i.logLevel}function Aj(t){$i.setLogLevel(t)}function U(t,...e){if($i.logLevel<=he.DEBUG){const n=e.map(Rv);$i.debug(`Firestore (${Ya}): ${t}`,...n)}}function it(t,...e){if($i.logLevel<=he.ERROR){const n=e.map(Rv);$i.error(`Firestore (${Ya}): ${t}`,...n)}}function yr(t,...e){if($i.logLevel<=he.WARN){const n=e.map(Rv);$i.warn(`Firestore (${Ya}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function ee(t,e){t||Y()}function xj(t,e){t||Y()}function G(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Pt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class Pj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Rj{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ee(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ct,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ct)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new Bk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new wt(e)}}class Cj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Cj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ee(this.o===void 0);const r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string"),this.R=n.token,new Dj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Vj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function xa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function zk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new ze(0,0))}static max(){return new ie(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pe extends Xu{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const Fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Xu{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return Fj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(pe.fromString(e))}static fromName(e){return new W(pe.fromString(e).popFirst(5))}static empty(){return new W(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new pe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Iy(t){return t.fields.find(e=>e.kind===2)}function ps(t){return t.fields.filter(e=>e.kind!==2)}tf.UNKNOWN_ID=-1;class ah{constructor(e,n){this.fieldPath=e,this.kind=n}}class Zu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Zu(0,kn.min())}}function qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new kn(i,W.empty(),e)}function Kk(t){return new kn(t.readTime,t.key,-1)}class kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kn(ie.min(),W.empty(),-1)}static max(){return new kn(ie.max(),W.empty(),-1)}}function Cv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==Wk)throw t;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new pu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Nv(r.target.error);this.V.reject(new pu(e,i))}}static open(e,n,r,i){try{return new Qf(n,e.transaction(i,r))}catch(s){throw new pu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Lj(n)}}class fr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,fr.S(Qe())===12.2&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Gr())return!1;if(fr.v())return!0;const e=Qe(),n=fr.S(e),r=0<n&&n<10,i=Hk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new pu(e,o))},i.onupgradeneeded=s=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Qf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),F.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(U("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Hk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Mj{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ms(this.B.delete())}}class pu extends j{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ns(t){return t.name==="IndexedDbTransactionError"}class Lj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(U("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ms(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),ms(this.store.add(e))}get(e){return ms(this.store.get(e)).next(n=>(n===void 0&&(n=null),U("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),ms(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),ms(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new F((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new F((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){U("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new F((r,i)=>{n.onerror=s=>{const o=Nv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new F((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Mj(a),c=n(a.primaryKey,a.value,l);if(c instanceof F){const d=c.catch(h=>(l.done(),F.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>F.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ms(t){return new F((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Nv(r.target.error);n(i)}})}let G0=!1;function Nv(t){const e=fr.S(Qe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return G0||(G0=!0,setTimeout(()=>{throw r},0)),r}}return t}class jj{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){U("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{U("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ns(n)?U("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ts(n)}await this.X(6e4)})}}class Uj{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return F.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return U("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(U("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Kk(s);Cv(o,r)>0&&(r=o)}),new kn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dn.oe=-1;function Pc(t){return t==null}function ec(t){return t===0&&1/t==-1/0}function Qk(t){return typeof t=="number"&&Number.isInteger(t)&&!ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=H0(e)),e=Bj(t.get(n),e);return H0(e)}function Bj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function H0(t){return t+""}function ur(t){const e=t.length;if(ee(e>=2),e===2)return ee(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Y(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Y()}s=o+2}return new pe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e){return[t,Xt(e)]}function Yk(t,e,n){return[t,Xt(e),n]}const $j={},zj=["prefixPath","collectionGroup","readTime","documentId"],qj=["prefixPath","collectionGroup","documentId"],Kj=["collectionGroup","readTime","prefixPath","documentId"],Wj=["canonicalId","targetId"],Gj=["targetId","path"],Hj=["path","targetId"],Qj=["collectionId","parent"],Yj=["indexId","uid"],Jj=["uid","sequenceNumber"],Xj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zj=["indexId","uid","orderedDocumentKey"],e4=["userId","collectionPath","documentId"],t4=["userId","collectionPath","largestBatchId"],n4=["userId","collectionGroup","largestBatchId"],Jk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],r4=[...Jk,"documentOverlays"],Xk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zk=Xk,Dv=[...Zk,"indexConfiguration","indexState","indexEntries"],i4=Dv,s4=[...Dv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey extends Gk{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function yt(t,e){const n=G(t);return fr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nd(this.root,e,this.comparator,!0)}}class Nd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??At.RED,this.left=i??At.EMPTY,this.right=s??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new At(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J0(this.data.getIterator())}getIteratorFrom(e){return new J0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xe(this.comparator);return n.data=e,n}}class J0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new hn([])}unionWith(e){let n=new xe(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tP("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const a4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(ee(!!t),typeof t=="string"){let e=0;const n=a4.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zi(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ov(t){const e=t.mapValue.fields.__previous_value__;return Yf(e)?Ov(e):e}function tc(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class qi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uh={nullValue:"NULL_VALUE"};function Ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yf(t)?4:nP(t)?9007199254740991:Jf(t)?10:11:Y()}function _r(t,e){if(t===e)return!0;const n=Ws(t);if(n!==Ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tc(t).isEqual(tc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yr(i.timestampValue),a=Yr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zi(i.bytesValue).isEqual(zi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return je(i.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return je(i.integerValue)===je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=je(i.doubleValue),a=je(s.doubleValue);return o===a?ec(o)===ec(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Y0(o)!==Y0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_r(o[l],a[l])))return!1;return!0}(t,e);default:return Y()}}function nc(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Ki(t,e){if(t===e)return 0;const n=Ws(t),r=Ws(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=je(s.integerValue||s.doubleValue),l=je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return X0(t.timestampValue,e.timestampValue);case 4:return X0(tc(t),tc(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){const a=zi(s),l=zi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ce(a[c],l[c]);if(d!==0)return d}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce(je(s.latitude),je(o.latitude));return a!==0?a:ce(je(s.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},p=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,b=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=ce(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:Z0(g,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===bi.mapValue&&o===bi.mapValue)return 0;if(s===bi.mapValue)return 1;if(o===bi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=ce(l[h],d[h]);if(p!==0)return p;const g=Ki(a[l[h]],c[d[h]]);if(g!==0)return g}return ce(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Y()}}function X0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Yr(t),r=Yr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function Z0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ki(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function ka(t){return Ty(t)}function Ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ty(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ty(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function Gs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function by(t){return!!t&&"integerValue"in t}function rc(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ch(t){return!!t&&"mapValue"in t}function Jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function mu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const rP={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function u4(t){return"nullValue"in t?uh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gs(qi.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Jf(t)?rP:{mapValue:{}}:Y()}function c4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gs(qi.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?rP:"mapValue"in t?Jf(t)?{mapValue:{}}:bi:Y()}function nT(t,e){const n=Ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function rT(t,e){const n=Ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=mu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){uo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xt(mu(this.value))}}function iP(t){const e=[];return uo(t.fields,(n,r)=>{const i=new Be([n]);if(ch(r)){const s=iP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fe(e,0,ie.min(),ie.min(),ie.min(),xt.empty(),0)}static newFoundDocument(e,n,r,i){return new Fe(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new Fe(e,2,n,ie.min(),ie.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new Fe(e,3,n,ie.min(),ie.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.position=e,this.inclusive=n}}function iT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Ki(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function d4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{}class me extends sP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h4(e,n,r):n==="array-contains"?new m4(e,r):n==="in"?new dP(e,r):n==="not-in"?new g4(e,r):n==="array-contains-any"?new y4(e,r):new me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f4(e,r):new p4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ki(n,this.value)):n!==null&&Ws(this.value)===Ws(n)&&this.matchesComparison(Ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends sP{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Se(e,n)}matches(e){return Pa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Pa(t){return t.op==="and"}function Sy(t){return t.op==="or"}function Vv(t){return oP(t)&&Pa(t)}function oP(t){for(const e of t.filters)if(e instanceof Se)return!1;return!0}function Ay(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+ka(t.value);if(Vv(t))return t.filters.map(e=>Ay(e)).join(",");{const e=t.filters.map(n=>Ay(n)).join(",");return`${t.op}(${e})`}}function aP(t,e){return t instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&aP(o,i.filters[a]),!0):!1}(t,e):void Y()}function lP(t,e){const n=t.filters.concat(e);return Se.create(n,t.op)}function uP(t){return t instanceof me?function(n){return`${n.field.canonicalString()} ${n.op} ${ka(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(uP).join(" ,")+"}"}(t):"Filter"}class h4 extends me{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class f4 extends me{constructor(e,n){super(e,"in",n),this.keys=cP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p4 extends me{constructor(e,n){super(e,"not-in",n),this.keys=cP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class m4 extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rc(n)&&nc(n.arrayValue,this.value)}}class dP extends me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class g4 extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nc(this.value.arrayValue,n)}}class y4 extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function xy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new _4(t,e,n,r,i,s,o)}function Hs(t){const e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ay(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ka(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ka(r)).join(",")),e.ue=n}return e.ue}function Rc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sT(t.startAt,e.startAt)&&sT(t.endAt,e.endAt)}function nf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rf(t,e){return t.filters.filter(n=>n instanceof me&&n.field.isEqual(e))}function oT(t,e,n){let r=uh,i=!0;for(const s of rf(t,e)){let o=uh,a=!0;switch(s.op){case"<":case"<=":o=u4(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=uh}nT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];nT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function aT(t,e,n){let r=bi,i=!0;for(const s of rf(t,e)){let o=bi,a=!0;switch(s.op){case">=":case">":o=c4(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=bi}rT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];rT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hP(t,e,n,r,i,s,o,a){return new ti(t,e,n,r,i,s,o,a)}function Ja(t){return new ti(t)}function lT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fv(t){return t.collectionGroup!==null}function fa(t){const e=G(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xe(Be.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ic(s,r))}),n.has(Be.keyField().canonicalString())||e.ce.push(new ic(Be.keyField(),r))}return e.ce}function Zt(t){const e=G(t);return e.le||(e.le=v4(e,fa(t))),e.le}function v4(t,e){if(t.limitType==="F")return xy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ic(i.field,s)});const n=t.endAt?new Wi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wi(t.startAt.position,t.startAt.inclusive):null;return xy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ky(t,e){const n=t.filters.concat([e]);return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sf(t,e,n){return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cc(t,e){return Rc(Zt(t),Zt(e))&&t.limitType===e.limitType}function fP(t){return`${Hs(Zt(t))}|lt:${t.limitType}`}function Do(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uP(i)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ka(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ka(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function Nc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of fa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=iT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fa(r),i)||r.endAt&&!function(o,a,l){const c=iT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fa(r),i))}(t,e)}function pP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mP(t){return(e,n)=>{let r=!1;for(const i of fa(t)){const s=w4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function w4(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ki(l,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new Ne(W.comparator);function fn(){return I4}const gP=new Ne(W.comparator);function Hl(...t){let e=gP;for(const n of t)e=e.insert(n.key,n);return e}function yP(t){let e=gP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cr(){return gu()}function _P(){return gu()}function gu(){return new rs(t=>t.toString(),(t,e)=>t.isEqual(e))}const E4=new Ne(W.comparator),T4=new xe(W.comparator);function de(...t){let e=T4;for(const n of t)e=e.add(n);return e}const b4=new xe(ce);function Mv(){return b4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function vP(t){return{integerValue:""+t}}function wP(t,e){return Qk(e)?vP(e):Lv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function S4(t,e,n){return t instanceof Ra?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yf(s)&&(s=Ov(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qs?EP(t,e):t instanceof Ys?TP(t,e):function(i,s){const o=IP(i,s),a=uT(o)+uT(i.Pe);return by(o)&&by(i.Pe)?vP(a):Lv(i.serializer,a)}(t,e)}function A4(t,e,n){return t instanceof Qs?EP(t,e):t instanceof Ys?TP(t,e):n}function IP(t,e){return t instanceof Ca?function(r){return by(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ra extends Xf{}class Qs extends Xf{constructor(e){super(),this.elements=e}}function EP(t,e){const n=bP(e);for(const r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ys extends Xf{constructor(e){super(),this.elements=e}}function TP(t,e){let n=bP(e);for(const r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}class Ca extends Xf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function uT(t){return je(t.integerValue||t.doubleValue)}function bP(t){return rc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.field=e,this.transform=n}}function x4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qs&&i instanceof Qs||r instanceof Ys&&i instanceof Ys?xa(r.elements,i.elements,_r):r instanceof Ca&&i instanceof Ca?_r(r.Pe,i.Pe):r instanceof Ra&&i instanceof Ra}(t.transform,e.transform)}class k4{constructor(e,n){this.version=e,this.transformResults=n}}class $e{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $e}static exists(e){return new $e(void 0,e)}static updateTime(e){return new $e(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zf{}function SP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Za(t.key,$e.none()):new Xa(t.key,t.data,$e.none());{const n=t.data,r=xt.empty();let i=new xe(Be.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ni(t.key,r,new hn(i.toArray()),$e.none())}}function P4(t,e,n){t instanceof Xa?function(i,s,o){const a=i.value.clone(),l=dT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ni?function(i,s,o){if(!dh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=dT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(AP(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function yu(t,e,n,r){return t instanceof Xa?function(s,o,a,l){if(!dh(s.precondition,o))return a;const c=s.value.clone(),d=hT(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ni?function(s,o,a,l){if(!dh(s.precondition,o))return a;const c=hT(s.fieldTransforms,l,o),d=o.data;return d.setAll(AP(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return dh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function R4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=IP(r.transform,i||null);s!=null&&(n===null&&(n=xt.empty()),n.set(r.field,s))}return n||null}function cT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xa(r,i,(s,o)=>x4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends Zf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ni extends Zf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dT(t,e,n){const r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,A4(o,a,n[i]))}return r}function hT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,S4(s,o,e))}return r}class Za extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jv extends Zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&P4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=yu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=yu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_P();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=SP(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(n,r)=>cT(n,r))&&xa(this.baseMutations,e.baseMutations,(n,r)=>cT(n,r))}}class Bv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=function(){return E4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Bv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,ge;function xP(t){switch(t){default:return Y();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function kP(t){if(t===void 0)return it("GRPC error has no .code"),M.UNKNOWN;switch(t){case at.OK:return M.OK;case at.CANCELLED:return M.CANCELLED;case at.UNKNOWN:return M.UNKNOWN;case at.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case at.INTERNAL:return M.INTERNAL;case at.UNAVAILABLE:return M.UNAVAILABLE;case at.UNAUTHENTICATED:return M.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case at.NOT_FOUND:return M.NOT_FOUND;case at.ALREADY_EXISTS:return M.ALREADY_EXISTS;case at.PERMISSION_DENIED:return M.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case at.ABORTED:return M.ABORTED;case at.OUT_OF_RANGE:return M.OUT_OF_RANGE;case at.UNIMPLEMENTED:return M.UNIMPLEMENTED;case at.DATA_LOSS:return M.DATA_LOSS;default:return Y()}}(ge=at||(at={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new Vs([4294967295,4294967295],0);function fT(t){const e=PP().encode(t),n=new Vk;return n.update(e),new Uint8Array(n.digest())}function pT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vs([n,r],0),new Vs([i,s],0)]}class zv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Vs.fromNumber(r)));return i.compare(N4)===1&&(i=new Vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fT(e),[r,i]=pT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=fT(e),[r,i]=pT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Oc(ie.min(),i,new Ne(ce),fn(),de())}}class Vc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vc(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class RP{constructor(e,n){this.targetId=e,this.me=n}}class CP{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mT{constructor(){this.fe=0,this.ge=yT(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Vc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=yT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D4{constructor(e){this.Le=e,this.Be=new Map,this.ke=fn(),this.qe=gT(),this.Qe=new Ne(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(nf(s))if(r===0){const o=new W(s.path);this.Ue(n,o,Fe.newNoDocument(o,ie.min()))}else ee(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=zi(r).toUint8Array()}catch(l){if(l instanceof tP)return yr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zv(o,i,s)}catch(l){return yr(l instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&nf(a.target)){const l=new W(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Fe.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Oc(e,n,this.Qe,this.ke,r);return this.ke=fn(),this.qe=gT(),this.Qe=new Ne(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xe(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gT(){return new Ne(W.comparator)}function yT(){return new Ne(W.comparator)}const O4={asc:"ASCENDING",desc:"DESCENDING"},V4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"};class M4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Py(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function Na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function L4(t,e){return Na(t,e.toTimestamp())}function st(t){return ee(!!t),ie.fromTimestamp(function(n){const r=Yr(n);return new ze(r.seconds,r.nanos)}(t))}function qv(t,e){return Ry(t,e).canonicalString()}function Ry(t,e){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DP(t){const e=pe.fromString(t);return ee(zP(e)),e}function sc(t,e){return qv(t.databaseId,e.path)}function pr(t,e){const n=DP(e);if(n.get(1)!==t.databaseId.projectId)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(FP(n))}function OP(t,e){return qv(t.databaseId,e)}function VP(t){const e=DP(t);return e.length===4?pe.emptyPath():FP(e)}function Cy(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FP(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _T(t,e,n){return{name:sc(t,e),fields:n.value.mapValue.fields}}function MP(t,e,n){const r=pr(t,e.name),i=st(e.updateTime),s=e.createTime?st(e.createTime):ie.min(),o=new xt({mapValue:{fields:e.fields}}),a=Fe.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function j4(t,e){return"found"in e?function(r,i){ee(!!i.found),i.found.name,i.found.updateTime;const s=pr(r,i.found.name),o=st(i.found.updateTime),a=i.found.createTime?st(i.found.createTime):ie.min(),l=new xt({mapValue:{fields:i.found.fields}});return Fe.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ee(!!i.missing),ee(!!i.readTime);const s=pr(r,i.missing),o=st(i.readTime);return Fe.newNoDocument(s,o)}(t,e):Y()}function U4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(ee(d===void 0||typeof d=="string"),et.fromBase64String(d||"")):(ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array),et.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?M.UNKNOWN:kP(c.code);return new j(d,c.message||"")}(o);n=new CP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pr(t,r.document.name),s=st(r.document.updateTime),o=r.document.createTime?st(r.document.createTime):ie.min(),a=new xt({mapValue:{fields:r.document.fields}}),l=Fe.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new hh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pr(t,r.document),s=r.readTime?st(r.readTime):ie.min(),o=Fe.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pr(t,r.document),s=r.removedTargetIds||[];n=new hh([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new C4(i,s),a=r.targetId;n=new RP(a,o)}}return n}function oc(t,e){let n;if(e instanceof Xa)n={update:_T(t,e.key,e.value)};else if(e instanceof Za)n={delete:sc(t,e.key)};else if(e instanceof ni)n={update:_T(t,e.key,e.data),updateMask:W4(e.fieldMask)};else{if(!(e instanceof jv))return Y();n={verify:sc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ys)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ca)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:L4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function Ny(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?$e.updateTime(st(s.updateTime)):s.exists!==void 0?$e.exists(s.exists):$e.none()}(e.currentDocument):$e.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME"),l=new Ra;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Qs(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Ys(d)}else"increment"in a?l=new Ca(o,a.increment):Y();const c=Be.fromServerFormat(a.fieldPath);return new Dc(c,l)}(t,i)):[];if(e.update){e.update.name;const i=pr(t,e.update.name),s=new xt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new hn(c.map(d=>Be.fromServerFormat(d)))}(e.updateMask);return new ni(i,s,o,n,r)}return new Xa(i,s,n,r)}if(e.delete){const i=pr(t,e.delete);return new Za(i,n)}if(e.verify){const i=pr(t,e.verify);return new jv(i,n)}return Y()}function B4(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?st(i.updateTime):st(s);return o.isEqual(ie.min())&&(o=st(s)),new k4(o,i.transformResults||[])}(n,e))):[]}function LP(t,e){return{documents:[OP(t,e.path)]}}function jP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OP(t,i);const s=function(c){if(c.length!==0)return $P(Se.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Oo(p.field),direction:z4(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Py(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function UP(t){let e=VP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=BP(h);return p instanceof Se&&Vv(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(b){return new ic(Vo(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Pc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new Wi(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new Wi(g,p)}(n.endAt)),hP(e,i,o,s,a,"F",l,c)}function $4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vo(n.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vo(n.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vo(n.unaryFilter.field);return me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vo(n.unaryFilter.field);return me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return me.create(Vo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>BP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function z4(t){return O4[t]}function q4(t){return V4[t]}function K4(t){return F4[t]}function Oo(t){return{fieldPath:t.canonicalString()}}function Vo(t){return Be.fromServerFormat(t.fieldPath)}function $P(t){return t instanceof me?function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(n.field),op:q4(n.op),value:n.value}}}(t):t instanceof Se?function(n){const r=n.getFilters().map(i=>$P(i));return r.length===1?r[0]:{compositeFilter:{op:K4(n.op),filters:r}}}(t):Y()}function W4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i,s=ie.min(),o=ie.min(),a=et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.ct=e}}function G4(t,e){let n;if(e.document)n=MP(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=Xs(e.noDocument.readTime);n=Fe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const r=W.fromSegments(e.unknownDocument.path),i=Xs(e.unknownDocument.version);n=Fe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new ze(i[0],i[1]);return ie.fromTimestamp(s)}(e.readTime)),n}function vT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:of(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:sc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Na(s,o.version.toTimestamp()),createTime:Na(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Js(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:Js(e.version)}}return r}function of(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Js(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xs(t){const e=new ze(t.seconds,t.nanoseconds);return ie.fromTimestamp(e)}function gs(t,e){const n=(e.baseMutations||[]).map(s=>Ny(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Ny(t.ct,s)),i=ze.fromMillis(e.localWriteTimeMs);return new Uv(e.batchId,i,n,r)}function Yl(t){const e=Xs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Xs(t.lastLimboFreeSnapshotVersion):ie.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ee(s.documents.length===1),Zt(Ja(VP(s.documents[0])))}(t.query):function(s){return Zt(UP(s))}(t.query),new Vr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function KP(t,e){const n=Js(e.snapshotVersion),r=Js(e.lastLimboFreeSnapshotVersion);let i;i=nf(e.target)?LP(t.ct,e.target):jP(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kv(t){const e=UP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sf(e,e.limit,"L"):e}function Pm(t,e){return new $v(e.largestBatchId,Ny(t.ct,e.overlayMutation))}function wT(t,e){const n=e.path.lastSegment();return[t,Xt(e.path.popLast()),n]}function IT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Js(r.readTime),documentKey:Xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{getBundleMetadata(e,n){return ET(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Xs(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return ET(e).put(function(i){return{bundleId:i.id,createTime:Js(st(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return TT(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Kv(s.bundledQuery),readTime:Xs(s.readTime)}}(r)})}saveNamedQuery(e,n){return TT(e).put(function(i){return{name:i.name,readTime:Js(st(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function ET(t){return yt(t,"bundles")}function TT(t){return yt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new ep(e,r)}getOverlay(e,n){return Dl(e).get(wT(this.userId,n)).next(r=>r?Pm(this.serializer,r):null)}getOverlays(e,n){const r=cr();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new $v(n,o);i.push(this.ht(e,a))}),F.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Dl(e).j("collectionPathOverlayIndex",a))}),F.waitFor(s)}getOverlaysForCollection(e,n,r){const i=cr(),s=Xt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Pm(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=cr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Dl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=Pm(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Dl(e).put(function(i,s,o){const[a,l,c]=wT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:oc(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Dl(t){return yt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{Pt(e){return yt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(je(e.integerValue));else if("doubleValue"in e){const r=je(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ec(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Yr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(zi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?nP(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Jf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Y()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(je(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),W.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ys.vt=new ys;function Y4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bT(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Y4(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class J4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=bT(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=bT(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class X4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Z4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ol{constructor(){this.jt=new J4,this.Ht=new X4(this.jt),this.Jt=new Z4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _s(this.indexId,this.documentKey,this.arrayValue,r)}}function ui(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ST(t.arrayValue,e.arrayValue),n!==0?n:(n=ST(t.directionalValue,e.directionalValue),n!==0?n:W.comparator(t.documentKey,e.documentKey)))}function ST(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.Xt=new xe((n,r)=>Be.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ee(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Iy(e);if(n!==void 0&&!this.sn(n))return!1;const r=ps(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(Be.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ah(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ah(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ah(r.field,r.dir==="asc"?0:1)));return new tf(tf.UNKNOWN_ID,this.collectionId,n,Zu.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){var e,n;if(ee(t instanceof me||t instanceof Se),t instanceof me){if(t instanceof dP){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>me.create(t.field,"==",s)))||[];return Se.create(i,"or")}return t}const r=t.filters.map(i=>WP(i));return Se.create(r,t.op)}function eU(t){if(t.getFilters().length===0)return[];const e=Vy(WP(t));return ee(GP(e)),Dy(e)||Oy(e)?[e]:e.getFilters()}function Dy(t){return t instanceof me}function Oy(t){return t instanceof Se&&Vv(t)}function GP(t){return Dy(t)||Oy(t)||function(n){if(n instanceof Se&&Sy(n)){for(const r of n.getFilters())if(!Dy(r)&&!Oy(r))return!1;return!0}return!1}(t)}function Vy(t){if(ee(t instanceof me||t instanceof Se),t instanceof me)return t;if(t.filters.length===1)return Vy(t.filters[0]);const e=t.filters.map(r=>Vy(r));let n=Se.create(e,t.op);return n=af(n),GP(n)?n:(ee(n instanceof Se),ee(Pa(n)),ee(n.filters.length>1),n.filters.reduce((r,i)=>Wv(r,i)))}function Wv(t,e){let n;return ee(t instanceof me||t instanceof Se),ee(e instanceof me||e instanceof Se),n=t instanceof me?e instanceof me?function(i,s){return Se.create([i,s],"and")}(t,e):xT(t,e):e instanceof me?xT(e,t):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0),Pa(i)&&Pa(s))return lP(i,s.getFilters());const o=Sy(i)?i:s,a=Sy(i)?s:i,l=o.filters.map(c=>Wv(c,a));return Se.create(l,"or")}(t,e),af(n)}function xT(t,e){if(Pa(e))return lP(e,t.getFilters());{const n=e.filters.map(r=>Wv(t,r));return Se.create(n,"or")}}function af(t){if(ee(t instanceof me||t instanceof Se),t instanceof me)return t;const e=t.getFilters();if(e.length===1)return af(e[0]);if(oP(t))return t;const n=e.map(i=>af(i)),r=[];return n.forEach(i=>{i instanceof me?r.push(i):i instanceof Se&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(){this.un=new Gv}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(kn.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Gv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xe(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Uint8Array(0);class nU{constructor(e,n){this.databaseId=n,this.cn=new Gv,this.ln=new rs(r=>Hs(r),(r,i)=>Rc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Xt(i)};return kT(e).put(s)}return F.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[zk(n),""],!1,!0);return kT(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ur(o.parent))}return r})}addFieldIndex(e,n){const r=Vl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Po(e);return s.next(a=>{o.put(IT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Vl(e),i=Po(e),s=ko(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Vl(e),r=ko(e),i=Po(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return F.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new AT(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ko(e);let i=!0;const s=new Map;return F.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=de();const a=[];return F.forEach(s,(l,c)=>{U("IndexedDbIndexManager",`Using index ${function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${Hs(n)}`);const d=function(A,C){const O=Iy(C);if(O===void 0)return null;for(const D of rf(A,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(c,l),h=function(A,C){const O=new Map;for(const D of ps(C))for(const v of rf(A,D.fieldPath))switch(v.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),v.value),Array.from(O.values())}return null}(c,l),p=function(A,C){const O=[];let D=!0;for(const v of ps(C)){const E=v.kind===0?oT(A,v.fieldPath,A.startAt):aT(A,v.fieldPath,A.startAt);O.push(E.value),D&&(D=E.inclusive)}return new Wi(O,D)}(c,l),g=function(A,C){const O=[];let D=!0;for(const v of ps(C)){const E=v.kind===0?aT(A,v.fieldPath,A.endAt):oT(A,v.fieldPath,A.endAt);O.push(E.value),D&&(D=E.inclusive)}return new Wi(O,D)}(c,l),b=this.In(l,c,p),S=this.In(l,c,g),P=this.Tn(l,c,h),I=this.En(l.indexId,d,b,p.inclusive,S,g.inclusive,P);return F.forEach(I,y=>r.G(y,n.limit).next(A=>{A.forEach(C=>{const O=W.fromSegments(C.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return F.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=eU(Se.create(e.filters,"and")).map(r=>xy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.dn(n[h/c]):Dd,g=this.An(e,p,r[h%c],i),b=this.Rn(e,p,s[h%c],o),S=a.map(P=>this.An(e,p,P,!0));d.push(...this.createRange(g,b,S))}return d}An(e,n,r,i){const s=new _s(e,W.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new _s(e,W.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new AT(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return F.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new xe(Be.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Ol;for(const i of ps(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);ys.vt.It(s,o)}return r.zt()}dn(e){const n=new Ol;return ys.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Ol;return ys.vt.It(Gs(this.databaseId,n),r.Yt(function(s){const o=ps(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Ol);let s=0;for(const o of ps(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&rc(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);ys.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ol;l.seed(a.zt()),ys.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Vl(e),i=Po(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return F.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Zu(h.sequenceNumber,new kn(Xs(h.readTime),new W(ur(h.documentKey)),h.largestBatchId)):Zu.empty(),g=d.fields.map(([b,S])=>new ah(Be.fromServerFormat(b),S));return new tf(d.indexId,d.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ce(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Vl(e),s=Po(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>F.forEach(a,l=>s.put(IT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return F.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?F.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),F.forEach(a,l=>this.wn(e,i,l).next(c=>{const d=this.Sn(s,l);return c.isEqual(d)?F.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,n,r,i){return ko(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return ko(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=ko(e);let s=new xe(ui);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new _s(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new xe(ui);const i=this.Vn(n,e);if(i==null)return r;const s=Iy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(rc(o))for(const a of o.arrayValue.values||[])r=r.add(new _s(n.indexId,e.key,this.dn(a),i))}else r=r.add(new _s(n.indexId,e.key,Dd,i));return r}bn(e,n,r,i,s){U("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const g=l.getIterator(),b=c.getIterator();let S=xo(g),P=xo(b);for(;S||P;){let I=!1,y=!1;if(S&&P){const A=d(S,P);A<0?y=!0:A>0&&(I=!0)}else S!=null?y=!0:I=!0;I?(h(P),P=xo(b)):y?(p(S),S=xo(g)):(S=xo(g),P=xo(b))}}(i,s,ui,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),F.waitFor(o)}yn(e){let n=1;return Po(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ui(o,a)).filter((o,a,l)=>!a||ui(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ui(o,e),l=ui(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Dd,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Dd,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return ui(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(PT)}getMinOffset(e,n){return F.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Y())).next(PT)}}function kT(t){return yt(t,"collectionParents")}function ko(t){return yt(t,"indexEntries")}function Vl(t){return yt(t,"indexConfiguration")}function Po(t){return yt(t,"indexState")}function PT(t){ee(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Cv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ln{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{ee(a===1)}));const c=[];for(const d of n.mutations){const h=Yk(e,d.key.path,n.batchId);s.push(i.delete(h)),c.push(d.key)}return F.waitFor(s).next(()=>c)}function lf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class tp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ee(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new tp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ci(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Fo(e),o=ci(e);return o.add({}).next(a=>{ee(typeof a=="number");const l=new Uv(a,n,r,i),c=function(g,b,S){const P=S.baseMutations.map(y=>oc(g.ct,y)),I=S.mutations.map(y=>oc(g.ct,y));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:P,mutations:I}}(this.serializer,this.userId,l),d=[];let h=new xe((p,g)=>ce(p.canonicalString(),g.canonicalString()));for(const p of i){const g=Yk(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(g,$j))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),F.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ci(e).get(n).next(r=>r?(ee(r.userId===this.userId),gs(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?F.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ci(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r),s=gs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ci(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ci(e).U("userMutationsIndex",n).next(r=>r.map(i=>gs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Fo(e).J({range:i},(o,a,l)=>{const[c,d,h]=o,p=ur(d);if(c===this.userId&&n.path.isEqual(p))return ci(e).get(h).next(g=>{if(!g)throw Y();ee(g.userId===this.userId),s.push(gs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xe(ce);const i=[];return n.forEach(s=>{const o=lh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Fo(e).J({range:a},(c,d,h)=>{const[p,g,b]=c,S=ur(g);p===this.userId&&s.path.isEqual(S)?r=r.add(b):h.done()});i.push(l)}),F.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=lh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new xe(ce);return Fo(e).J({range:o},(l,c,d)=>{const[h,p,g]=l,b=ur(p);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ci(e).get(s).next(o=>{if(o===null)throw Y();ee(o.userId===this.userId),r.push(gs(this.serializer,o))}))}),F.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return HP(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),F.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return F.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Fo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ur(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0)})})}containsKey(e,n){return QP(e,this.userId,n)}Nn(e){return YP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function QP(t,e,n){const r=lh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Fo(t).J({range:s,H:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function ci(t){return yt(t,"mutations")}function Fo(t){return yt(t,"documentMutations")}function YP(t){return yt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zs(0)}static kn(){return new Zs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Zs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ie.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ro(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ee(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ro(e).J((o,a)=>{const l=Yl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>F.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ro(e).J((r,i)=>{const s=Yl(i);n(s)})}qn(e){return CT(e).get("targetGlobalKey").next(n=>(ee(n!==null),n))}Qn(e,n){return CT(e).put("targetGlobalKey",n)}Kn(e,n){return Ro(e).put(KP(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Hs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ro(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Yl(a);Rc(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=vi(e);return n.forEach(o=>{const a=Xt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),F.waitFor(i)}removeMatchingKeys(e,n,r){const i=vi(e);return F.forEach(n,s=>{const o=Xt(s.path);return F.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=vi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=vi(e);let s=de();return i.J({range:r,H:!0},(o,a,l)=>{const c=ur(o[1]),d=new W(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Xt(n.path),i=IDBKeyRange.bound([r],[zk(r)],!1,!0);let s=0;return vi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Ro(e).get(n).next(r=>r?Yl(r):null)}}function Ro(t){return yt(t,"targets")}function CT(t){return yt(t,"targetGlobal")}function vi(t){return yt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class iU{constructor(e){this.Un=e,this.buffer=new xe(NT),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();NT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ns(n)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ts(n)}await this.Hn(3e5)})}}class oU{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(dn.oe);const r=new iU(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(RT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RT):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),No()<=he.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function aU(t,e){return new oU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,n){this.db=e,this.garbageCollector=aU(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Od(e,r)}removeReference(e,n,r){return Od(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Od(e,n)}nr(e,n){return function(i,s){let o=!1;return YP(i).Y(a=>QP(i,a,s).next(l=>(l&&(o=!0),F.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ie.min()),vi(e).delete(function(h){return[0,Xt(h.path)]}(o))))});i.push(l)}}).next(()=>F.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Od(e,n)}tr(e,n){const r=vi(e);let i,s=dn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==dn.oe&&n(new W(ur(i)),s),s=c,i=l):s=dn.oe}).next(()=>{s!==dn.oe&&n(new W(ur(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Od(t,e){return vi(t).put(function(r,i){return{targetId:0,path:Xt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.changes=new rs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return cs(e).put(r)}removeEntry(e,n,r){return cs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],of(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Fe.newInvalidDocument(n);return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fl(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Fe.newInvalidDocument(n)};return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fl(n))},(i,s)=>{r={document:this.ir(n,s),size:lf(s)}}).next(()=>r)}getEntries(e,n){let r=fn();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=fn(),i=new Ne(W.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,lf(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return F.resolve();let i=new xe(VT);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Fl(i.first()),Fl(i.last())),o=i.getIterator();let a=o.getNext();return cs(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const h=W.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&VT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Fl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),of(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cs(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=fn();for(const h of c){const p=this.ir(W.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Nc(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=fn();const o=OT(n,r),a=OT(n,kn.max());return cs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.ir(W.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new cU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return DT(e).get("remoteDocumentGlobalKey").next(n=>(ee(!!n),n))}rr(e,n){return DT(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=G4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return Fe.newInvalidDocument(e)}}function XP(t){return new uU(t)}class cU extends JP{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new rs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new xe((s,o)=>ce(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=vT(this.cr.serializer,o);i=i.add(s.path.popLast());const c=lf(l);r+=c-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=vT(this.cr.serializer,o.convertToNoDocument(ie.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),F.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function DT(t){return yt(t,"remoteDocumentGlobal")}function cs(t){return yt(t,"remoteDocumentsV14")}function Fl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OT(t,e){const n=e.documentKey.path.toArray();return[t,of(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function VT(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ce(n[s],r[s]),i)return i;return i=ce(n.length,r.length),i||(i=ce(n[n.length-2],r[r.length-2]),i||ce(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&yu(r.mutation,i,hn.empty(),ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=cr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fn();const o=gu(),a=function(){return gu()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ni)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),yu(d.mutation,c,d.mutation.getFieldMask(),ze.now())):o.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new dU(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=gu();let i=new Ne((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||hn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=_P();d.forEach(p=>{if(!s.has(p)){const g=SP(n.get(p),r.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(cr());let a=-1,l=s;return o.next(c=>F.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,de())).next(d=>({batchId:a,changes:yP(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Hl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hl();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(h,p){return new ti(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Fe.newInvalidDocument(d)))});let a=Hl();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&yu(d.mutation,c,hn.empty(),ze.now()),Nc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:st(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Kv(i.bundledQuery),readTime:st(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){this.overlays=new Ne(W.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cr();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=cr(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=cr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=cr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $v(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.Tr=new xe(_t.Er),this.dr=new xe(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new pe([])),r=new _t(n,e),i=new _t(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new pe([])),r=new _t(n,e),i=new _t(n,e+1);let s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new _t(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xe(_t.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Uv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new _t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),i=new _t(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xe(ce);return n.forEach(i=>{const s=new _t(i,0),o=new _t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new _t(new W(s),0);let a=new xe(ce);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new _t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new _t(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.Mr=e,this.docs=function(){return new Ne(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(e,n){let r=fn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Fe.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fn();const o=n.path,a=new W(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Cv(Kk(d),r)<=0||(i.has(d.key)||Nc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yU(this)}getSize(e){return F.resolve(this.size)}}class yU extends JP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.persistence=e,this.Nr=new rs(n=>Hs(n),Rc),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hv,this.targetCount=0,this.kr=Zs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new dn(0),this.Kr=!1,this.Kr=!0,this.$r=new pU,this.referenceDelegate=e(this),this.Ur=new _U(this),this.indexManager=new tU,this.remoteDocumentCache=function(i){return new gU(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new qP(n),this.Gr=new hU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new mU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);const i=new vU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class vU extends Gk{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Jr=new Hv,this.Yr=null}static Zr(e){return new np(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=W.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Qf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Q0,{unique:!0}),l.createObjectStore("documentMutations")}(e),FT(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=F.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),FT(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Q0,{unique:!0});const h=c.store("mutations"),p=d.map(g=>h.put(g));return F.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:e4});c.createIndex("collectionPathOverlayIndex",t4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",n4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:zj});c.createIndex("documentKeyIndex",qj),c.createIndex("collectionGroupIndex",Kj)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Yj}).createIndex("sequenceNumberIndex",Jj,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Xj}).createIndex("documentKeyIndex",Zj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=lf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>F.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>F.forEach(a,l=>{ee(l.userId===s.userId);const c=gs(this.serializer,l);return HP(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new pe(o),c=function(h){return[0,Xt(h)]}(l);s.push(n.get(c).next(d=>d?F.resolve():(h=>n.put({targetId:0,path:Xt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>F.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:Qj});const r=n.store("collectionParents"),i=new Gv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Xt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new pe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=ur(a);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Yl(i),o=KP(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new W(pe.fromString(h.document.name).popFirst(5)):h.noDocument?W.fromSegments(h.noDocument.path):h.unknownDocument?W.fromSegments(h.unknownDocument.path):Y()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>F.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=XP(this.serializer),s=new eR(np.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:de();gs(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),F.forEach(a,(l,c)=>{const d=new wt(c),h=ep.lt(this.serializer,d),p=s.getIndexManager(d),g=tp.lt(d,this.serializer,p,s.referenceDelegate);return new ZP(i,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Ey(n,dn.oe),l).next()})})}}function FT(t){t.createObjectStore("targetDocuments",{keyPath:Gj}).createIndex("documentTargetsIndex",Hj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wj,{unique:!0}),t.createObjectStore("targetGlobal")}const Rm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qv{constructor(e,n,r,i,s,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Qv.D())throw new j(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lU(this,i),this.Ai=n+"main",this.serializer=new qP(l),this.Ri=new fr(this.Ai,this.hi,new wU(this.serializer)),this.$r=new Q4,this.Ur=new rU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XP(this.serializer),this.Gr=new H4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(M.FAILED_PRECONDITION,Rm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new dn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ns(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ml(e).get("owner").next(n=>F.resolve(this.vi(n)))}Ci(e){return Vd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=yt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return F.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?F.resolve(!0):Ml(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new j(M.FAILED_PRECONDITION,Rm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&U("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Ey(e,dn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Vd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return tp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ep.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?s4:l===16?i4:l===15?Dv:l===14?Zk:l===13?Xk:l===12?r4:l===11?Jk:void Y()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Ey(a,this.Qr?this.Qr.next():dn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new j(M.FAILED_PRECONDITION,Wk);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Ml(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(M.FAILED_PRECONDITION,Rm)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ml(e).put("owner",n)}static D(){return fr.D()}bi(e){const n=Ml(e);return n.get("owner").next(r=>this.vi(r)?(U("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):F.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(it(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;bx()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return it("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ml(t){return yt(t,"owner")}function Vd(t){return yt(t,"clientMetadata")}function Yv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Jv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bx()?8:Hk(Qe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new IU;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(No()<=he.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Do(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(No()<=he.DEBUG&&U("QueryEngine","Query:",Do(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(No()<=he.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Do(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):F.resolve())}Yi(e,n){if(lT(n))return F.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sf(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,sf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return lT(n)||i.isEqual(ie.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(No()<=he.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Do(n)),this.rs(e,o,n,qk(i,-1)).next(a=>a))})}ts(e,n){let r=new xe(mP(e));return n.forEach((i,s)=>{Nc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return No()<=he.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Do(n)),this.Ji.getDocumentsMatchingQuery(e,n,kn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(ce),this._s=new rs(s=>Hs(s),Rc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nR(t,e,n,r){return new EU(t,e,n,r)}async function rR(t,e){const n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function TU(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let g=F.resolve();return p.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(S=>{const P=c.docVersions.get(b);ee(P!==null),S.version.compareTo(P)<0&&(h.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),d.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iR(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function bU(t,e){const n=G(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(et.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(S,P,I){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,g,d)&&a.push(n.Ur.updateTargetData(s,g))});let l=fn(),c=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(sR(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(ie.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function sR(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function SU(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Da(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oa(t,e,n){const r=G(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ns(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function uf(t,e,n){const r=G(t);let i=ie.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=G(l),p=h._s.get(d);return p!==void 0?F.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,o,Zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:de())).next(a=>(lR(r,pP(e),a),{documents:a,Ts:s})))}function oR(t,e){const n=G(t),r=G(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function aR(t,e){const n=G(t),r=n.us.get(e)||ie.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,qk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lR(n,e,i),i))}function lR(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function AU(t,e,n,r){const i=G(t);let s=de(),o=fn();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Da(i,function(d){return Zt(Ja(pe.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>sR(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function xU(t,e,n=de()){const r=await Da(t,Zt(Kv(e.bundledQuery))),i=G(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=st(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(et.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function MT(t,e){return`firestore_clients_${t}_${e}`}function LT(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Cm(t,e){return`firestore_targets_${t}_${e}`}class cf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new cf(e,n,i.state,s):(it("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _u{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new _u(e,r.state,i):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class df{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Mv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Qk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new df(e,s):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Xv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Xv(n.clientId,n.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fy{constructor(){this.activeTargetIds=Mv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nm{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(ce),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=MT(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Fy),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(MT(this.persistenceKey,r));if(i){const s=df.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Cm(this.persistenceKey,e));if(i){const s=_u.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cm(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return U("SharedClientState","READ",e,n),n}setItem(e,n){U("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){U("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(U("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=dn.oe;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number"),o=a}catch(a){it("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==dn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new cf(this.currentUser,e,n,r),s=LT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=LT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Cm(this.persistenceKey,e),s=new _u(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return df.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return cf.Rs(new wt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return _u.Rs(i,n)}Ls(e){return Xv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);U("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Mv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class uR{constructor(){this.so=new Fy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd=null;function Dm(){return Fd===null?Fd=function(){return 268435456+Math.round(2147483648*Math.random())}():Fd++,"0x"+Fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class CU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Dm(),l=this.xo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(U("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw yr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ya}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=PU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Dm();return new Promise((o,a)=>{const l=new Fk;l.setWithCredentials(!0),l.listenOnce(Mk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case oh.NO_ERROR:const d=l.getResponseJson();U(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case oh.TIMEOUT:U(jt,`RPC '${e}' ${s} timed out`),a(new j(M.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const h=l.getStatus();if(U(jt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const b=function(P){const I=P.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(I)>=0?I:M.UNKNOWN}(g.status);a(new j(b,g.message))}else a(new j(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new j(M.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{U(jt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);U(jt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Dm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Uk(),a=jk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");U(jt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,g=!1;const b=new RU({Io:P=>{g?U(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(U(jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),U(jt,`RPC '${e}' stream ${i} sending:`,P),h.send(P))},To:()=>h.close()}),S=(P,I,y)=>{P.listen(I,A=>{try{y(A)}catch(C){setTimeout(()=>{throw C},0)}})};return S(h,Gl.EventType.OPEN,()=>{g||(U(jt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),S(h,Gl.EventType.CLOSE,()=>{g||(g=!0,U(jt,`RPC '${e}' stream ${i} transport closed`),b.So())}),S(h,Gl.EventType.ERROR,P=>{g||(g=!0,yr(jt,`RPC '${e}' stream ${i} transport errored:`,P),b.So(new j(M.UNAVAILABLE,"The operation could not be completed")))}),S(h,Gl.EventType.MESSAGE,P=>{var I;if(!g){const y=P.data[0];ee(!!y);const A=y,C=A.error||((I=A[0])===null||I===void 0?void 0:I.error);if(C){U(jt,`RPC '${e}' stream ${i} received error:`,C);const O=C.status;let D=function(w){const k=at[w];if(k!==void 0)return kP(k)}(O),v=C.message;D===void 0&&(D=M.INTERNAL,v="Unknown error status: "+O+" with message "+C.message),g=!0,b.So(new j(D,v)),h.close()}else U(jt,`RPC '${e}' stream ${i} received:`,y),b.bo(y)}}),S(a,Lk.STAT_EVENT,P=>{P.stat===wy.PROXY?U(jt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===wy.NOPROXY&&U(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof window<"u"?window:null}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new M4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new j(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NU extends dR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=U4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?st(o.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Cy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=nf(l)?{documents:LP(s,l)}:{query:jP(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NP(s,o.resumeToken);const c=Py(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=Na(s,o.snapshotVersion.toTimestamp());const c=Py(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=$4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Cy(this.serializer),n.removeTarget=e,this.a_(n)}}class DU extends dR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ee(!!e.streamToken),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=B4(e.writeResults,e.commitTime),r=st(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Cy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ry(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ry(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(it(n),this.D_=!1):U("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{is(this)&&(U("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=G(l);c.L_.add(4),await el(c),c.q_.set("Unknown"),c.L_.delete(4),await Mc(c)}(this))})}),this.q_=new VU(r,i)}}async function Mc(t){if(is(t))for(const e of t.B_)await e(!0)}async function el(t){for(const e of t.B_)await e(!1)}function rp(t,e){const n=G(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),nw(n)?tw(n):nl(n).r_()&&ew(n,e))}function Va(t,e){const n=G(t),r=nl(n);n.N_.delete(e),r.r_()&&hR(n,e),n.N_.size===0&&(r.r_()?r.o_():is(n)&&n.q_.set("Unknown"))}function ew(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).A_(e)}function hR(t,e){t.Q_.xe(e),nl(t).R_(e)}function tw(t){t.Q_=new D4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.q_.v_()}function nw(t){return is(t)&&!nl(t).n_()&&t.N_.size>0}function is(t){return G(t).L_.size===0}function fR(t){t.Q_=void 0}async function MU(t){t.q_.set("Online")}async function LU(t){t.N_.forEach((e,n)=>{ew(t,e)})}async function jU(t,e){fR(t),nw(t)?(t.q_.M_(e),tw(t)):t.q_.set("Unknown")}async function UU(t,e,n){if(t.q_.set("Online"),e instanceof CP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hf(t,r)}else if(e instanceof hh?t.Q_.Ke(e):e instanceof RP?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await iR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(et.EMPTY_BYTE_STRING,d.snapshotVersion)),hR(s,l);const h=new Vr(d.target,l,c,d.sequenceNumber);ew(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){U("RemoteStore","Failed to raise snapshot:",r),await hf(t,r)}}async function hf(t,e,n){if(!ns(e))throw e;t.L_.add(1),await el(t),t.q_.set("Offline"),n||(n=()=>iR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Mc(t)})}function pR(t,e){return e().catch(n=>hf(t,n,e))}async function tl(t){const e=G(t),n=Gi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BU(e);)try{const i=await SU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,$U(e,i)}catch(i){await hf(e,i)}mR(e)&&gR(e)}function BU(t){return is(t)&&t.O_.length<10}function $U(t,e){t.O_.push(e);const n=Gi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mR(t){return is(t)&&!Gi(t).n_()&&t.O_.length>0}function gR(t){Gi(t).start()}async function zU(t){Gi(t).p_()}async function qU(t){const e=Gi(t);for(const n of t.O_)e.m_(n.mutations)}async function KU(t,e,n){const r=t.O_.shift(),i=Bv.from(r,e,n);await pR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tl(t)}async function WU(t,e){e&&Gi(t).V_&&await async function(r,i){if(function(o){return xP(o)&&o!==M.ABORTED}(i.code)){const s=r.O_.shift();Gi(r).s_(),await pR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await tl(r)}}(t,e),mR(t)&&gR(t)}async function UT(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const r=is(n);n.L_.add(3),await el(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Mc(n)}async function My(t,e){const n=G(t);e?(n.L_.delete(2),await Mc(n)):e||(n.L_.add(2),await el(n),n.q_.set("Unknown"))}function nl(t){return t.K_||(t.K_=function(n,r,i){const s=G(n);return s.w_(),new NU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:MU.bind(null,t),Ro:LU.bind(null,t),mo:jU.bind(null,t),d_:UU.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),nw(t)?tw(t):t.q_.set("Unknown")):(await t.K_.stop(),fR(t))})),t.K_}function Gi(t){return t.U_||(t.U_=function(n,r,i){const s=G(n);return s.w_(),new DU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zU.bind(null,t),mo:WU.bind(null,t),f_:qU.bind(null,t),g_:KU.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await tl(t)):(await t.U_.stop(),t.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rl(t,e){if(it("AsyncQueue",`${e}: ${t}`),ns(t))return new j(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Hl(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.W_=new Ne(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fa(e,n,pa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HU{constructor(){this.queries=$T(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=G(n),s=i.queries;i.queries=$T(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new j(M.ABORTED,"Firestore shutting down"))}}function $T(){return new rs(t=>fP(t),Cc)}async function iw(t,e){const n=G(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new GU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=rl(o,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ow(n)}async function sw(t,e){const n=G(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QU(t,e){const n=G(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ow(n)}function YU(t,e,n){const r=G(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function ow(t){t.Y_.forEach(e=>{e.next()})}var Ly,zT;(zT=Ly||(Ly={})).ea="default",zT.Cache="cache";class aw{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ly.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.serializer=e}Es(e){return pr(this.serializer,e)}ds(e){return e.metadata.exists?MP(this.serializer,e.document,!1):Fe.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return st(e)}}class XU{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new qT(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||de()).add(s);n.set(o,a)}}return n}async complete(){const e=await AU(this.localStore,new qT(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await xU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function yR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.key=e}}class vR{constructor(e){this.key=e}}class wR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=mP(e),this.Ra=new pa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new BT,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=Nc(this.query,h)?h:null,b=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?b!==S&&(r.track({type:3,doc:g}),P=!0):this.ga(p,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(l||c)&&(a=!0)),P&&(g?(o=o.add(g),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,b){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return S(g)-S(b)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Fa(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new BT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _R(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eB{constructor(e){this.key=e,this.va=!1}}class tB{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new rs(a=>fP(a),Cc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(W.comparator),this.Na=new Map,this.La=new Hv,this.Ba={},this.ka=new Map,this.qa=Zs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nB(t,e,n=!0){const r=ip(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await IR(r,e,n,!0),i}async function rB(t,e){const n=ip(t);await IR(n,e,!0,!1)}async function IR(t,e,n,r){const i=await Da(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await lw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&rp(t.remoteStore,i),a}async function lw(t,e,n,r,i){t.Ka=(h,p,g)=>async function(S,P,I,y){let A=P.view.ma(I);A.ns&&(A=await uf(S.localStore,P.query,!1).then(({documents:v})=>P.view.ma(v,A)));const C=y&&y.targetChanges.get(P.targetId),O=y&&y.targetMismatches.get(P.targetId)!=null,D=P.view.applyChanges(A,S.isPrimaryClient,C,O);return jy(S,P.targetId,D.wa),D.snapshot}(t,h,p,g);const s=await uf(t.localStore,e,!0),o=new wR(e,s.Ts),a=o.ma(s.documents),l=Vc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);jy(t,n,c.wa);const d=new ZU(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function iB(t,e,n){const r=G(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Cc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Oa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Va(r.remoteStore,i.targetId),Ma(r,i.targetId)}).catch(ts)):(Ma(r,i.targetId),await Oa(r.localStore,i.targetId,!0))}async function sB(t,e){const n=G(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Va(n.remoteStore,r.targetId))}async function oB(t,e,n){const r=hw(t);try{const i=await function(o,a){const l=G(o),c=ze.now(),d=a.reduce((g,b)=>g.add(b.key),de());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=fn(),S=de();return l.cs.getEntries(g,d).next(P=>{b=P,b.forEach((I,y)=>{y.isValidDocument()||(S=S.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(P=>{h=P;const I=[];for(const y of a){const A=R4(y,h.get(y.key).overlayedDocument);A!=null&&I.push(new ni(y.key,A,iP(A.value.mapValue),$e.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,I,a)}).next(P=>{p=P;const I=P.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(g,P.batchId,I)})}).then(()=>({batchId:p.batchId,changes:yP(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ne(ce)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await ri(r,i.changes),await tl(r.remoteStore)}catch(i){const s=rl(i,"Failed to persist write");n.reject(s)}}async function ER(t,e){const n=G(t);try{const r=await bU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ee(o.va):i.removedDocuments.size>0&&(ee(o.va),o.va=!1))}),await ri(n,r,e)}catch(r){await ts(r)}}function KT(t,e,n){const r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=G(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&ow(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aB(t,e,n){const r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(W.comparator);o=o.insert(s,Fe.newNoDocument(s,ie.min()));const a=de().add(s),l=new Oc(ie.min(),new Map,new Ne(ce),o,a);await ER(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),dw(r)}else await Oa(r.localStore,e,!1).then(()=>Ma(r,e,n)).catch(ts)}async function lB(t,e){const n=G(t),r=e.batch.batchId;try{const i=await TU(n.localStore,e);cw(n,r,null),uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ri(n,i)}catch(i){await ts(i)}}async function uB(t,e,n){const r=G(t);try{const i=await function(o,a){const l=G(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ee(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);cw(r,e,n),uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ri(r,i)}catch(i){await ts(i)}}async function cB(t,e){const n=G(t);is(n.remoteStore)||U("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=rl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function uw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cw(t,e,n){const r=G(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ma(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||TR(t,r)})}function TR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Va(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),dw(t))}function jy(t,e,n){for(const r of n)r instanceof _R?(t.La.addReference(r.key,e),dB(t,r)):r instanceof vR?(U("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TR(t,r.key)):Y()}function dB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.xa.add(r),dw(t))}function dw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(pe.fromString(e)),r=t.qa.next();t.Na.set(r,new eB(n)),t.Oa=t.Oa.insert(n,r),rp(t.remoteStore,new Vr(Zt(Ja(n.path)),r,"TargetPurposeLimboResolution",dn.oe))}}async function ri(t,e,n){const r=G(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Jv.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=G(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,p=>F.forEach(p.$i,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>F.forEach(p.Ui,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!ns(h))throw h;U("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=d.os.get(p),b=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(b);d.os=d.os.insert(p,S)}}}(r.localStore,s))}async function hB(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const r=await rR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new j(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ri(n,r.hs)}}function fB(t,e){const n=G(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function pB(t,e){const n=G(t),r=await uf(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&jy(n,e.targetId,i.wa),i}async function mB(t,e){const n=G(t);return aR(n.localStore,e).then(r=>ri(n,r))}async function gB(t,e,n,r){const i=G(t),s=await function(a,l){const c=G(a),d=G(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):F.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await tl(i.remoteStore):n==="acknowledged"||n==="rejected"?(cw(i,e,r||null),uw(i,e),function(a,l){G(G(a).mutationQueue).On(l)}(i.localStore,e)):Y(),await ri(i,s)):U("SyncEngine","Cannot apply mutation batch with id: "+e)}async function yB(t,e){const n=G(t);if(ip(n),hw(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await WT(n,r.toArray());n.Qa=!0,await My(n.remoteStore,!0);for(const s of i)rp(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ma(n,o),Oa(n.localStore,o,!0))),Va(n.remoteStore,o)}),await i,await WT(n,r),function(o){const a=G(o);a.Na.forEach((l,c)=>{Va(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne(W.comparator)}(n),n.Qa=!1,await My(n.remoteStore,!1)}}async function WT(t,e,n){const r=G(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Da(r.localStore,Zt(l[0]));for(const c of l){const d=r.Fa.get(c),h=await pB(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await oR(r.localStore,o);a=await Da(r.localStore,c),await lw(r,bR(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function bR(t){return hP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _B(t){return function(n){return G(G(n).persistence).Qi()}(G(t).localStore)}async function vB(t,e,n,r){const i=G(t);if(i.Qa)return void U("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await aR(i.localStore,pP(s[0])),a=Oc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);await ri(i,o,a);break}case"rejected":await Oa(i.localStore,e,!0),Ma(i,e,r);break;default:Y()}}async function wB(t,e,n){const r=ip(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U("SyncEngine","Adding an already active target "+i);continue}const s=await oR(r.localStore,i),o=await Da(r.localStore,s);await lw(r,bR(s),o.targetId,!1,o.resumeToken),rp(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Oa(r.localStore,i,!1).then(()=>{Va(r.remoteStore,i),Ma(r,i)}).catch(ts)}}function ip(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ER.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aB.bind(null,e),e.Ca.d_=QU.bind(null,e.eventManager),e.Ca.$a=YU.bind(null,e.eventManager),e}function hw(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uB.bind(null,e),e}function IB(t,e,n){const r=G(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,b){const S=G(g),P=st(b.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",I=>S.Gr.getBundleMetadata(I,b.id)).then(I=>!!I&&I.createTime.compareTo(P)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(yR(l));const c=new XU(l,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const p=await c.la(d);p&&a._updateProgress(p),d=await o.Ua()}const h=await c.complete();return await ri(s,h.Ia,void 0),await function(g,b){const S=G(g);return S.persistence.runTransaction("Save bundle","readwrite",P=>S.Gr.saveBundleMetadata(P,b))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return yr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nR(this.persistence,new tR,e.initialUser,this.serializer)}Ga(e){return new eR(np.Zr,this.serializer)}Wa(e){return new uR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class SR extends ac{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await hw(this.Ja.syncEngine),await tl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return nR(this.persistence,new tR,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new sU(r,e.asyncQueue,n)}Ha(e,n){const r=new Uj(n,this.persistence);return new jj(e.asyncQueue,r)}Ga(e){const n=Yv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Qv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,cR(),fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new uR}}class EB extends SR{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Nm&&(this.sharedClientState.syncEngine={no:gB.bind(null,n),ro:vB.bind(null,n),io:wB.bind(null,n),Qi:_B.bind(null,n),eo:mB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await yB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=cR();if(!Nm.D(n))throw new j(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Yv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class lc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hB.bind(null,this.syncEngine),await My(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HU}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(s){return new CU(s)}(e.databaseInfo);return function(s,o,a,l){return new OU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new FU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>KT(this.syncEngine,n,0),function(){return jT.D()?new jT:new kU}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new tB(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=G(i);U("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await el(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lc.provider={build:()=>new lc};function GT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Ct,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new JU(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=G(i),a={documents:s.map(h=>sc(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,pe.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=j4(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());ee(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Za(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=W.fromPath(r);this.mutations.push(new jv(i,this.precondition(i)))}),await async function(r,i){const s=G(r),o={writes:i.map(a=>oc(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,pe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Y();n=ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ie.min())?$e.exists(!1):$e.updateTime(n):$e.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ie.min()))throw new j(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $e.updateTime(n)}return $e.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Zv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new bB(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Pc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xP(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=$k.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{U("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Om(t,e){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fw(t);U("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>UT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>UT(e.remoteStore,i)),t._onlineComponents=e}async function fw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{await Om(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yr("Error using user provided cache. Falling back to memory cache: "+n),await Om(t,new ac)}}else U("FirestoreClient","Using default OfflineComponentProvider"),await Om(t,new ac);return t._offlineComponents}async function op(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),await HT(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),await HT(t,new lc))),t._onlineComponents}function AR(t){return fw(t).then(e=>e.persistence)}function pw(t){return fw(t).then(e=>e.localStore)}function xR(t){return op(t).then(e=>e.remoteStore)}function mw(t){return op(t).then(e=>e.syncEngine)}function xB(t){return op(t).then(e=>e.datastore)}async function La(t){const e=await op(t),n=e.eventManager;return n.onListen=nB.bind(null,e.syncEngine),n.onUnlisten=iB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sB.bind(null,e.syncEngine),n}function kB(t){return t.asyncQueue.enqueue(async()=>{const e=await AR(t),n=await xR(t);return e.setNetworkEnabled(!0),function(i){const s=G(i);return s.L_.delete(0),Mc(s)}(n)})}function PB(t){return t.asyncQueue.enqueue(async()=>{const e=await AR(t),n=await xR(t);return e.setNetworkEnabled(!1),async function(i){const s=G(i);s.L_.add(0),await el(s),s.q_.set("Offline")}(n)})}function RB(t,e){const n=new Ct;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=G(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=rl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await pw(t),e,n)),n.promise}function kR(t,e,n={}){const r=new Ct;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new sp({next:p=>{d.Za(),o.enqueueAndForget(()=>sw(s,h));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new j(M.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new j(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new aw(Ja(a.path),d,{includeMetadataChanges:!0,_a:!0});return iw(s,h)}(await La(t),t.asyncQueue,e,n,r)),r.promise}function CB(t,e){const n=new Ct;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await uf(i,s,!0),l=new wR(s,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=rl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await pw(t),e,n)),n.promise}function PR(t,e,n={}){const r=new Ct;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new sp({next:p=>{d.Za(),o.enqueueAndForget(()=>sw(s,h)),p.fromCache&&l.source==="server"?c.reject(new j(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new aw(a,d,{includeMetadataChanges:!0,_a:!0});return iw(s,h)}(await La(t),t.asyncQueue,e,n,r)),r.promise}function NB(t,e){const n=new sp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.add(s),s.next()}(await La(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.delete(s)}(await La(t),n))}}function DB(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?PP().encode(o):o,function(d,h){return new TB(d,h)}(function(d,h){if(d instanceof Uint8Array)return GT(d,h);if(d instanceof ArrayBuffer)return GT(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Fc(e));t.asyncQueue.enqueueAndForget(async()=>{IB(await mw(t),i,r)})}function OB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await pw(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(t,e,n){if(!n)throw new j(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CR(t,e,n,r){if(e===!0&&r===!0)throw new j(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YT(t){if(!W.isDocumentKey(t))throw new j(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JT(t){if(W.isDocumentKey(t))throw new j(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function ve(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(t);throw new j(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function NR(t,e){if(e<=0)throw new j(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kj;switch(r.type){case"firstParty":return new Nj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=QT.get(n);r&&(U("ComponentProvider","Removing Datastore"),QT.delete(n),r.terminate())}(this),Promise.resolve()}}function VB(t,e,n,r={}){var i;const s=(t=ve(t,Lc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=zO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new j(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(c)}t._authCredentials=new Pj(new Bk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class DR{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new DR(this.firestore,e,this._query)}},Ge=class OR{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new OR(this.firestore,e,this._key)}},Oi=class VR extends rn{constructor(e,n,r){super(e,n,Ja(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new W(e))}withConverter(e){return new VR(this.firestore,e,this._path)}};function FR(t,e,...n){if(t=te(t),gw("collection","path",e),t instanceof Lc){const r=pe.fromString(e,...n);return JT(r),new Oi(t,null,r)}{if(!(t instanceof Ge||t instanceof Oi))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return JT(r),new Oi(t.firestore,null,r)}}function FB(t,e){if(t=ve(t,Lc),gw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rn(t,null,function(r){return new ti(pe.emptyPath(),r)}(e))}function ff(t,e,...n){if(t=te(t),arguments.length===1&&(e=$k.newId()),gw("doc","path",e),t instanceof Lc){const r=pe.fromString(e,...n);return YT(r),new Ge(t,null,new W(r))}{if(!(t instanceof Ge||t instanceof Oi))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return YT(r),new Ge(t.firestore,t instanceof Oi?t.converter:null,new W(r))}}function MR(t,e){return t=te(t),e=te(e),(t instanceof Ge||t instanceof Oi)&&(e instanceof Ge||e instanceof Oi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function LR(t,e){return t=te(t),e=te(e),t instanceof rn&&e instanceof rn&&t.firestore===e.firestore&&Cc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zv(this,"async_queue_retry"),this.Vu=()=>{const r=fh();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ct;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ns(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw it("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=rw.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Uy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class MB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=-1;let ot=class extends Lc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ZT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZT(e),this._firestoreClient=void 0,await e}}};function qt(t){if(t._terminated)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jR(t),t._firestoreClient}function jR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new l4(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,RR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new AB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function jB(t,e){yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return UR(t,lc.provider,{build:r=>new SR(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function UB(t){yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();UR(t,lc.provider,{build:n=>new EB(n,e.cacheSizeBytes)})}function UR(t,e,n){if((t=ve(t,ot))._firestoreClient||t._terminated)throw new j(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new j(M.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},jR(t)}function BB(t){if(t._initialized&&!t._terminated)throw new j(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ct;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!fr.D())return Promise.resolve();const i=r+"main";await fr.delete(i)}(Yv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function $B(t){return function(n){const r=new Ct;return n.asyncQueue.enqueueAndForget(async()=>cB(await mw(n),r)),r.promise}(qt(t=ve(t,ot)))}function zB(t){return kB(qt(t=ve(t,ot)))}function qB(t){return PB(qt(t=ve(t,ot)))}function KB(t,e){const n=qt(t=ve(t,ot)),r=new MB;return DB(n,t._databaseId,e,r),r}function WB(t,e){return OB(qt(t=ve(t,ot)),e).then(n=>n?new rn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(et.fromBase64String(e))}catch(n){throw new j(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=/^__.*__$/;class HB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class BR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $R(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class up{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($R(this.Cu)&&GB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}Qu(e,n,r,i=!1){return new up({Cu:e,methodName:n,qu:r,path:Be.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ho(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new QB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cp(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);bw("Data must be an object, but it was:",o,r);const a=KR(r,o);let l,c;if(s.merge)l=new hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=By(e,h,n);if(!o.contains(p))throw new j(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);GR(d,p)||d.push(p)}l=new hn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new HB(new xt(a),l,c)}class jc extends co{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}function zR(t,e,n){return new up({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _w extends co{_toFieldTransform(e){return new Dc(e.path,new Ra)}isEqual(e){return e instanceof _w}}class vw extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=zR(this,e,!0),r=this.Ku.map(s=>fo(s,n)),i=new Qs(r);return new Dc(e.path,i)}isEqual(e){return e instanceof vw&&qu(this.Ku,e.Ku)}}class ww extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=zR(this,e,!0),r=this.Ku.map(s=>fo(s,n)),i=new Ys(r);return new Dc(e.path,i)}isEqual(e){return e instanceof ww&&qu(this.Ku,e.Ku)}}class Iw extends co{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ca(e.serializer,wP(e.serializer,this.$u));return new Dc(e.path,n)}isEqual(e){return e instanceof Iw&&this.$u===e.$u}}function Ew(t,e,n,r){const i=t.Qu(1,e,n);bw("Data must be an object, but it was:",i,r);const s=[],o=xt.empty();uo(r,(l,c)=>{const d=Sw(e,l,n);c=te(c);const h=i.Nu(d);if(c instanceof jc)s.push(d);else{const p=fo(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new hn(s);return new BR(o,a,i.fieldTransforms)}function Tw(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[By(e,r,n)],l=[i];if(s.length%2!=0)throw new j(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(By(e,s[p])),l.push(s[p+1]);const c=[],d=xt.empty();for(let p=a.length-1;p>=0;--p)if(!GR(c,a[p])){const g=a[p];let b=l[p];b=te(b);const S=o.Nu(g);if(b instanceof jc)c.push(g);else{const P=fo(b,S);P!=null&&(c.push(g),d.set(g,P))}}const h=new hn(c);return new BR(d,h,o.fieldTransforms)}function qR(t,e,n,r=!1){return fo(n,t.Qu(r?4:3,e))}function fo(t,e){if(WR(t=te(t)))return bw("Unsupported field value:",e,t),KR(t,e);if(t instanceof co)return function(r,i){if(!$R(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=fo(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ze.fromDate(r);return{timestampValue:Na(i.serializer,s)}}if(r instanceof ze){const s=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Na(i.serializer,s)}}if(r instanceof lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:NP(i.serializer,r._byteString)};if(r instanceof Ge){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Lv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ap(r)}`)}(t,e)}function KR(t,e){const n={};return eP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(r,i)=>{const s=fo(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function WR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof lp||t instanceof vr||t instanceof Ge||t instanceof co||t instanceof yw)}function bw(t,e,n){if(!WR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ap(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function By(t,e,n){if((e=te(e))instanceof Hi)return e._internalPath;if(typeof e=="string")return Sw(t,e);throw pf("Field path arguments must be of type string or ",t,!1,void 0,n)}const YB=new RegExp("[~\\*/\\[\\]]");function Sw(t,e,n){if(e.search(YB)>=0)throw pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hi(...e.split("."))._internalPath}catch{throw pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(M.INVALID_ARGUMENT,a+t+l)}function GR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JB extends uc{data(){return super.data()}}function dp(t,e){return typeof e=="string"?Sw(t,e):e instanceof Hi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Aw{}class Uc extends Aw{}function di(t,e,...n){let r=[];e instanceof Aw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof xw).length,a=s.filter(l=>l instanceof hp).length;if(o>1||o>0&&a>0)throw new j(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hp extends Uc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hp(e,n,r)}_apply(e){const n=this._parse(e);return YR(e._query,n),new rn(e.firestore,e.converter,ky(e._query,n))}_parse(e){const n=ho(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){tb(h,d);const g=[];for(const b of h)g.push(eb(l,s,b));p={arrayValue:{values:g}}}else p=eb(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||tb(h,d),p=qR(a,o,h,d==="in"||d==="not-in");return me.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function XB(t,e,n){const r=e,i=dp("where",t);return hp._create(i,r,n)}class xw extends Aw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)YR(o,l),o=ky(o,l)}(e._query,n),new rn(e.firestore,e.converter,ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kw extends Uc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new j(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(s,o)}(e._query,this._field,this._direction);return new rn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ti(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ZB(t,e="asc"){const n=e,r=dp("orderBy",t);return kw._create(r,n)}class fp extends Uc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fp(e,n,r)}_apply(e){return new rn(e.firestore,e.converter,sf(e._query,this._limit,this._limitType))}}function e5(t){return NR("limit",t),fp._create("limit",t,"F")}function t5(t){return NR("limitToLast",t),fp._create("limitToLast",t,"L")}class pp extends Uc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new pp(e,n,r)}_apply(e){const n=QR(e,this.type,this._docOrFields,this._inclusive);return new rn(e.firestore,e.converter,function(i,s){return new ti(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function n5(...t){return pp._create("startAt",t,!0)}function r5(...t){return pp._create("startAfter",t,!1)}class mp extends Uc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new mp(e,n,r)}_apply(e){const n=QR(e,this.type,this._docOrFields,this._inclusive);return new rn(e.firestore,e.converter,function(i,s){return new ti(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function i5(...t){return mp._create("endBefore",t,!1)}function s5(...t){return mp._create("endAt",t,!0)}function QR(t,e,n,r){if(n[0]=te(n[0]),n[0]instanceof uc)return function(s,o,a,l,c){if(!l)throw new j(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of fa(s))if(h.field.isKeyField())d.push(Gs(o,l.key));else{const p=l.data.field(h.field);if(Yf(p))throw new j(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=h.field.canonicalString();throw new j(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Wi(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ho(t.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new j(M.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let b=0;b<d.length;b++){const S=d[b];if(p[b].field.isKeyField()){if(typeof S!="string")throw new j(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof S}`);if(!Fv(o)&&S.indexOf("/")!==-1)throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${S}' contains a slash.`);const P=o.path.child(pe.fromString(S));if(!W.isDocumentKey(P))throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const I=new W(P);g.push(Gs(a,I))}else{const P=qR(l,c,S);g.push(P)}}return new Wi(g,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function eb(t,e,n){if(typeof(n=te(n))=="string"){if(n==="")throw new j(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fv(e)&&n.indexOf("/")!==-1)throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!W.isDocumentKey(r))throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gs(t,new W(r))}if(n instanceof Ge)return Gs(t,n._key);throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function tb(t,e){if(!Array.isArray(t)||t.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Pw{convertValue(e,n="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return uo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>je(o.doubleValue));return new yw(s)}convertGeoPoint(e){return new lp(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ov(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ee(zP(r));const i=new qi(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||it(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class o5 extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Jr=class extends uc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},vu=class extends Jr{data(e={}){return super.data(e)}},Qi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ss(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vu(this._firestore,this._userDataWriter,r.key,r,new Ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:a5(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function a5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function JR(t,e){return t instanceof Jr&&e instanceof Jr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qi&&e instanceof Qi&&t._firestore===e._firestore&&LR(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){t=ve(t,Ge);const e=ve(t.firestore,ot);return kR(qt(e),t._key).then(n=>Rw(e,t,n))}class po extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function u5(t){t=ve(t,Ge);const e=ve(t.firestore,ot),n=qt(e),r=new po(e);return RB(n,t._key).then(i=>new Jr(e,r,t._key,i,new Ss(i!==null&&i.hasLocalMutations,!0),t.converter))}function c5(t){t=ve(t,Ge);const e=ve(t.firestore,ot);return kR(qt(e),t._key,{source:"server"}).then(n=>Rw(e,t,n))}function d5(t){t=ve(t,rn);const e=ve(t.firestore,ot),n=qt(e),r=new po(e);return HR(t._query),PR(n,t._query).then(i=>new Qi(e,r,t,i))}function h5(t){t=ve(t,rn);const e=ve(t.firestore,ot),n=qt(e),r=new po(e);return CB(n,t._query).then(i=>new Qi(e,r,t,i))}function f5(t){t=ve(t,rn);const e=ve(t.firestore,ot),n=qt(e),r=new po(e);return PR(n,t._query,{source:"server"}).then(i=>new Qi(e,r,t,i))}function nb(t,e,n){t=ve(t,Ge);const r=ve(t.firestore,ot),i=gp(t.converter,e,n);return Bc(r,[cp(ho(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$e.none())])}function rb(t,e,n,...r){t=ve(t,Ge);const i=ve(t.firestore,ot),s=ho(i);let o;return o=typeof(e=te(e))=="string"||e instanceof Hi?Tw(s,"updateDoc",t._key,e,n,r):Ew(s,"updateDoc",t._key,e),Bc(i,[o.toMutation(t._key,$e.exists(!0))])}function p5(t){return Bc(ve(t.firestore,ot),[new Za(t._key,$e.none())])}function m5(t,e){const n=ve(t.firestore,ot),r=ff(t),i=gp(t.converter,e);return Bc(n,[cp(ho(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$e.exists(!1))]).then(()=>r)}function XR(t,...e){var n,r,i;t=te(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Uy(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Uy(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(t instanceof Ge)c=ve(t.firestore,ot),d=Ja(t._key.path),l={next:h=>{e[o]&&e[o](Rw(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ve(t,rn);c=ve(h.firestore,ot),d=h._query;const p=new po(c);l={next:g=>{e[o]&&e[o](new Qi(c,p,h,g))},error:e[o+1],complete:e[o+2]},HR(t._query)}return function(p,g,b,S){const P=new sp(S),I=new aw(g,P,b);return p.asyncQueue.enqueueAndForget(async()=>iw(await La(p),I)),()=>{P.Za(),p.asyncQueue.enqueueAndForget(async()=>sw(await La(p),I))}}(qt(c),d,a,l)}function g5(t,e){return NB(qt(t=ve(t,ot)),Uy(e)?e:{next:e})}function Bc(t,e){return function(r,i){const s=new Ct;return r.asyncQueue.enqueueAndForget(async()=>oB(await mw(r),i,s)),s.promise}(qt(t),e)}function Rw(t,e,n){const r=n.docs.get(e._key),i=new po(t);return new Jr(t,i,e._key,r,new Ss(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _5=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ho(e)}set(e,n,r){this._verifyNotCommitted();const i=wi(e,this._firestore),s=gp(i.converter,n,r),o=cp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,$e.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=wi(e,this._firestore);let o;return o=typeof(n=te(n))=="string"||n instanceof Hi?Tw(this._dataReader,"WriteBatch.update",s._key,n,r,i):Ew(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,$e.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wi(e,this._firestore);return this._mutations=this._mutations.concat(new Za(n._key,$e.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function wi(t,e){if((t=te(t)).firestore!==e)throw new j(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v5=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ho(n)}get(n){const r=wi(n,this._firestore),i=new o5(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();const o=s[0];if(o.isFoundDocument())return new uc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new uc(this._firestore,i,r._key,null,r.converter);throw Y()})}set(n,r,i){const s=wi(n,this._firestore),o=gp(s.converter,r,i),a=cp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=wi(n,this._firestore);let a;return a=typeof(r=te(r))=="string"||r instanceof Hi?Tw(this._dataReader,"Transaction.update",o._key,r,i,s):Ew(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=wi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wi(e,this._firestore),r=new po(this._firestore);return super.get(e).then(i=>new Jr(this._firestore,r,n._key,i._document,new Ss(!1,!1),n.converter))}};function w5(t,e,n){t=ve(t,ot);const r=Object.assign(Object.assign({},y5),n);return function(s){if(s.maxAttempts<1)throw new j(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Ct;return s.asyncQueue.enqueueAndForget(async()=>{const c=await xB(s);new SB(s.asyncQueue,c,a,o,l).au()}),l.promise}(qt(t),i=>e(new v5(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(){return new jc("deleteField")}function E5(){return new _w("serverTimestamp")}function T5(...t){return new vw("arrayUnion",t)}function b5(...t){return new ww("arrayRemove",t)}function S5(t){return new Iw("increment",t)}(function(e,n=!0){(function(i){Ya=i})(Zi),nn(new gt("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ot(new Rj(r.getProvider("auth-internal")),new Oj(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qi(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Rt(W0,"4.7.3",e),Rt(W0,"4.7.3","esm2017")})();const A5="@firebase/firestore-compat",x5="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function sb(){if(!o4())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let ZR=class $y{constructor(e){this._delegate=e}static fromBase64String(e){return sb(),new $y(vr.fromBase64String(e))}static fromUint8Array(e){return ib(),new $y(vr.fromUint8Array(e))}toBase64(){return sb(),this._delegate.toBase64()}toUint8Array(){return ib(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t){return k5(t,["next","error","complete"])}function k5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{enableIndexedDbPersistence(e,n){return jB(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UB(e._delegate)}clearIndexedDbPersistence(e){return BB(e._delegate)}}class eC{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&yr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){VB(this._delegate,e,n,r)}enableNetwork(){return zB(this._delegate)}disableNetwork(){return qB(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CR("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $B(this._delegate)}onSnapshotsInSync(e){return g5(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ja(this,FR(this._delegate,e))}catch(n){throw Qt(n,"collection()","Firestore.collection()")}}doc(e){try{return new On(this,ff(this._delegate,e))}catch(n){throw Qt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ht(this,FB(this._delegate,e))}catch(n){throw Qt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return w5(this._delegate,n=>e(new tC(this,n)))}batch(){return qt(this._delegate),new nC(new _5(this._delegate,e=>Bc(this._delegate,e)))}loadBundle(e){return KB(this._delegate,e)}namedQuery(e){return WB(this._delegate,e).then(n=>n?new Ht(this,n):null)}}class yp extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ZR(new vr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return On.forKey(n,this.firestore,null)}}function R5(t){Aj(t)}class tC{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new yp(e)}get(e){const n=As(e);return this._delegate.get(n).then(r=>new cc(this._firestore,new Jr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=As(e);return r?(Cw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=As(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=As(e);return this._delegate.delete(n),this}}class nC{constructor(e){this._delegate=e}set(e,n,r){const i=As(e);return r?(Cw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=As(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=As(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class eo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new vu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=eo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new eo(e,new yp(e),n),i.set(n,s)),s}}eo.INSTANCES=new WeakMap;class On{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new yp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new On(n,new Ge(n._delegate,r,new W(e)))}static forKey(e,n,r){return new On(n,new Ge(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ja(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ja(this.firestore,FR(this._delegate,e))}catch(n){throw Qt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=te(e),e instanceof Ge?MR(this._delegate,e):!1}set(e,n){n=Cw("DocumentReference.set",n);try{return n?nb(this._delegate,e,n):nb(this._delegate,e)}catch(r){throw Qt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?rb(this._delegate,e):rb(this._delegate,e,n,...r)}catch(i){throw Qt(i,"updateDoc()","DocumentReference.update()")}}delete(){return p5(this._delegate)}onSnapshot(...e){const n=rC(e),r=iC(e,i=>new cc(this.firestore,new Jr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return XR(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=u5(this._delegate):(e==null?void 0:e.source)==="server"?n=c5(this._delegate):n=l5(this._delegate),n.then(r=>new cc(this.firestore,new Jr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new On(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qt(t,e,n){return t.message=t.message.replace(e,n),t}function rC(t){for(const e of t)if(typeof e=="object"&&!zy(e))return e;return{}}function iC(t,e){var n,r;let i;return zy(t[0])?i=t[0]:zy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class cc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new On(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return JR(this._delegate,e._delegate)}}class dc extends cc{data(e){const n=this._delegate.data(e);return this._delegate._converter||xj(n!==void 0),n}}class Ht{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new yp(e)}where(e,n,r){try{return new Ht(this.firestore,di(this._delegate,XB(e,n,r)))}catch(i){throw Qt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ht(this.firestore,di(this._delegate,ZB(e,n)))}catch(r){throw Qt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ht(this.firestore,di(this._delegate,e5(e)))}catch(n){throw Qt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ht(this.firestore,di(this._delegate,t5(e)))}catch(n){throw Qt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ht(this.firestore,di(this._delegate,n5(...e)))}catch(n){throw Qt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ht(this.firestore,di(this._delegate,r5(...e)))}catch(n){throw Qt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ht(this.firestore,di(this._delegate,i5(...e)))}catch(n){throw Qt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ht(this.firestore,di(this._delegate,s5(...e)))}catch(n){throw Qt(n,"endAt()","Query.endAt()")}}isEqual(e){return LR(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=h5(this._delegate):(e==null?void 0:e.source)==="server"?n=f5(this._delegate):n=d5(this._delegate),n.then(r=>new qy(this.firestore,new Qi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=rC(e),r=iC(e,i=>new qy(this.firestore,new Qi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return XR(this._delegate,n,r)}withConverter(e){return new Ht(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class C5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new dc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ht(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new C5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new dc(this._firestore,r))})}isEqual(e){return JR(this._delegate,e._delegate)}}class ja extends Ht{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new On(this.firestore,e):null}doc(e){try{return e===void 0?new On(this.firestore,ff(this._delegate)):new On(this.firestore,ff(this._delegate,e))}catch(n){throw Qt(n,"doc()","CollectionReference.doc()")}}add(e){return m5(this._delegate,e).then(n=>new On(this.firestore,n))}isEqual(e){return MR(this._delegate,e._delegate)}withConverter(e){return new ja(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function As(t){return ve(t,Ge)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(...e){this._delegate=new Hi(...e)}static documentId(){return new Nw(Be.keyField().canonicalString())}isEqual(e){return e=te(e),e instanceof Hi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._delegate=e}static serverTimestamp(){const e=E5();return e._methodName="FieldValue.serverTimestamp",new vs(e)}static delete(){const e=I5();return e._methodName="FieldValue.delete",new vs(e)}static arrayUnion(...e){const n=T5(...e);return n._methodName="FieldValue.arrayUnion",new vs(n)}static arrayRemove(...e){const n=b5(...e);return n._methodName="FieldValue.arrayRemove",new vs(n)}static increment(e){const n=S5(e);return n._methodName="FieldValue.increment",new vs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={Firestore:eC,GeoPoint:lp,Timestamp:ze,Blob:ZR,Transaction:tC,WriteBatch:nC,DocumentReference:On,DocumentSnapshot:cc,Query:Ht,QueryDocumentSnapshot:dc,QuerySnapshot:qy,CollectionReference:ja,FieldPath:Nw,FieldValue:vs,setLogLevel:R5,CACHE_SIZE_UNLIMITED:LB};function D5(t,e){t.INTERNAL.registerComponent(new gt("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},N5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){D5(t,(e,n)=>new eC(e,n,new P5)),t.registerVersion(A5,x5)}O5(ht);const sC="@firebase/installations",Dw="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1e4,aC=`w:${Dw}`,lC="FIS_v2",V5="https://firebaseinstallations.googleapis.com/v1",F5=60*60*1e3,M5="installations",L5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},to=new Zn(M5,L5,j5);function uC(t){return t instanceof Pt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC({projectId:t}){return`${V5}/projects/${t}/installations`}function dC(t){return{token:t.token,requestStatus:2,expiresIn:B5(t.expiresIn),creationTime:Date.now()}}async function hC(t,e){const r=(await e.json()).error;return to.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function fC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function U5(t,{refreshToken:e}){const n=fC(t);return n.append("Authorization",$5(e)),n}async function pC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function B5(t){return Number(t.replace("s","000"))}function $5(t){return`${lC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=cC(t),i=fC(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:lC,appId:t.appId,sdkVersion:aC},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await pC(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:dC(c.authToken)}}else throw await hC("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=/^[cdef][\w-]{21}$/,Ky="";function W5(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=G5(t);return K5.test(n)?n:Ky}catch{return Ky}}function G5(t){return q5(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new Map;function yC(t,e){const n=_p(t);_C(n,e),H5(n,e)}function _C(t,e){const n=gC.get(t);if(n)for(const r of n)r(e)}function H5(t,e){const n=Q5();n&&n.postMessage({key:t,fid:e}),Y5()}let xs=null;function Q5(){return!xs&&"BroadcastChannel"in self&&(xs=new BroadcastChannel("[Firebase] FID Change"),xs.onmessage=t=>{_C(t.data.key,t.data.fid)}),xs}function Y5(){gC.size===0&&xs&&(xs.close(),xs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="firebase-installations-database",X5=1,no="firebase-installations-store";let Vm=null;function Ow(){return Vm||(Vm=Wa(J5,X5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(no)}}})),Vm}async function mf(t,e){const n=_p(t),i=(await Ow()).transaction(no,"readwrite"),s=i.objectStore(no),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&yC(t,e.fid),e}async function vC(t){const e=_p(t),r=(await Ow()).transaction(no,"readwrite");await r.objectStore(no).delete(e),await r.done}async function vp(t,e){const n=_p(t),i=(await Ow()).transaction(no,"readwrite"),s=i.objectStore(no),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&yC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(t){let e;const n=await vp(t.appConfig,r=>{const i=Z5(r),s=e$(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Ky?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Z5(t){const e=t||{fid:W5(),registrationStatus:0};return wC(e)}function e$(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(to.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=t$(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:n$(t)}:{installationEntry:e}}async function t$(t,e){try{const n=await z5(t,e);return mf(t.appConfig,n)}catch(n){throw uC(n)&&n.customData.serverCode===409?await vC(t.appConfig):await mf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function n$(t){let e=await ob(t.appConfig);for(;e.registrationStatus===1;)await mC(100),e=await ob(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Vw(t);return r||n}return e}function ob(t){return vp(t,e=>{if(!e)throw to.create("installation-not-found");return wC(e)})}function wC(t){return r$(t)?{fid:t.fid,registrationStatus:0}:t}function r$(t){return t.registrationStatus===1&&t.registrationTime+oC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i$({appConfig:t,heartbeatServiceProvider:e},n){const r=s$(t,n),i=U5(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:aC,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await pC(()=>fetch(r,a));if(l.ok){const c=await l.json();return dC(c)}else throw await hC("Generate Auth Token",l)}function s$(t,{fid:e}){return`${cC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t,e=!1){let n;const r=await vp(t.appConfig,s=>{if(!IC(s))throw to.create("not-registered");const o=s.authToken;if(!e&&l$(o))return s;if(o.requestStatus===1)return n=o$(t,e),s;{if(!navigator.onLine)throw to.create("app-offline");const a=c$(s);return n=a$(t,a),a}});return n?await n:r.authToken}async function o$(t,e){let n=await ab(t.appConfig);for(;n.authToken.requestStatus===1;)await mC(100),n=await ab(t.appConfig);const r=n.authToken;return r.requestStatus===0?Fw(t,e):r}function ab(t){return vp(t,e=>{if(!IC(e))throw to.create("not-registered");const n=e.authToken;return d$(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function a$(t,e){try{const n=await i$(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await mf(t.appConfig,r),n}catch(n){if(uC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await vC(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await mf(t.appConfig,r)}throw n}}function IC(t){return t!==void 0&&t.registrationStatus===2}function l$(t){return t.requestStatus===2&&!u$(t)}function u$(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+F5}function c$(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function d$(t){return t.requestStatus===1&&t.requestTime+oC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h$(t){const e=t,{installationEntry:n,registrationPromise:r}=await Vw(e);return r?r.catch(console.error):Fw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f$(t,e=!1){const n=t;return await p$(n),(await Fw(n,e)).token}async function p$(t){const{registrationPromise:e}=await Vw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(t){if(!t||!t.options)throw Fm("App Configuration");if(!t.name)throw Fm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fm(t){return to.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="installations",g$="installations-internal",y$=t=>{const e=t.getProvider("app").getImmediate(),n=m$(e),r=Mf(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},_$=t=>{const e=t.getProvider("app").getImmediate(),n=Mf(e,EC).getImmediate();return{getId:()=>h$(n),getToken:i=>f$(n,i)}};function v$(){nn(new gt(EC,y$,"PUBLIC")),nn(new gt(g$,_$,"PRIVATE"))}v$();Rt(sC,Dw);Rt(sC,Dw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="analytics",w$="firebase_id",I$="origin",E$=60*1e3,T$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=new Ic("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new Zn("analytics","Analytics",b$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t){if(!t.startsWith(Mw)){const e=Sn.create("invalid-gtag-resource",{gtagURL:t});return Tt.warn(e.message),""}return t}function TC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function A$(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function x$(t,e){const n=A$("firebase-js-sdk-policy",{createScriptURL:S$}),r=document.createElement("script"),i=`${Mw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function k$(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function P$(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await TC(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Tt.error(a)}t("config",i,s)}async function R$(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await TC(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Tt.error(s)}}function C$(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await R$(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await P$(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Tt.error(a)}}return i}function N$(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=C$(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function D$(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Mw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$=30,V$=1e3;class F${constructor(e={},n=V$){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const bC=new F$;function M$(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function L$(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:M$(r)},s=T$.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function j$(t,e=bC,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Sn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Sn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new $$;return setTimeout(async()=>{a.abort()},E$),SC({appId:r,apiKey:i,measurementId:s},o,a,e)}async function SC(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=bC){var s;const{appId:o,measurementId:a}=t;try{await U$(r,e)}catch(l){if(a)return Tt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await L$(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!B$(c)){if(i.deleteThrottleMetadata(o),a)return Tt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?g0(n,i.intervalMillis,O$):g0(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,h),Tt.debug(`Calling attemptFetch again in ${d} millis`),SC(t,h,r,i)}}function U$(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function B$(t){if(!(t instanceof Pt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class $${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function z$(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}async function q$(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function K$(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function W$(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function G$(t,e){const n=await t;window[`ga-disable-${n}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H$(){if(Gr())try{await rv()}catch(t){return Tt.warn(Sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Tt.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Q$(t,e,n,r,i,s,o){var a;const l=j$(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Tt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Tt.error(g)),e.push(l);const c=H$().then(g=>{if(g)return r.getId()}),[d,h]=await Promise.all([l,c]);D$(s)||x$(s,d.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[I$]="firebase",p.update=!0,h!=null&&(p[w$]=h),i("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y$=class{constructor(e){this.app=e}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}},Br={},ub=[];const cb={};let ph="dataLayer",AC="gtag",db,$c,Wy=!1;function J$(t){if(Wy)throw Sn.create("already-initialized");t.dataLayerName&&(ph=t.dataLayerName),t.gtagName&&(AC=t.gtagName)}function X$(){const t=[];if(Ff()&&t.push("This is a browser extension environment."),iv()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});Tt.warn(n.message)}}function Z$(t,e,n){X$();const r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Tt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(Br[r]!=null)throw Sn.create("already-exists",{id:r});if(!Wy){k$(ph);const{wrappedGtag:s,gtagCore:o}=N$(Br,ub,cb,ph,AC);$c=s,db=o,Wy=!0}return Br[r]=Q$(t,ub,cb,e,db,ph,n),new Y$(t)}async function e3(){if(Ff()||!iv()||!Gr())return!1;try{return await rv()}catch{return!1}}function t3(t,e,n){t=te(t),q$($c,Br[t.app.options.appId],e,n).catch(r=>Tt.error(r))}function n3(t,e,n){t=te(t),K$($c,Br[t.app.options.appId],e,n).catch(r=>Tt.error(r))}function r3(t,e,n){t=te(t),W$($c,Br[t.app.options.appId],e,n).catch(r=>Tt.error(r))}function i3(t,e){t=te(t),G$(Br[t.app.options.appId],e).catch(n=>Tt.error(n))}function xC(t,e,n,r){t=te(t),z$($c,Br[t.app.options.appId],e,n,r).catch(i=>Tt.error(i))}const hb="@firebase/analytics",fb="0.10.8";function s3(){nn(new gt(lb,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Z$(r,i,n)},"PUBLIC")),nn(new gt("analytics-internal",t,"PRIVATE")),Rt(hb,fb),Rt(hb,fb,"esm2017");function t(e){try{const n=e.getProvider(lb).getImmediate();return{logEvent:(r,i,s)=>xC(n,r,i,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}s3();const o3="@firebase/analytics-compat",a3="0.2.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){xC(this._delegate,e,n,r)}setCurrentScreen(e,n){t3(this._delegate,e,n)}setUserId(e,n){n3(this._delegate,e,n)}setUserProperties(e,n){r3(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){i3(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gy;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(Gy||(Gy={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new kC(e,n)};function u3(){const t={Analytics:kC,settings:J$,isSupported:e3,EventName:Gy};ht.INTERNAL.registerComponent(new gt("analytics-compat",l3,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}u3();ht.registerVersion(o3,a3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="/firebase-messaging-sw.js",d3="/firebase-cloud-messaging-push-scope",PC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",h3="https://fcmregistrations.googleapis.com/v1",RC="google.c.a.c_id",f3="google.c.a.c_l",p3="google.c.a.ts",m3="google.c.a.e";var pb;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(pb||(pb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var hc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(hc||(hc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g3(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="fcm_token_details_db",y3=5,mb="fcm_token_object_Store";async function _3(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Mm))return null;let e=null;return(await Wa(Mm,y3,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(mb))return;const l=o.objectStore(mb),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Sr(d.vapidKey)}}}else if(i===3){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Sr(d.auth),p256dh:Sr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Sr(d.vapidKey)}}}else if(i===4){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Sr(d.auth),p256dh:Sr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Sr(d.vapidKey)}}}}}})).close(),await la(Mm),await la("fcm_vapid_details_db"),await la("undefined"),v3(e)?e:null}function v3(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="firebase-messaging-database",I3=1,ro="firebase-messaging-store";let Lm=null;function Lw(){return Lm||(Lm=Wa(w3,I3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ro)}}})),Lm}async function CC(t){const e=Uw(t),r=await(await Lw()).transaction(ro).objectStore(ro).get(e);if(r)return r;{const i=await _3(t.appConfig.senderId);if(i)return await jw(t,i),i}}async function jw(t,e){const n=Uw(t),i=(await Lw()).transaction(ro,"readwrite");return await i.objectStore(ro).put(e,n),await i.done,e}async function E3(t){const e=Uw(t),r=(await Lw()).transaction(ro,"readwrite");await r.objectStore(ro).delete(e),await r.done}function Uw({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},en=new Zn("messaging","Messaging",T3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b3(t,e){const n=await $w(t),r=DC(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(Bw(t.appConfig),i)).json()}catch(o){throw en.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw en.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw en.create("token-subscribe-no-token");return s.token}async function S3(t,e){const n=await $w(t),r=DC(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Bw(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw en.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw en.create("token-update-failed",{errorInfo:o})}if(!s.token)throw en.create("token-update-no-token");return s.token}async function NC(t,e){const r={method:"DELETE",headers:await $w(t)};try{const s=await(await fetch(`${Bw(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw en.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw en.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Bw({projectId:t}){return`${h3}/projects/${t}/registrations`}async function $w({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function DC({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==PC&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=7*24*60*60*1e3;async function x3(t){const e=await R3(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Sr(e.getKey("auth")),p256dh:Sr(e.getKey("p256dh"))},r=await CC(t.firebaseDependencies);if(r){if(C3(r.subscriptionOptions,n))return Date.now()>=r.createTime+A3?P3(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await NC(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return gb(t.firebaseDependencies,n)}else return gb(t.firebaseDependencies,n)}async function k3(t){const e=await CC(t.firebaseDependencies);e&&(await NC(t.firebaseDependencies,e.token),await E3(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function P3(t,e){try{const n=await S3(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await jw(t.firebaseDependencies,r),n}catch(n){throw n}}async function gb(t,e){const r={token:await b3(t,e),createTime:Date.now(),subscriptionOptions:e};return await jw(t,r),r.token}async function R3(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:g3(e)})}function C3(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return N3(e,t),D3(e,t),O3(e,t),e}function N3(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function D3(t,e){e.data&&(t.data=e.data)}function O3(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t){return typeof t=="object"&&!!t&&RC in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t){if(!t||!t.options)throw jm("App Configuration Object");if(!t.name)throw jm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw jm(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function jm(t){return en.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M3=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=F3(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t){try{t.swRegistration=await navigator.serviceWorker.register(c3,{scope:d3}),t.swRegistration.update().catch(()=>{})}catch(e){throw en.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(t,e){if(!e&&!t.swRegistration&&await OC(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw en.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=PC)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e){if(!navigator)throw en.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw en.create("permission-blocked");return await j3(t,e==null?void 0:e.vapidKey),await L3(t,e==null?void 0:e.serviceWorkerRegistration),x3(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(t,e,n){const r=B3(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[RC],message_name:n[f3],message_time:n[p3],message_device_time:Math.floor(Date.now()/1e3)})}function B3(t){switch(t){case hc.NOTIFICATION_CLICKED:return"notification_open";case hc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===hc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(yb(n)):t.onMessageHandler.next(yb(n)));const r=n.data;V3(r)&&r[m3]==="1"&&await U3(t,n.messageType,r)}const _b="@firebase/messaging",vb="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=t=>{const e=new M3(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>$3(e,n)),e},q3=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>VC(e,r)}};function K3(){nn(new gt("messaging",z3,"PUBLIC")),nn(new gt("messaging-internal",q3,"PRIVATE")),Rt(_b,vb),Rt(_b,vb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t){if(!navigator)throw en.create("only-available-in-window");return t.swRegistration||await OC(t),k3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t,e){if(!navigator)throw en.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function H3(t,e){return t=te(t),VC(t,e)}function Q3(t){return t=te(t),W3(t)}function Y3(t,e){return t=te(t),G3(t,e)}K3();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",J3="https://fcmregistrations.googleapis.com/v1",MC="FCM_MSG",X3="google.c.a.c_id",Z3=3,e6=1;var gf;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(gf||(gf={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var yf;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(yf||(yf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function t6(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="fcm_token_details_db",n6=5,wb="fcm_token_object_Store";async function r6(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Um))return null;let e=null;return(await Wa(Um,n6,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(wb))return;const l=o.objectStore(wb),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Ar(d.vapidKey)}}}else if(i===3){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ar(d.auth),p256dh:Ar(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ar(d.vapidKey)}}}else if(i===4){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ar(d.auth),p256dh:Ar(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ar(d.vapidKey)}}}}}})).close(),await la(Um),await la("fcm_vapid_details_db"),await la("undefined"),i6(e)?e:null}function i6(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="firebase-messaging-database",o6=1,io="firebase-messaging-store";let Bm=null;function zw(){return Bm||(Bm=Wa(s6,o6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(io)}}})),Bm}async function qw(t){const e=Ww(t),r=await(await zw()).transaction(io).objectStore(io).get(e);if(r)return r;{const i=await r6(t.appConfig.senderId);if(i)return await Kw(t,i),i}}async function Kw(t,e){const n=Ww(t),i=(await zw()).transaction(io,"readwrite");return await i.objectStore(io).put(e,n),await i.done,e}async function a6(t){const e=Ww(t),r=(await zw()).transaction(io,"readwrite");await r.objectStore(io).delete(e),await r.done}function Ww({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},mr=new Zn("messaging","Messaging",l6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(t,e){const n=await Hw(t),r=jC(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(Gw(t.appConfig),i)).json()}catch(o){throw mr.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw mr.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw mr.create("token-subscribe-no-token");return s.token}async function c6(t,e){const n=await Hw(t),r=jC(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Gw(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw mr.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw mr.create("token-update-failed",{errorInfo:o})}if(!s.token)throw mr.create("token-update-no-token");return s.token}async function LC(t,e){const r={method:"DELETE",headers:await Hw(t)};try{const s=await(await fetch(`${Gw(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw mr.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw mr.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Gw({projectId:t}){return`${J3}/projects/${t}/registrations`}async function Hw({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function jC({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==FC&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=7*24*60*60*1e3;async function h6(t){const e=await p6(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ar(e.getKey("auth")),p256dh:Ar(e.getKey("p256dh"))},r=await qw(t.firebaseDependencies);if(r){if(m6(r.subscriptionOptions,n))return Date.now()>=r.createTime+d6?f6(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await LC(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Eb(t.firebaseDependencies,n)}else return Eb(t.firebaseDependencies,n)}async function Ib(t){const e=await qw(t.firebaseDependencies);e&&(await LC(t.firebaseDependencies,e.token),await a6(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function f6(t,e){try{const n=await c6(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Kw(t.firebaseDependencies,r),n}catch(n){throw n}}async function Eb(t,e){const r={token:await u6(t,e),createTime:Date.now(),subscriptionOptions:e};return await Kw(t,r),r.token}async function p6(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t6(e)})}function m6(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return y6(e,t),_6(e,t),v6(e,t),e}function y6(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function _6(t,e){e.data&&(t.data=e.data)}function v6(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t){return typeof t=="object"&&!!t&&X3 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t){return new Promise(e=>{setTimeout(e,t)})}async function E6(t,e){const n=T6(e,await t.firebaseDependencies.installations.getId());b6(t,n,e.productId)}function T6(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=gf.DISPLAY_NOTIFICATION.toString():i.message_type=gf.DATA_MESSAGE.toString(),i.sdk_platform=Z3.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=e6.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function b6(t,e,n){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),n&&(r.compliance_data=S6(n)),t.logEvents.push(r)}function S6(t){return{privacy_context:{prequest:{origin_associated_product_id:t}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A6(t,e){var n,r;const{newSubscription:i}=t;if(!i){await Ib(e);return}const s=await qw(e.firebaseDependencies);await Ib(e),e.vapidKey=(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:FC,await h6(e)}async function x6(t,e){const n=R6(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await E6(e,n);const r=await UC();if(N6(r))return D6(r,n);if(n.notification&&await O6(P6(n)),!!e&&e.onBackgroundMessageHandler){const i=g6(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function k6(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[MC];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=V6(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await C6(s);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await I6(3e3)),!!a)return r.messageType=yf.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function P6(t){const e=Object.assign({},t.notification);return e.data={[MC]:t},e}function R6({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function C6(t){const e=await UC();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function N6(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function D6(t,e){e.isFirebaseMessaging=!0,e.messageType=yf.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function UC(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function O6(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function V6(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(w6(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t){if(!t||!t.options)throw $m("App Configuration Object");if(!t.name)throw $m("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw $m(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function $m(t){return mr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=F6(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=t=>{const e=new M6(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(x6(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(A6(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(k6(n))}),e};function j6(){nn(new gt("messaging-sw",L6,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e){if(self.document!==void 0)throw mr.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function B6(t,e){return t=te(t),U6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */j6();const $6="@firebase/messaging-compat",z6="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){return self&&"ServiceWorkerGlobalScope"in self?W6():K6()}function K6(){return typeof window<"u"&&Gr()&&iv()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function W6(){return Gr()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class Tb{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return H3(this._delegate,e)}async deleteToken(){return Q3(this._delegate)}onMessage(e){return Y3(this._delegate,e)}onBackgroundMessage(e){return B6(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=t=>self&&"ServiceWorkerGlobalScope"in self?new Tb(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new Tb(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),H6={isSupported:q6};function Q6(){ht.INTERNAL.registerComponent(new gt("messaging-compat",G6,"PUBLIC").setServiceProps(H6))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Q6();ht.registerVersion($6,z6);const BC="https://script.google.com/macros/s/AKfycbx86khRAr6tMPAnVbBzMoWNIJ5zjLGDYNJePaujCr1d3LOZvAi3ihnVJkQSVUnOD5YN/exec";let Si=null,Mo=null,Y6=null;try{const t={apiKey:"AIzaSyCqoqNq7N-x5Wr6TsJkyCU0J6o-Mj1Ir8g",authDomain:"conizm-01.firebaseapp.com",projectId:"conizm-01",storageBucket:"conizm-01.firebasestorage.app",messagingSenderId:"180210157068",appId:"1:180210157068:web:e03a373dd3f818cdee1029",measurementId:"G-YD40SF3F32"};ht.apps.length||ht.initializeApp(t),Si=ht.firestore(),Mo=ht.auth(),Y6=ht.analytics()}catch(t){console.warn("Firebase Init Error:",t)}const be=new Ns("WordloopDB");be.version(3).stores({words:"++id, word, nextReview, interval, repetition, efactor, addedAt, folder",deleted_words:"word"});const zc=async(t,e={},n=15e3)=>{const r=new AbortController,i=setTimeout(()=>r.abort(),n);try{const s=await fetch(t,{...e,signal:r.signal});return clearTimeout(i),s}catch(s){throw clearTimeout(i),s}},bb=async(t,e="en|ja")=>{if(!t)return null;const[n,r]=e.split("|"),i=`${BC}?text=${encodeURIComponent(t)}&source=${n}&target=${r}`;try{const s=await zc(i,{},4e3);return s.ok?(await s.json()).translation:null}catch{return null}},$C=t=>/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/.test(t),zm=async(t,e)=>{if(!e)return null;const n=e.trim(),r=`${t}JSONMarkdownJSON
    :
    "simpleTranslation": : 1. 'API''Browser' 2. 'prompt' vs 'monitor' vs 
    "spellCheck": : 'appel''apple': Yasu null 
    "definition": 1020
    "exampleEn": 1
    "exampleJa": 
    "supplement": `,i=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${n}`,s=async(o=0)=>{var a,l,c,d;try{const h=await zc(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}]})},15e3);if(!h.ok){if((h.status===503||h.status===429)&&o<2){const S=Math.pow(2,o)*1e3;return await new Promise(P=>setTimeout(P,S)),s(o+1)}const b=await h.json().catch(()=>({}));return h.status===400&&(JSON.stringify(b).includes("API key")||JSON.stringify(b).includes("INVALID_ARGUMENT"))?{error:"ERROR_API_KEY"}:null}const p=await h.json();let g=null;if((d=(c=(l=(a=p==null?void 0:p.candidates)==null?void 0:a[0])==null?void 0:l.content)==null?void 0:c.parts)!=null&&d[0]&&(g=p.candidates[0].content.parts[0].text),g)try{const b="```",S=new RegExp(b+"json","g"),P=new RegExp(b,"g"),I=g.replace(S,"").replace(P,"").trim();return JSON.parse(I)}catch{return null}return null}catch{if(o<2){const p=Math.pow(2,o)*1e3;return await new Promise(g=>setTimeout(g,p)),s(o+1)}return null}};return s()},J6=async t=>{try{const e=`https://jisho.org/api/v1/search/words?keyword=${encodeURIComponent(t)}`,n=`${BC}?url=${encodeURIComponent(e)}`,r=await zc(n,{},4e3);return r.ok?await r.json():null}catch{return null}},zC=async t=>{try{const e=await zc(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(t)}`,{},4e3);return e.ok?await e.json():null}catch{return null}},qm=new Map,Sb=async t=>{var c,d;if(qm.has(t))return qm.get(t);let e=t,n=$C(t),r="Jisho.org / Google",i="",s=[],o="",a=!1;try{const h=await J6(t);if(h&&h.data&&h.data.length>0)if(a=!0,r="Jisho.org / Google",n){const p=h.data[0],g=p.senses[0].english_definitions[0],b=await bb(t,"ja|en");b&&b!==t?e=b:e=g,i=t,o="",p.senses.slice(0,3).forEach(S=>s.push({partOfSpeech:S.parts_of_speech.join(", ")||"Common",definitions:[{ja:S.english_definitions.join("; "),en:"",exEn:"",exJa:""}]}))}else{let p=h.data;const g=t.toLowerCase().split(/\s+/).filter(b=>!["a","the","to"].includes(b));if(g.length>0){const b=p.filter(S=>g.every(P=>JSON.stringify(S).toLowerCase().includes(P)));b.length>0&&(p=b)}p=p.slice(0,5),i=p[0].japanese[0].word||p[0].japanese[0].reading,p.forEach(b=>{const S=b.japanese[0].word||b.japanese[0].reading,P=b.japanese[0].reading,I=P&&P!==S?`${S} (${P})`:S,y=b.senses.map(C=>C.english_definitions.join(", ")).join("; "),A=b.senses[0].parts_of_speech.join(", ")||"Common";s.push({partOfSpeech:A,definitions:[{ja:I,en:y,exEn:"",exJa:""}]})}),e=t}}catch{}if(!a){if(!n&&!t.trim().includes(" ")){const p=await zC(t);if(!p||p.length===0)throw new Error("NOT_FOUND")}let h=await bb(t,n?"ja|en":"en|ja");if(!h||h===t)throw new Error("NOT_FOUND");e=n?h:t,i=n?t:h,s.push({partOfSpeech:"Translation",definitions:[{ja:i,en:"",exEn:"",exJa:""}]}),r="Google Translate"}const l={word:e,translation:i,meanings:s,pronunciation:o,synonyms:[],audioUrl:"",definition:((d=(c=s[0])==null?void 0:c.definitions[0])==null?void 0:d.ja)||i,example:"",tips:r};return qm.set(t,l),l},Ab=async(t,e)=>{const n=t.word,r=$C(e);try{const i=await zC(n);if(!i||i.length===0)return null;const s=i[0],o={...t},a=s.phonetics.find(l=>l.audio&&l.audio!=="");return a&&(o.audioUrl=a.audio),!o.pronunciation&&!r&&(o.pronunciation=s.phonetic||""),o.synonyms=s.meanings.flatMap(l=>l.synonyms).slice(0,5),o}catch{return null}};let Lo=[];const Qw=()=>{Lo=window.speechSynthesis.getVoices().filter(e=>e.lang.startsWith("en"))};Qw();window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=Qw);const Xo=(t,e=null)=>{if(e){new Audio(e).play().catch(i=>console.error("Audio play failed",i));return}if(!t)return;window.speechSynthesis.cancel();const n=new SpeechSynthesisUtterance(t);n.lang="en-US",Lo.length===0&&Qw();const r=Lo.find(i=>i.name==="Google US English")||Lo.find(i=>i.lang==="en-US")||Lo.find(i=>i.lang==="en-GB")||Lo[0];r&&(n.voice=r),window.speechSynthesis.speak(n)},X6=({msg:t,onClose:e})=>(re.useEffect(()=>{const n=setTimeout(e,3e3);return()=>clearTimeout(n)},[]),_.jsx("div",{className:"fixed bottom-32 left-1/2 toast-anim neu-flat px-6 py-3 rounded-full text-sm text-[#258FAF] font-bold z-[100] shadow-lg text-center whitespace-nowrap bg-white border border-gray-100",children:t})),Z6=({isOpen:t,onClose:e,folders:n,onSelectFolder:r,onCreateFolder:i})=>{const[s,o]=re.useState(""),a=re.useRef(null),l=()=>{a.current&&(clearTimeout(a.current),a.current=null)};if(re.useEffect(()=>(t&&(a.current=setTimeout(()=>{e()},1500)),()=>l()),[t]),!t)return null;const c=()=>{s.trim()&&(i(s.trim()),o(""))};return _.jsxs("div",{className:"fixed inset-0 z-[90] flex items-end justify-center",children:[_.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:e}),_.jsxs("div",{className:"relative bg-[#F8FAFC] w-full max-w-md rounded-t-3xl p-4 shadow-2xl slide-up border-t border-white/50 pb-8",onMouseDown:l,onTouchStart:l,children:[_.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-2 z-10",children:_.jsx("i",{className:"fas fa-times text-lg"})}),_.jsxs("h3",{className:"text-lg font-bold text-[#258FAF] mb-4 flex items-center gap-2 mt-2 ml-1",children:[_.jsx("i",{className:"fas fa-folder-open"})," "]}),_.jsx("div",{className:"space-y-3 mb-6 max-h-[40vh] overflow-y-auto no-scrollbar py-1",children:n.map(d=>_.jsxs("button",{onClick:()=>r(d),className:"w-full text-left p-4 rounded-xl neu-flat hover:bg-gray-50 flex justify-between items-center transition-transform active:scale-[0.99]",children:[_.jsxs("span",{className:"font-bold text-gray-700 flex items-center",children:[d,d==="main"&&_.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded ml-2",children:"Default"})]}),_.jsx("i",{className:"fas fa-chevron-right text-gray-300 text-xs"})]},d))}),_.jsxs("div",{className:"flex gap-2 w-full",children:[_.jsx("input",{type:"text",value:s,onChange:d=>o(d.target.value),placeholder:"...",className:"neu-input flex-1 p-3 text-sm min-w-0"}),_.jsx("button",{onClick:c,disabled:!s.trim(),className:"bg-[#258FAF] text-white px-4 rounded-xl font-bold text-sm disabled:opacity-50 shadow-md whitespace-nowrap shrink-0",children:""})]})]})]})},ez=({isOpen:t,onClose:e,folders:n,onRename:r,onDelete:i})=>{const[s,o]=re.useState(null),[a,l]=re.useState("");if(!t)return null;const c=p=>{o(p),l(p)},d=()=>{a.trim()&&a!==s&&r(s,a.trim()),o(null),l("")},h=p=>{i(p)};return _.jsxs("div",{className:"fixed inset-0 z-[95] flex items-end justify-center",children:[_.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:e}),_.jsxs("div",{className:"relative bg-[#F8FAFC] w-full max-w-md rounded-t-3xl p-4 shadow-2xl slide-up border-t border-white/50 pb-8",children:[_.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-2 z-10",children:_.jsx("i",{className:"fas fa-times text-lg"})}),_.jsxs("h3",{className:"text-lg font-bold text-[#258FAF] mb-4 flex items-center gap-2 mt-2 ml-1",children:[_.jsx("i",{className:"fas fa-cog"})," "]}),_.jsx("div",{className:"space-y-3 mb-6 max-h-[50vh] overflow-y-auto no-scrollbar py-1",children:n.map(p=>_.jsxs("div",{className:"w-full text-left p-4 rounded-xl neu-flat flex justify-between items-center",children:[s===p?_.jsxs("div",{className:"flex-1 flex gap-2 mr-2",children:[_.jsx("input",{type:"text",value:a,onChange:g=>l(g.target.value),className:"neu-input flex-1 p-2 text-sm",autoFocus:!0}),_.jsx("button",{onClick:d,className:"text-[#258FAF] p-2",children:_.jsx("i",{className:"fas fa-check"})})]}):_.jsx("span",{className:"font-bold text-gray-700 flex-1",children:p}),p!=="main"&&s!==p&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>c(p),className:"w-8 h-8 rounded-full neu-pressed text-gray-400 hover:text-[#258FAF] flex items-center justify-center",children:_.jsx("i",{className:"fas fa-pen text-xs"})}),_.jsx("button",{onClick:()=>h(p),className:"w-8 h-8 rounded-full neu-pressed text-gray-400 hover:text-red-500 flex items-center justify-center",children:_.jsx("i",{className:"fas fa-trash text-xs"})})]}),p==="main"&&_.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Default"})]},p))})]})]})},tz=({isOpen:t,type:e,message:n,onConfirm:r,onCancel:i})=>t?_.jsx("div",{className:"fixed inset-0 bg-slate-100/90 z-[110] flex items-center justify-center p-4 backdrop-blur-sm fade-in",children:_.jsxs("div",{className:"neu-flat bg-[#F8FAFC] p-6 w-full max-w-xs text-center border border-white",children:[_.jsx("p",{className:"text-gray-700 font-bold mb-6 leading-relaxed whitespace-pre-wrap text-sm",children:n}),_.jsxs("div",{className:"flex gap-4 justify-center",children:[e==="confirm"&&_.jsx("button",{onClick:i,className:"neu-btn w-24 py-3 text-gray-500 font-bold text-xs rounded-xl",children:""}),_.jsx("button",{onClick:r,className:"bg-[#258FAF] text-white w-24 py-3 rounded-xl font-bold text-xs shadow-lg active:scale-95 transition-transform",children:"OK"})]})]})}):null,nz=()=>_.jsx("div",{className:"fixed inset-0 bg-[#F8FAFC] z-[120] flex items-center justify-center",children:_.jsx("div",{className:"w-32 h-32 md:w-48 md:h-48 logo-anim",children:_.jsx("img",{src:"/images/wordrobe-welcome.png",alt:"Splash Logo",className:"w-full h-full object-contain drop-shadow-md"})})}),rz=({isOpen:t,onClose:e})=>t?_.jsx("div",{className:"fixed inset-0 bg-[#F8FAFC] z-[105] flex items-center justify-center p-4 backdrop-blur-sm fade-in",children:_.jsx("div",{className:"neu-flat bg-[#F8FAFC] p-5 w-full max-w-sm text-center border border-white relative overflow-hidden flex flex-col max-h-full",children:_.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-center",children:[_.jsx("div",{className:"mb-4 flex justify-center",children:_.jsx("img",{src:"/images/welcome-logo.png",alt:"Welcome to wordrobe",className:"h-8 w-auto"})}),_.jsxs("div",{className:"space-y-2 text-left mb-4 px-1",children:[_.jsxs("div",{className:"flex items-center gap-3 bg-white/60 p-2 rounded-lg border border-white/50 shadow-sm",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#258FAF]/10 flex items-center justify-center text-[#258FAF] shrink-0",children:_.jsx("i",{className:"fas fa-search text-xs"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-sm text-gray-700",children:" & "}),_.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:" / "})]})]}),_.jsxs("div",{className:"flex items-center gap-3 bg-white/60 p-2 rounded-lg border border-white/50 shadow-sm",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#258FAF]/10 flex items-center justify-center text-[#258FAF] shrink-0",children:_.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("g",{transform:"rotate(-45 12 12)",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2H13L17 6V22H5V6L9 2ZM11 7.5C12.38 7.5 13.5 6.38 13.5 5C13.5 3.62 12.38 2.5 11 2.5C9.62 2.5 8.5 3.62 8.5 5C8.5 6.38 9.62 7.5 11 7.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-sm text-gray-700",children:""}),_.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:""})]})]}),_.jsxs("div",{className:"flex items-center gap-3 bg-white/60 p-2 rounded-lg border border-white/50 shadow-sm",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#258FAF]/10 flex items-center justify-center text-[#258FAF] shrink-0",children:_.jsx("i",{className:"fas fa-robot text-xs"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-sm text-gray-700",children:"AI"}),_.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:"APIAI"})]})]})]}),_.jsxs("div",{className:"mb-1 bg-[#258FAF]/5 border border-[#258FAF]/20 rounded-lg p-3 flex items-center justify-center gap-2 text-center",children:[_.jsx("div",{className:"text-[#258FAF] text-sm",children:_.jsx("i",{className:"fas fa-mobile-alt"})}),_.jsx("p",{className:"text-xs text-[#258FAF] font-bold leading-tight",children:""})]}),_.jsxs("div",{className:"mt-1 border-t border-gray-100 pt-3",children:[_.jsxs("p",{className:"text-[11px] text-gray-400 mb-5 leading-relaxed text-center",children:[_.jsx("a",{href:"https://maze-dracorex-e48.notion.site/wordrobe-Terms-of-Use-2c404d09b6cc803bad7bd012f0deed88?pvs=73",target:"_blank",rel:"noopener noreferrer",className:"text-[#258FAF] underline hover:text-[#1d6f8c] font-bold",children:""}),""]}),_.jsx("button",{onClick:e,className:"bg-[#258FAF] text-white w-full py-3 rounded-xl font-bold text-sm shadow-lg active:scale-95 transition-transform",children:""})]})]})})}):null,iz=({isOpen:t,onClose:e,onExport:n,onImport:r,user:i,onLogin:s,onLogout:o,openAlert:a,openConfirm:l,onRequestNotification:c})=>{const[d,h]=re.useState(""),[p,g]=re.useState(!1),[b,S]=re.useState(null),[P,I]=re.useState("Notification"in window?Notification.permission:"default");re.useEffect(()=>{if(t){const v=localStorage.getItem("gemini_apikey");v?(h(v),g(!0)):(h(""),g(!1)),S(null),"Notification"in window&&I(Notification.permission)}},[t]);const y=()=>{if(p)l(`API
`,()=>{localStorage.removeItem("gemini_apikey"),h(""),g(!1),S(null)});else{const v=d.trim();if(!v)return a("API");localStorage.setItem("gemini_apikey",v),h(v),g(!0)}},A=async()=>{const v=d.trim();if(!v){a("API");return}S("testing");try{const E=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${v}`;(await zc(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Hello"}]}]})},15e3)).ok?(S("success"),a(`
API`)):(S("error"),a(""))}catch(E){S("error"),a(`
${E.message}`)}},C=async()=>{if(!i)return a("");if(confirm(""))try{const v=await Si.collection("users").doc(i.uid).get();if(v.exists){const E=v.data().words||[];if(E.length===0)return a("");await be.words.clear(),await be.words.bulkAdd(E),alert(`
${E.length}
`),window.location.reload()}else a("")}catch(v){console.error(v),a(`:
${v.message}`)}},O=async()=>{if(!(!i||!Si))try{const v=await be.words.toArray();await Si.collection("users").doc(i.uid).set({words:v,updatedAt:ht.firestore.FieldValue.serverTimestamp()},{merge:!0}),a(`
PC`)}catch(v){console.error(v),a(`: ${v.message}`)}},D=()=>{if(!i){a("Google");return}c().then(()=>{"Notification"in window&&I(Notification.permission)})};return t?_.jsx("div",{className:"fixed inset-0 bg-slate-100/90 z-[60] flex items-center justify-center p-4 backdrop-blur-sm fade-in",children:_.jsxs("div",{className:"neu-flat bg-[#F8FAFC] p-6 w-full max-w-md max-h-[90vh] overflow-y-auto border border-white",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("h2",{className:"text-lg font-bold text-[#258FAF]",children:""}),_.jsx("a",{href:"https://maze-dracorex-e48.notion.site/wordrobe-Help-Guide-2bf04d09b6cc80248eebd66c3fcb284b",target:"_blank",rel:"noopener noreferrer",className:"flex items-center mt-[1px] text-[#258FAF]/60 hover:text-[#258FAF] transition-colors",children:_.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),_.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsxs("div",{className:"mb-6 border-b border-gray-200 pb-6",children:[_.jsxs("div",{className:"flex flex-col mb-3",children:[_.jsx("div",{className:"flex items-center gap-2",children:_.jsxs("h3",{className:"text-sm font-bold text-gray-500 flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-robot text-gray-500"})," AI (Gemini)"]})}),_.jsx("p",{className:"text-[10px] text-gray-400 mt-1 ml-6 leading-relaxed",children:"APIAI"}),_.jsx("p",{className:"text-[9px] text-gray-400 mt-0.5 ml-6 leading-relaxed",children:"API"}),_.jsx("p",{className:"text-[9px] text-gray-400 mt-0.5 ml-6 leading-relaxed",children:""})]}),_.jsxs("div",{className:"neu-flat p-4 rounded-xl",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[_.jsx("input",{type:"password",value:d,disabled:p,onChange:v=>h(v.target.value),placeholder:p?"":"API",className:`neu-input flex-1 p-2 text-sm min-w-0 transition-colors ${p?"bg-gray-100 text-gray-400":""}`}),_.jsx("button",{onClick:y,className:`px-3 py-2 rounded-lg text-xs font-bold shadow-md transition-colors whitespace-nowrap min-w-[80px] flex items-center justify-center gap-1 ${p?"bg-red-500 hover:bg-red-600 text-white":"bg-[#258FAF] text-white"}`,children:p?_.jsxs(Mb.Fragment,{children:[_.jsx("i",{className:"fas fa-trash"})," "]}):""})]}),_.jsxs("div",{className:"mt-3 flex justify-center items-center gap-4",children:[_.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#258FAF] hover:text-[#1d6f8c] flex items-center gap-1",children:[_.jsx("i",{className:"fas fa-key"})," ",_.jsx("span",{className:"underline",children:"API"})]}),_.jsxs("button",{onClick:A,className:"text-xs text-[#258FAF] hover:text-[#1d6f8c] inline-flex items-center gap-1",children:[b==="testing"?_.jsx("i",{className:"fas fa-spinner fa-spin"}):_.jsx("i",{className:"fas fa-plug"}),_.jsx("span",{className:"underline",children:""})]})]})]})]}),_.jsxs("div",{className:"mb-6 border-b border-gray-200 pb-6",children:[_.jsxs("div",{className:"flex flex-col mb-3",children:[_.jsx("div",{className:"flex items-center gap-2",children:_.jsxs("h3",{className:"text-sm font-bold text-gray-500 flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-cloud text-gray-500"})," "]})}),_.jsx("p",{className:"text-[10px] text-gray-400 mt-1 ml-6 leading-relaxed",children:"/"})]}),_.jsx("div",{children:i?_.jsxs("div",{className:"neu-pressed bg-[#258FAF]/5 p-4 rounded-xl border border-[#258FAF]/20 relative overflow-hidden text-center",children:[_.jsx("p",{className:"text-sm text-[#258FAF] font-bold mb-2",children:""}),_.jsx("p",{className:"text-xs text-gray-500 mb-3",children:i.email||i.uid}),_.jsxs("div",{className:"flex gap-2 justify-center mb-3",children:[_.jsxs("button",{onClick:O,className:"bg-[#258FAF] text-white px-3 py-2 rounded-lg text-xs font-bold shadow-md flex items-center justify-center gap-1",children:[_.jsx("i",{className:"fas fa-upload"})," "]}),_.jsxs("button",{onClick:C,className:"bg-white text-[#258FAF] border border-[#258FAF] px-3 py-2 rounded-lg text-xs font-bold shadow-sm flex items-center justify-center gap-1",children:[_.jsx("i",{className:"fas fa-download"})," "]})]}),_.jsx("button",{onClick:o,className:"bg-white text-red-500 border border-red-200 px-4 py-2 rounded-lg text-xs font-bold shadow-sm",children:""})]}):_.jsxs("button",{onClick:s,className:"w-full neu-btn text-gray-700 font-bold p-3 rounded-xl shadow-sm flex items-center justify-center gap-2 hover:bg-gray-50",children:[_.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[_.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),_.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),_.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),_.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex flex-col mb-3",children:[_.jsx("div",{className:"flex items-center gap-2",children:_.jsxs("h3",{className:"text-sm font-bold text-gray-500 flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-save text-gray-500"})," "]})}),_.jsx("p",{className:"text-[10px] text-gray-400 mt-1 ml-6 leading-relaxed",children:"/"}),_.jsx("p",{className:"text-[9px] text-gray-400 mt-0.5 ml-6 leading-relaxed",children:""})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsxs("button",{onClick:n,className:"flex-1 neu-btn p-3 text-xs font-bold text-gray-600 hover:text-[#258FAF] flex flex-col items-center gap-1",children:[_.jsx("i",{className:"fas fa-file-export text-lg"})," (DL)"]}),_.jsxs("label",{className:"flex-1 neu-btn p-3 text-xs font-bold text-gray-600 hover:text-[#258FAF] flex flex-col items-center gap-1 cursor-pointer",children:[_.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:r}),_.jsx("i",{className:"fas fa-file-import text-lg"}),""]})]})]}),_.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[_.jsxs("div",{className:"flex gap-3 w-full",children:[_.jsxs("a",{href:"https://buymeacoffee.com/conizm",target:"_blank",rel:"noopener noreferrer",className:"bg-[#258FAF] text-white flex-1 group inline-flex justify-center items-center gap-2.5 px-4 py-3 rounded-xl text-sm font-bold shadow-sm hover:opacity-90 transition-all duration-300 ease-out",children:[_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),_.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),_.jsx("path",{d:"M6 1c0 2 2 2 2 4",opacity:"0.7"}),_.jsx("path",{d:"M10 1c0 2 2 2 2 4",opacity:"0.9"}),_.jsx("path",{d:"M14 1c0 2 2 2 2 4",opacity:"0.7"})]}),_.jsx("span",{className:"tracking-wide font-bold",children:"Buy Me a Coffee"})]}),_.jsx("button",{onClick:D,className:`neu-btn w-12 h-12 flex items-center justify-center rounded-xl transition-colors duration-300 ${P==="granted"?"text-[#475569]":"text-gray-300"}`,title:P==="granted"?"ON":"ON",children:_.jsx("i",{className:`${P==="granted"?"fas fa-bell":"fas fa-bell-slash"} text-2xl`})})]}),_.jsxs("div",{className:"flex flex-col items-center gap-1",children:[_.jsx("a",{href:"https://wordrobe.cc/",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-gray-400 hover:text-gray-600 border-b border-transparent hover:border-gray-600 transition-colors mb-1",children:" / "}),_.jsxs("p",{className:"text-[10px] text-gray-300 font-mono",children:[" 2025 ",_.jsx("a",{href:"https://www.instagram.com/conizm_/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-gray-500 transition-colors",children:"conizm_"})," ",_.jsx("a",{href:"https://maze-dracorex-e48.notion.site/2c504d09b6cc806a8bdbeb3b6d2438f6?pvs=73",target:"_blank",rel:"noopener noreferrer",className:"hover:text-gray-500 transition-colors",children:"v.1.3.1"})]})]})]})]})}):null},sz=({onSaveWord:t,savedWords:e,setToast:n,externalResult:r,setExternalResult:i,isFromList:s,onBack:o,openAlert:a,onUpdateWord:l})=>{const[c,d]=re.useState(""),[h,p]=re.useState(!1),[g,b]=re.useState(!1),[S,P]=re.useState(null),I=re.useRef(null),y=re.useRef(0),A=re.useRef(!1),C=re.useRef(!0),O=re.useRef(null),D=!!localStorage.getItem("gemini_apikey");re.useEffect(()=>(C.current=!0,O.current&&!s&&O.current.focus(),()=>{C.current=!1}),[]);const v=async N=>{if(!N.trim())return;const x=++y.current;A.current=!1,p(!0),b(!0),i(null),d(N),P(null);try{const K=await Sb(N);if(l(K),C.current&&x===y.current){i(K),A.current=!0,p(!1);const we=Ab(K,N),Ie=localStorage.getItem("gemini_apikey"),Z=Ie?zm(K.word,Ie):Promise.resolve(null);Promise.all([we,Z]).then(([B,H])=>{if(!C.current||x!==y.current)return;let ne={...K},Ee=!1;if(B&&(ne={...ne,...B},Ee=!0),H)if(H.error==="ERROR_API_KEY")P(`AI
API`);else{if(H.spellCheck){a(` : ${H.spellCheck} ?
`),v(H.spellCheck);return}ne={...ne,aiData:H},H.simpleTranslation&&(ne.translation=H.simpleTranslation),Ee=!0}else D&&P(`AI
APIAI`);Ee&&(i(ne),l(ne))}).catch(()=>{C.current&&x===y.current&&D&&P(`AI
APIAI`)}).finally(()=>{C.current&&x===y.current&&b(!1)})}}catch(K){if(C.current&&x===y.current)if(D){const we=localStorage.getItem("gemini_apikey");zm(N,we).then(Ie=>{C.current&&x===y.current&&(Ie&&Ie.spellCheck?(a(` : ${Ie.spellCheck} ?
`),v(Ie.spellCheck)):(p(!1),b(!1),K.message==="NOT_FOUND"?a(""):a("")))}).catch(()=>{C.current&&x===y.current&&(p(!1),b(!1),K.message==="NOT_FOUND"?a(""):a(""))})}else p(!1),b(!1),K.message==="NOT_FOUND"?a(""):a("")}},E=async N=>{N&&N.preventDefault(),v(c)};re.useEffect(()=>{(async()=>{if(!(!s||!r||r.aiData||!D))try{const x=r.word,K=localStorage.getItem("gemini_apikey"),[we,Ie]=await Promise.all([Sb(x),zm(x,K)]);if(!Ie||Ie.error){C.current&&P(`AI
APIAI`);return}if(!C.current)return;let Z={...we};Z.aiData=Ie,Ie.simpleTranslation&&(Z.translation=Ie.simpleTranslation);const B=await Ab(Z,x);if(B&&(Z={...Z,...B}),!C.current)return;l(Z),i(Z),n("AI"),P(null)}catch(x){C.current&&P(`AI
APIAI`),console.log("Silent update failed silently:",x)}})()},[r,s,D,l]),re.useEffect(()=>{r&&I.current&&I.current.scrollIntoView({behavior:"smooth",block:"start"})},[r]),re.useEffect(()=>{if(r){const N=e.find(x=>x.word===r.word);N&&(N.tips!==r.tips||N.audioUrl!==r.audioUrl||!N.example&&r.example)&&l(r)}},[r,e,l]);const w=r,k=w&&e.some(N=>N.word===w.word),R=()=>{y.current++,i(null),d(""),p(!1),b(!1),O.current&&O.current.focus()};return _.jsxs("div",{className:"fade-in",children:[_.jsx("div",{className:"mb-8 mt-2",children:_.jsxs("form",{onSubmit:E,className:"relative",children:[_.jsx("input",{ref:O,type:"text",value:c,onChange:N=>d(N.target.value),className:"neu-input w-full p-4 pl-12 text-lg text-[#258FAF] placeholder-gray-400",placeholder:"/"}),_.jsx("i",{className:"fas fa-search absolute left-5 top-5 text-gray-400"}),D&&_.jsx("div",{className:`absolute top-2 w-12 h-12 flex items-center justify-center text-gray-300 pointer-events-none transition-all duration-300 ${c?"right-[5.5rem]":"right-[3.5rem]"}`,children:_.jsx("i",{className:"fas fa-robot"})}),c&&_.jsx("button",{type:"button",onClick:()=>{d(""),O.current.focus()},className:"absolute right-14 top-2 w-12 h-12 flex items-center justify-center text-gray-400 hover:text-gray-600",children:_.jsx("i",{className:"fas fa-times"})}),_.jsx("button",{type:"submit",className:"absolute right-2 top-2 bg-[#258FAF] text-white w-12 h-12 flex items-center justify-center rounded-xl shadow-md active:scale-95 transition-transform",children:_.jsx("i",{className:"fas fa-arrow-right"})})]})}),h&&_.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[_.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#258FAF] mb-4"}),_.jsx("p",{className:"text-sm text-gray-500 animate-pulse",children:"..."})]}),!h&&!w&&_.jsxs("div",{className:"text-center py-20 opacity-40 select-none",children:[_.jsx("div",{className:"neu-flat w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6 text-[#258FAF]",style:{borderRadius:"50%"},children:_.jsx("img",{src:"/images/wordrobe-lptop.png",className:"w-20 h-20 opacity-60 object-contain",alt:"Search"})}),_.jsx("p",{className:"font-bold text-gray-500"})]}),w&&_.jsxs("div",{ref:I,className:"neu-flat p-5 md:p-6 mb-8 fade-in relative mt-8 allow-select",children:[s&&_.jsx("button",{onClick:o,className:"absolute -top-5 left-1/2 transform -translate-x-1/2 bg-white text-gray-400 w-10 h-10 rounded-full shadow-md flex items-center justify-center z-20 hover:text-[#258FAF] transition-colors border border-gray-100",children:_.jsx("i",{className:"fas fa-times text-lg"})}),_.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-gray-100 pb-4",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-[#258FAF] break-all mb-1",children:w.word}),w.pronunciation&&_.jsx("div",{className:"mb-2",children:_.jsx("span",{className:"text-xs md:text-sm text-gray-500 font-mono bg-gray-100 px-2 py-0.5 rounded",children:w.pronunciation})}),_.jsx("p",{className:"text-lg md:text-xl font-bold text-gray-700 mt-3",children:w.translation})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:()=>Xo(w.word,w.audioUrl),className:"neu-btn w-10 h-10 flex items-center justify-center rounded-full text-[#258FAF]",style:{borderRadius:"50%"},children:_.jsx("i",{className:"fas fa-volume-up"})}),_.jsx("button",{onClick:()=>t(w),className:`neu-btn w-10 h-10 flex items-center justify-center rounded-full ${k?"text-yellow-500 neu-pressed":"text-gray-400"}`,style:{borderRadius:"50%"},children:_.jsx("i",{className:"fas fa-bookmark"})})]})]}),w.aiData&&_.jsx("div",{className:"mb-6 fade-in",children:_.jsxs("div",{className:"neu-pressed bg-[#258FAF]/5 p-4 rounded-xl border border-[#258FAF]/20 relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[#258FAF]"}),_.jsxs("div",{className:"flex gap-2 items-start mb-3",children:[_.jsx("i",{className:"fas fa-robot text-[#258FAF] mt-1"}),_.jsx("p",{className:"text-xs font-bold text-[#258FAF]",children:"AI Tips"})]}),_.jsxs("div",{className:"space-y-4 pl-2",children:[w.aiData.definition&&_.jsxs("div",{children:[_.jsx("span",{className:"text-[10px] font-bold text-[#258FAF] bg-white/50 px-2 py-0.5 rounded border border-[#258FAF]/10",children:""}),_.jsx("p",{className:"text-sm text-gray-700 mt-1 leading-relaxed font-bold",children:w.aiData.definition})]}),w.aiData.exampleEn&&_.jsxs("div",{children:[_.jsx("span",{className:"text-[10px] font-bold text-[#258FAF] bg-white/50 px-2 py-0.5 rounded border border-[#258FAF]/10",children:""}),_.jsxs("p",{className:"text-sm text-gray-700 mt-1 leading-relaxed italic",children:['"',w.aiData.exampleEn,'"']}),w.aiData.exampleJa&&_.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w.aiData.exampleJa})]}),w.aiData.supplement&&_.jsxs("div",{children:[_.jsx("span",{className:"text-[10px] font-bold text-[#258FAF] bg-white/50 px-2 py-0.5 rounded border border-[#258FAF]/10",children:""}),_.jsx("p",{className:"text-sm text-gray-600 mt-1 leading-relaxed",children:w.aiData.supplement})]})]})]})}),S&&_.jsx("div",{className:"mb-6 fade-in",children:_.jsxs("div",{className:"neu-pressed bg-red-50 p-4 rounded-xl border border-red-100 relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-400"}),_.jsxs("div",{className:"flex gap-2 items-start pl-2 text-red-400",children:[_.jsx("i",{className:"fas fa-exclamation-triangle mt-1 shrink-0"}),_.jsxs("div",{className:"text-xs space-y-1",children:[_.jsx("p",{className:"font-bold",children:"AI"}),_.jsx("p",{children:"API"}),_.jsxs("div",{className:"pt-1 opacity-80 text-[10px] leading-relaxed",children:[_.jsx("p",{className:"font-bold",children:"Unable to receive a response from AI."}),_.jsx("p",{children:"Please check your API key settings or if the usage limit has been reached."})]})]})]})]})}),_.jsxs("div",{className:"space-y-8",children:[w.meanings&&w.meanings.length>0?w.meanings.map((N,x)=>_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"flex items-center gap-2 mb-3",children:_.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded-md uppercase",children:N.partOfSpeech.toUpperCase()})}),_.jsx("div",{className:"pl-2 border-l-2 border-[#258FAF]/30 space-y-6",children:N.definitions.map((K,we)=>_.jsxs("div",{children:[_.jsxs("p",{className:"text-gray-800 font-bold mb-1 leading-relaxed text-sm md:text-base",children:[_.jsxs("span",{className:"text-[#258FAF] mr-1",children:[we+1,"."]})," ",K.ja]}),_.jsx("p",{className:"text-xs text-gray-400 mb-2 pl-4",children:K.en})]},we))})]},x)):_.jsxs("div",{className:"text-center text-gray-400 text-sm",children:["",_.jsx("br",{}),_.jsxs("span",{className:"text-xs",children:[": ",w.translation]})]}),w.synonyms&&w.synonyms.length>0&&_.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[_.jsx("span",{className:"text-xs font-bold text-gray-400 block mb-2",children:" (Synonyms)"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:w.synonyms.slice(0,8).map((N,x)=>_.jsx("span",{className:"neu-pressed px-3 py-1 text-xs text-gray-500 rounded-lg",children:N},x))})]})]}),w.tips&&_.jsx("div",{className:"mt-8 pt-4 border-t border-gray-100 text-right",children:_.jsxs("span",{className:"text-[10px] text-gray-400 opacity-70",children:["Source: ",w.tips]})})]}),!s&&w&&_.jsx("button",{onClick:R,className:"fixed bottom-[100px] right-4 w-14 h-14 bg-[#258FAF] text-white rounded-full shadow-lg flex items-center justify-center z-[60] hover:bg-[#1d6f8c] transition-transform active:scale-95",children:_.jsx("i",{className:"fas fa-search text-xl"})})]})},oz=({item:t,onSelect:e,onDelete:n,onToggleMemorized:r})=>{const i=re.useRef(null),s=a=>{i.current?(clearTimeout(i.current),i.current=null,r(t)):i.current=setTimeout(()=>{e(t),i.current=null},250)},o=t.isMemorized||!1;return _.jsxs("div",{onClick:s,className:`neu-flat p-4 flex justify-between items-center cursor-pointer active:scale-[0.99] transition ${o?"opacity-40 grayscale bg-gray-100":""}`,children:[_.jsxs("div",{className:"overflow-hidden mr-2",children:[_.jsx("div",{className:"font-bold text-[#258FAF] text-lg",children:t.word}),_.jsx("div",{className:"text-sm text-gray-600 font-bold",children:t.translation}),t.folder&&_.jsxs("div",{className:"text-[10px] text-gray-400 mt-1 bg-gray-100 inline-block px-2 py-0.5 rounded-md",children:[_.jsx("i",{className:"fas fa-folder mr-1"}),t.folder]})]}),_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("button",{className:"neu-btn w-10 h-10 flex items-center justify-center rounded-full text-[#258FAF] shrink-0 relative z-10",onClick:a=>{a.stopPropagation(),Xo(t.word,t.audioUrl)},style:{borderRadius:"50%"},children:_.jsx("i",{className:"fas fa-volume-up"})}),_.jsx("button",{className:"neu-btn w-10 h-10 flex items-center justify-center rounded-full text-gray-400 hover:text-red-400 shrink-0 relative z-10",onClick:a=>{a.stopPropagation(),n(t.word)},style:{borderRadius:"50%"},children:_.jsx("i",{className:"fas fa-trash"})})]})]})},az=({savedWords:t,folders:e,onDeleteWord:n,onSelectWord:r,onToggleMemorized:i,onManageFolders:s})=>{const[o,a]=re.useState("ALL"),[l,c]=re.useState(!1),d=o==="ALL"?t:t.filter(h=>h.folder===o);return!t||t.length===0?_.jsx("div",{className:"text-center py-20 text-gray-400 fade-in",children:_.jsx("p",{children:""})}):_.jsxs("div",{className:"fade-in",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsxs("h2",{className:"text-xl font-bold text-[#258FAF] ml-2",children:[" ",_.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-1",children:["(",d.length,")"]})]}),_.jsxs("div",{className:"flex items-center",children:[_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>c(!l),className:"text-gray-400 hover:text-[#258FAF] p-2 flex items-center gap-1",children:[_.jsx("span",{className:"text-xs font-bold",children:o==="ALL"?"ALL":o}),_.jsx("i",{className:"fas fa-filter"})]}),l&&_.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white border border-gray-100 rounded-xl shadow-xl overflow-hidden w-40 z-30 fade-in",children:[_.jsx("button",{onClick:()=>{a("ALL"),c(!1)},className:`w-full text-left px-4 py-3 text-xs font-bold border-b border-gray-50 hover:bg-gray-50 ${o==="ALL"?"text-[#258FAF] bg-[#258FAF]/5":"text-gray-600"}`,children:"ALL"}),e.map(h=>_.jsxs("button",{onClick:()=>{a(h),c(!1)},className:`w-full text-left px-4 py-3 text-xs font-bold border-b border-gray-50 hover:bg-gray-50 ${o===h?"text-[#258FAF] bg-[#258FAF]/5":"text-gray-600"}`,children:[_.jsx("i",{className:"fas fa-folder mr-2 text-gray-300"}),h]},h))]})]}),_.jsx("button",{onClick:s,className:"text-gray-400 hover:text-[#258FAF] p-2",children:_.jsx("i",{className:"fas fa-cog"})})]})]}),_.jsxs("div",{className:"space-y-4",children:[d.map((h,p)=>_.jsx(oz,{item:h,onSelect:r,onDelete:n,onToggleMemorized:i},p)),d.length===0&&_.jsx("div",{className:"text-center py-10 text-gray-400 text-sm",children:""})]})]})},lz=({savedWords:t,folderList:e,onFinish:n,openAlert:r})=>{const[i,s]=re.useState(!1),[o,a]=re.useState("en_ja"),[l,c]=re.useState("ALL"),[d,h]=re.useState([]),[p,g]=re.useState(0),[b,S]=re.useState(!1),[P,I]=re.useState(!1),[y,A]=re.useState(null),[C,O]=re.useState(!1),D=re.useRef(null),v=re.useRef(null),E=()=>{const Z=t.filter(H=>(l==="ALL"||H.folder===l)&&!H.isMemorized);if(Z.length===0)return r("");const B=[...Z].sort(()=>Math.random()-.5);h(B),g(0),S(!1),s(!0)},w=Z=>{Z||h(B=>{const H=B[p];return[...B,H]}),I(!0),setTimeout(()=>{S(!1),p+1>=d.length&&Z?(s(!1),h([]),g(0),r(""),n()):g(B=>B+1),I(!1),A(null),v.current&&(v.current.style.transform="")},250)},k=Z=>{D.current=Z.touches[0].clientX},R=Z=>{if(!D.current||!v.current||P)return;const H=Z.touches[0].clientX-D.current,ne=H*.05;v.current.style.transform=`translateX(${H}px) rotate(${ne}deg)`,H>50?A("clear"):H<-50?A("unclear"):A(null)},N=Z=>{if(!D.current||!v.current)return;const B=Z.changedTouches[0].clientX,H=D.current-B;Math.abs(H)>100?H>0?w(!1):w(!0):(v.current.style.transform="",A(null)),D.current=null};re.useEffect(()=>{if(i&&d[p]&&o==="en_ja"){const Z=setTimeout(()=>{b||Xo(d[p].word,d[p].audioUrl)},300);return()=>clearTimeout(Z)}},[p,i,o]);const x=()=>{if(!b){const Z=d[p].word;Xo(Z,d[p].audioUrl)}S(!b)};if(!i)return _.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center fade-in",children:[_.jsx("h2",{className:"text-2xl font-bold mb-4 text-[#258FAF]",children:"Review Mode"}),_.jsx("div",{className:"neu-flat w-40 h-40 rounded-full flex items-center justify-center mb-8 text-[#258FAF]",style:{borderRadius:"50%"},children:_.jsx("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("g",{transform:"rotate(-45 12 12)",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2H13L17 6V22H5V6L9 2ZM11 7.5C12.38 7.5 13.5 6.38 13.5 5C13.5 3.62 12.38 2.5 11 2.5C9.62 2.5 8.5 3.62 8.5 5C8.5 6.38 9.62 7.5 11 7.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})})}),_.jsxs("div",{className:"relative mb-4 w-72 z-20",children:[_.jsxs("button",{onClick:()=>O(!C),className:"w-full neu-flat text-gray-700 font-bold py-3 px-4 rounded-lg flex items-center justify-between text-xs active:scale-95 transition-transform",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-folder text-[#258FAF]"}),l==="ALL"?"":l]}),_.jsx("i",{className:`fas fa-chevron-down transition-transform ${C?"rotate-180":""} text-gray-400`})]}),C&&_.jsxs("div",{className:"absolute top-full left-0 w-full mt-2 bg-white border border-gray-100 rounded-xl shadow-xl overflow-hidden max-h-[130px] overflow-y-auto z-[60] fade-in",children:[_.jsx("button",{onClick:()=>{c("ALL"),O(!1)},className:`w-full text-left px-4 py-3 text-xs font-bold border-b border-gray-50 hover:bg-gray-50 ${l==="ALL"?"text-[#258FAF] bg-[#258FAF]/5":"text-gray-600"}`,children:""}),e.map(Z=>_.jsxs("button",{onClick:()=>{c(Z),O(!1)},className:`w-full text-left px-4 py-3 text-xs font-bold border-b border-gray-50 hover:bg-gray-50 ${l===Z?"text-[#258FAF] bg-[#258FAF]/5":"text-gray-600"}`,children:[_.jsx("i",{className:"fas fa-folder mr-2 text-gray-300"}),Z]},Z))]})]}),_.jsxs("div",{className:"flex gap-4 mb-4 bg-white p-1 rounded-lg shadow-inner w-72",children:[_.jsx("button",{onClick:()=>a("en_ja"),className:`flex-1 px-4 py-2 rounded-lg text-xs font-bold transition-all ${o==="en_ja"?"bg-[#258FAF] text-white shadow-md":"text-gray-400"}`,children:"  "}),_.jsx("button",{onClick:()=>a("ja_en"),className:`flex-1 px-4 py-2 rounded-lg text-xs font-bold transition-all ${o==="ja_en"?"bg-[#258FAF] text-white shadow-md":"text-gray-400"}`,children:"  "})]}),_.jsx("button",{onClick:E,className:"bg-[#258FAF] text-white w-72 py-4 rounded-lg font-bold shadow-lg active:scale-95 transition-transform",children:""})]});const K=d[p];if(!K)return null;const we=o==="en_ja"?K.word:K.translation,Ie=o==="en_ja"?K.translation:K.word;return _.jsxs("div",{className:"h-full flex flex-col items-center justify-center pb-4 relative fade-in overflow-hidden",children:[_.jsx("div",{ref:v,className:`w-full max-w-sm h-[420px] card-flip cursor-pointer ${b?"flipped":""} ${P?y==="clear"?"slide-out-right":"slide-out-left":"slide-in-right"}`,onClick:x,onTouchStart:k,onTouchMove:R,onTouchEnd:N,children:_.jsxs("div",{className:"card-inner",children:[_.jsxs("div",{className:"card-front neu-flat flex flex-col items-center justify-center p-8 text-center bg-[#F8FAFC] relative",children:[_.jsx("span",{className:"absolute top-6 left-6 text-xs font-bold text-gray-400",children:"QUESTION"}),_.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center w-full",children:[_.jsx("h2",{className:"text-4xl font-bold text-[#258FAF] break-all",children:we}),o==="en_ja"&&_.jsx("button",{onClick:Z=>{Z.stopPropagation(),Xo(K.word,K.audioUrl)},className:"neu-btn w-12 h-12 flex items-center justify-center rounded-full text-[#258FAF] mt-8",style:{borderRadius:"50%"},children:_.jsx("i",{className:"fas fa-volume-up"})})]}),y==="clear"&&_.jsx("div",{className:"absolute top-10 right-10 border-4 border-[#258FAF] text-[#258FAF] font-black text-2xl p-2 rounded transform rotate-12 opacity-80 pointer-events-none",children:"CLEAR"}),y==="unclear"&&_.jsx("div",{className:"absolute top-10 left-10 border-4 border-gray-400 text-gray-400 font-black text-2xl p-2 rounded transform -rotate-12 opacity-80 pointer-events-none",children:"UNCLEAR"}),_.jsxs("div",{className:"absolute bottom-6 w-full flex flex-col items-center gap-2",children:[_.jsx("p",{className:"text-xs text-gray-400 opacity-60",children:""}),_.jsxs("div",{className:"md:hidden text-gray-300 flex items-center mt-1 gap-2 w-full justify-center px-4",children:[_.jsx("span",{className:"text-lg font-bold text-gray-400 opacity-80",children:""}),_.jsx("i",{className:"fas fa-chevron-left opacity-50 text-xs"}),_.jsxs("div",{className:"mx-2 flex flex-col items-center",children:[_.jsx("i",{className:"fas fa-hand-pointer text-2xl text-[#258FAF] opacity-80"}),_.jsx("span",{className:"text-[8px] text-gray-400 mt-1",children:"swipe"})]}),_.jsx("i",{className:"fas fa-chevron-right opacity-50 text-xs"}),_.jsx("span",{className:"text-lg font-bold text-[#258FAF] opacity-80",children:""})]})]})]}),_.jsxs("div",{className:"card-back neu-flat flex flex-col items-center justify-center p-8 text-center bg-gradient-to-b from-[#F8FAFC] to-white",children:[_.jsx("span",{className:"absolute top-6 left-6 text-xs font-bold text-[#258FAF]",children:"ANSWER"}),_.jsx("h3",{className:"text-2xl font-bold text-gray-700 mb-4",children:Ie}),_.jsx("div",{className:"w-full overflow-y-auto max-h-32 text-sm text-gray-500 mb-4 px-4 space-y-2",children:K.meanings&&K.meanings.length>0?K.meanings.map((Z,B)=>_.jsxs("p",{children:[_.jsxs("span",{className:"font-bold",children:[Z.partOfSpeech,":"]})," ",Z.definitions[0].ja]},B)):_.jsx("p",{children:K.definition})}),_.jsx("button",{onClick:Z=>{Z.stopPropagation(),Xo(K.word,K.audioUrl)},className:"neu-btn w-12 h-12 flex items-center justify-center rounded-full mt-2 text-[#258FAF]",style:{borderRadius:"50%"},children:_.jsx("i",{className:"fas fa-volume-up"})})]})]})},p),_.jsxs("div",{className:"w-full max-w-sm mt-4 md:mt-8 flex gap-4 hidden md:flex",children:[_.jsxs("button",{onClick:()=>w(!1),className:"flex-1 bg-slate-200 text-slate-600 py-4 rounded-2xl font-bold shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2",children:[_.jsx("i",{className:"fas fa-times"})," Unclear"]}),_.jsxs("button",{onClick:()=>w(!0),className:"flex-1 bg-[#258FAF] text-white py-4 rounded-2xl font-bold shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2",children:[_.jsx("i",{className:"far fa-circle"})," Clear"]})]})]})};function uz(){const[t,e]=re.useState("search"),[n,r]=re.useState([]),[i,s]=re.useState(["main"]),[o,a]=re.useState(null),[l,c]=re.useState(localStorage.getItem("is_first_launch_v1")!=="false"),[d,h]=re.useState(localStorage.getItem("is_first_launch_v1")!=="false"),[p,g]=re.useState(!1),[b,S]=re.useState(!1),[P,I]=re.useState(!1),[y,A]=re.useState(null),[C,O]=re.useState(null),[D,v]=re.useState(!1),[E,w]=re.useState(null),[k,R]=re.useState({isOpen:!1,type:"alert",message:""}),[N,x]=re.useState(0),K=Q=>R({isOpen:!0,type:"alert",message:Q,onConfirm:()=>R(oe=>({...oe,isOpen:!1}))}),we=(Q,oe)=>R({isOpen:!0,type:"confirm",message:Q,onConfirm:()=>{oe(),R(le=>({...le,isOpen:!1}))}});re.useEffect(()=>{be.words.toArray().then(oe=>r(oe.sort((le,ue)=>(ue.addedAt||0)-(le.addedAt||0))));const Q=localStorage.getItem("aitan_folders");Q&&s(JSON.parse(Q)),l&&setTimeout(()=>c(!1),2500),Mo.onAuthStateChanged(oe=>a(oe))},[]);const Ie=()=>{localStorage.setItem("is_first_launch_v1","false"),h(!1)},Z=async Q=>{try{if(n.some(le=>le.word===Q.word)){const le=await be.words.where("word").equals(Q.word).first();le&&await be.words.delete(le.id),r(ue=>ue.filter(Re=>Re.word!==Q.word)),w("")}else{const le={...Q,addedAt:Date.now(),folder:"main"};await be.deleted_words.delete(le.word).catch(()=>{});const ue=await be.words.add(le);r(Re=>[{...le,id:ue},...Re]),w(""),A(le),S(!0)}}catch{K("")}},B=()=>{if(!Mo)return K("");const Q=new ht.auth.GoogleAuthProvider;Mo.signInWithPopup(Q).catch(oe=>{console.error(oe),K(`: ${oe.message}`)})},H=()=>{Mo&&Mo.signOut().then(()=>{w(""),a(null)})},ne=async Q=>{if(!y)return;const oe={...y,folder:Q};r(le=>le.map(ue=>ue.word===oe.word?oe:ue));try{const le=await be.words.where("word").equals(oe.word).first();le&&await be.words.update(le.id,{folder:Q})}catch{}w(`${Q}`),S(!1)},Ee=Q=>{i.includes(Q)||s(oe=>[...oe,Q]),ne(Q)},Te=async(Q,oe)=>{if(i.includes(oe))return K("");s(ue=>ue.map(Re=>Re===Q?oe:Re));const le=n.map(ue=>ue.folder===Q?{...ue,folder:oe}:ue);r(le),await be.transaction("rw",be.words,async()=>{const ue=await be.words.where("folder").equals(Q).toArray();for(const Re of ue)await be.words.update(Re.id,{folder:oe})})},qe=async Q=>{we(`${Q}
main`,async()=>{s(le=>le.filter(ue=>ue!==Q));const oe=n.map(le=>le.folder===Q?{...le,folder:"main"}:le);r(oe),await be.transaction("rw",be.words,async()=>{const le=await be.words.where("folder").equals(Q).toArray();for(const ue of le)await be.words.update(ue.id,{folder:"main"})})})},Un=Q=>{we(`${Q}`,async()=>{const oe=await be.words.where("word").equals(Q).first();oe&&(await be.words.delete(oe.id),await be.deleted_words.put({word:Q})),r(le=>le.filter(ue=>ue.word!==Q))})},Bn=Q=>{O(Q),e("search"),v(!0)},yn=()=>{e("search"),O(null),v(!1),x(Q=>Q+1)},$n=()=>{O(null),D&&(e("list"),v(!1))},wp=()=>{const Q=JSON.stringify(n,null,2),oe=new Blob([Q],{type:"application/json"}),le=URL.createObjectURL(oe),ue=document.createElement("a");ue.href=le,ue.download="backup.json",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},Ip=Q=>{const oe=Q.target.files[0];if(!oe)return;const le=new FileReader;le.onload=ue=>{try{const Re=JSON.parse(ue.target.result);Array.isArray(Re)&&we("",()=>{r(Re);const _o=new Set(["main",...Re.map(al=>al.folder||"main")]);s(Array.from(_o)),w(""),g(!1)})}catch{K("")}},le.readAsText(oe)},mo=async()=>{if(!(!o||!Si))try{const Q=await be.words.toArray();await Si.collection("users").doc(o.uid).set({words:Q,updatedAt:ht.firestore.FieldValue.serverTimestamp()},{merge:!0}),K(`
PC`)}catch(Q){console.error(Q),K(`: ${Q.message}`)}},go=async()=>{if(!o)return K("");if(confirm(""))try{const Q=await Si.collection("users").doc(o.uid).get();if(Q.exists){const oe=Q.data().words||[];if(oe.length===0)return K("");await be.words.clear(),await be.words.bulkAdd(oe),alert(`
${oe.length}
`),window.location.reload()}else K("")}catch(Q){console.error(Q),K(`:
${Q.message}`)}},il=async()=>{if(!("Notification"in window)){w("");return}try{if(await Notification.requestPermission()==="granted"){const oe=ht.messaging();oe.onMessage(Re=>{console.log("Message received. ",Re);const _o=Re.notification.title,al={body:Re.notification.body,icon:"https://conizm.github.io/wordrobe/images/wordrobe-icon.png"};new Notification(_o,al)});const le=await navigator.serviceWorker.ready,ue=await oe.getToken({vapidKey:"BP12NDn7Ec3A2NNYwwyiRsplOpSNifZEHeq4W2cPWyXpIIlER3tp9OkW5V4U0LEJT-dzJ4tkqVp3_iIlBUAaVjU",serviceWorkerRegistration:le});if(ue){if(w(""),o){const Re=Intl.DateTimeFormat().resolvedOptions().timeZone;await Si.collection("users").doc(o.uid).update({fcmToken:ue,timeZone:Re,updatedAt:ht.firestore.FieldValue.serverTimestamp()})}}else w("")}else w("")}catch(Q){console.error(":",Q),w(`: ${Q.message}`)}},sl=async Q=>{r(oe=>oe.map(le=>le.word===Q.word?{...le,...Q}:le));try{const oe=await be.words.where("word").equals(Q.word).first();if(oe){const{id:le,...ue}=Q;await be.words.update(oe.id,ue)}}catch{}},ol=async Q=>{const oe=!Q.isMemorized,le={...Q,isMemorized:oe};r(ue=>ue.map(Re=>Re.word===Q.word?le:Re));try{const ue=await be.words.where("word").equals(Q.word).first();ue&&await be.words.update(ue.id,{isMemorized:oe})}catch{}},yo=d?"pointer-events-none opacity-50":"";return _.jsxs("div",{className:"h-screen-safe",children:[l&&_.jsx(nz,{}),_.jsx(rz,{isOpen:d&&!l,onClose:Ie}),_.jsxs("header",{className:"custom-header neu-flat",children:[_.jsx("div",{className:"flex-1 flex justify-center items-center",onClick:yn,children:_.jsx("img",{src:"/images/wordrobe-top.png",alt:"wordrobe",className:"h-8 md:h-12"})}),_.jsx("button",{onClick:()=>g(!0),className:"absolute right-5 md:right-10 text-gray-400 hover:text-[#258FAF] transition-colors",children:_.jsx("i",{className:"fas fa-cog"})})]}),_.jsxs("main",{className:`custom-main main-with-ad ${yo}`,children:[t==="search"&&_.jsx(sz,{savedWords:n,onSaveWord:Z,setToast:w,externalResult:C,setExternalResult:O,isFromList:D,onBack:$n,openAlert:K,onUpdateWord:sl},N),t==="list"&&_.jsx(az,{savedWords:n,folders:i,onDeleteWord:Un,onSelectWord:Bn,onToggleMemorized:ol,onManageFolders:()=>I(!0)}),t==="review"&&_.jsx(lz,{savedWords:n,folderList:i,onFinish:yn,openAlert:K})]}),_.jsxs("nav",{className:`custom-nav neu-flat nav-bottom ${yo}`,children:[_.jsxs("button",{onClick:yn,className:"nav-btn flex flex-col items-center w-1/3",children:[_.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-xl mb-1 ${t==="search"?"neu-pressed":""}`,children:_.jsx("i",{className:"fas fa-search text-lg"})}),_.jsx("span",{className:"text-[10px] font-bold",children:""})]}),_.jsxs("button",{onClick:()=>e("review"),className:"nav-btn flex flex-col items-center w-1/3",children:[_.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-xl mb-1 ${t==="review"?"neu-pressed":""}`,children:_.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("g",{transform:"rotate(-45 12 12)",children:_.jsx("path",{d:"M9 2H13L17 6V22H5V6L9 2ZM11 7.5C12.38 7.5 13.5 6.38 13.5 5C13.5 3.62 12.38 2.5 11 2.5C9.62 2.5 8.5 3.62 8.5 5C8.5 6.38 9.62 7.5 11 7.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})})}),_.jsx("span",{className:"text-[10px] font-bold",children:""})]}),_.jsxs("button",{onClick:()=>e("list"),className:"nav-btn flex flex-col items-center w-1/3",children:[_.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-xl mb-1 ${t==="list"?"neu-pressed":""}`,children:_.jsx("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M6 2H11V22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2ZM13 2H18C19.1046 2 20 2.89543 20 4V20C20 21.1046 19.1046 22 18 22H13V2ZM9 11C8.44772 11 8 11.4477 8 12C8 12.5523 8.44772 13 9 13C9.55228 13 10 12.5523 10 12C10 11.4477 9.55228 11 9 11ZM15 11C14.4477 11 14 11.4477 14 12C14 12.5523 14.4477 13 15 13C15.5523 13 16 12.5523 16 12C16 11.4477 15.5523 11 15 11Z"})})}),_.jsx("span",{className:"text-[10px] font-bold",children:""})]})]}),_.jsx(iz,{isOpen:p,onClose:()=>g(!1),user:o,onLogin:B,onLogout:H,openAlert:K,openConfirm:we,onExport:wp,onImport:Ip,onRequestNotification:il,onManualSync:mo,onForceDownload:go}),_.jsx(Z6,{isOpen:b,onClose:()=>S(!1),folders:i,onSelectFolder:ne,onCreateFolder:Ee}),_.jsx(ez,{isOpen:P,onClose:()=>I(!1),folders:i,onRename:Te,onDelete:qe}),_.jsx(tz,{isOpen:k.isOpen,type:k.type,message:k.message,onConfirm:k.onConfirm,onCancel:()=>R(Q=>({...Q,isOpen:!1}))}),E&&_.jsx(X6,{msg:E,onClose:()=>w(null)})]})}Km.createRoot(document.getElementById("root")).render(_.jsx(Mb.StrictMode,{children:_.jsx(uz,{})}));
